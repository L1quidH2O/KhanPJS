(()=>{"use strict";var e=function(e,t,i){var r=function(){},s=function(e){var t=new XMLHttpRequest;if(t.open("GET",e,!1),t.overrideMimeType&&t.overrideMimeType("text/plain"),t.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),t.send(null),200!==t.status&&0!==t.status)throw"XMLHttpRequest failed, status code "+t.status;return t.responseText},n={NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:34028235e31,MIN_FLOAT:-34028235e31,MAX_INT:2147483647,MIN_INT:-2147483648,PI:i.PI,TWO_PI:2*i.PI,HALF_PI:i.PI/2,THIRD_PI:i.PI/3,QUARTER_PI:i.PI/4,TAU:2*i.PI,DEG_TO_RAD:i.PI/180,RAD_TO_DEG:180/i.PI,WHITESPACE:" \t\n\r\fÂ ",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};function a(){}a.prototype=n;var o=new a;function h(e,t){function i(i){o.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},enumerable:!0})}var r=[];for(var s in t)"function"==typeof t[s]?e.hasOwnProperty(s)||(e[s]=t[s]):"$"===s.charAt(0)||s in e||r.push(s);for(;r.length>0;)i(r.shift())}o.defineProperty=function(e,t,i){"defineProperty"in Object?Object.defineProperty(e,t,i):(i.hasOwnProperty("get")&&e.__defineGetter__(t,i.get),i.hasOwnProperty("set")&&e.__defineSetter__(t,i.set))},o.extendClassChain=function(e){for(var t=[e],i=e.$upcast;i;i=i.$upcast)h(i,e),t.push(i),e=i;for(;t.length>0;)t.pop().$self=e},o.extendStaticMembers=function(e,t){h(e,t)},o.extendInterfaceMembers=function(e,t){h(e,t)},o.addMethod=function(e,t,i,r){if(e[t]){var s=i.length,n=e[t];e[t]=function(){return arguments.length===s?i.apply(this,arguments):n.apply(this,arguments)}}else e[t]=i},o.createJavaArray=function(e,t){var i=null;if("number"==typeof t[0]){var r=0|t[0];if(t.length<=1){(i=[]).length=r;for(var s=0;s<r;++s)i[s]=0}else{i=[];for(var n=t.slice(1),a=0;a<r;++a)i.push(o.createJavaArray(e,n))}}return i};var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};["open()","createOutput()","createInput()","BufferedReader","selectFolder()","dataPath()","createWriter()","selectOutput()","beginRecord()","saveStream()","endRecord()","selectInput()","saveBytes()","createReader()","beginRaw()","endRaw()","PrintWriter","delay()"].map((e=>{o[e.replace("()","")]=function(){throw"Processing.js does not support "+e+"."}})),o.defineProperty(o,"screenWidth",{get:function(){return e.innerWidth}}),o.defineProperty(o,"screenHeight",{get:function(){return e.innerHeight}});var c=[],u={};class p{maxSize;map=new Map;used=[];constructor(e){this.maxSize=e}set(e,t){e+="",this.map.set(e,t),this.used.push(e),this.used.length>this.maxSize&&this.map.delete(this.used.shift())}get(e){if(e+="",!this.map.has(e))return;const t=this.used;return t[t.length-1]=t.splice(t.indexOf(e),1)[0],this.map.get(e)}}var f=function(){const e=t.createElement("canvas").getContext("2d",{alpha:!1}),r=t.createElement("div");r.style.all="unset !important",r.style.position="absolute !important",r.style.opacity=0;const s="dbflkhyjqpg",n=function(n){var a=n.css;e.font=a;var o=e.measureText(s);n.ascent=o.actualBoundingBoxAscent,n.descent=o.actualBoundingBoxDescent,r.style.font=a,r.textContent=s+"\n"+s,t.body.appendChild(r);var h=r.clientHeight;h>=2*n.size&&(n.leading=i.round(h/2)),t.body.removeChild(r)};return n.ctx=e,n}();class d{constructor(e="",t=0){this.size=t,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*t;var i=e.indexOf(" Italic Bold");-1!==i&&(e=e.substring(0,i)),this.style="normal";var r=e.indexOf(" Italic");-1!==r&&(e=e.substring(0,r),this.style="italic"),this.weight="normal";var s=e.indexOf(" Bold");if(-1!==s&&(e=e.substring(0,s),this.weight="bold"),this.family="sans-serif",void 0!==e)switch(e){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=e;break;default:this.family='"'+e+'", sans-serif'}this.css=this.getCSSDefinition(),f(this)}getCSSDefinition(e,t){return void 0===e&&(e=this.size+"px"),void 0===t&&(t=this.leading+"px"),`${this.style} normal ${this.weight} ${e}/${t} ${this.family}`}measureTextWidth(e){return f.ctx.font=this.css,f.ctx.measureText(e).width}static PFontCache=new p(100);static get=function(e,t){var i=d.PFontCache,r=e+"/"+t,s=i.get(r);return s||(s=new d(e,t),i.set(r,s)),s};static list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]}}d.preloading={template:{},initialized:!1,initialize:function(){var e=t.createElement("style");e.setAttribute("type","text/css"),e.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+"#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#".replace(/[#237]/g,(function(e){return"AAAAAAAA".substr(~~e?7-e:6)}))+"')\n       format('truetype');\n}",t.head.appendChild(e);var i=t.createElement("span");i.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy; pointer-events: none;',i.innerHTML="AAAAAAAA",t.body.appendChild(i),this.template=i,this.initialized=!0},getElementWidth:function(e){return t.defaultView.getComputedStyle(e,"").getPropertyValue("width")},timeAttempted:0,pending:function(e){this.initialized||this.initialize();for(var i,r,s=this.getElementWidth(this.template),n=0;n<this.fontList.length;n++){if(i=this.fontList[n],r=this.getElementWidth(i),this.timeAttempted<4e3&&r===s)return this.timeAttempted+=e,!0;t.body.removeChild(i),this.fontList.splice(n--,1),this.timeAttempted=0}return 0!==this.fontList.length},fontList:[],addedList:{},add:function(e){this.initialized||this.initialize();var i="object"==typeof e?e.fontFace:e,r="object"==typeof e?e.url:e;if(!this.addedList[i]){var s=t.createElement("style");s.setAttribute("type","text/css"),s.innerHTML="@font-face{\n  font-family: '"+i+"';\n  src:  url('"+r+"');\n}\n",t.head.appendChild(s),this.addedList[i]=!0;var n=t.createElement("span");n.style.cssText="position: absolute; top: 0; left: 0; opacity: 0; pointer-events: none;",n.style.fontFamily='"'+i+'", "PjsEmptyFont", fantasy',n.innerHTML="AAAAAAAA",t.body.appendChild(n),this.fontList.push(n)}}},o.PFont=d;var m=this.Processing=function(a,h){if(!(this instanceof m))throw"called Processing constructor as if it were a function: missing 'new'.";var p,f=void 0===a&&void 0===h;if((p=f?t.createElement("canvas"):"string"==typeof a?t.getElementById(a):a)instanceof OffscreenCanvas)throw new TypeError("Processing does not support OffscreenCanvas");if(!(p instanceof HTMLCanvasElement))throw"called Processing constructor without passing canvas element reference or id.";function g(e){m.debug("Unimplemented - "+e)}var v=this;v.externals={canvas:p,context:void 0,sketch:void 0},v.name="Processing.js Instance",v.use3DContext=!1,v.focused=!1,v.breakShape=!1,v.glyphTable={},v.pmouseX=0,v.pmouseY=0,v.mouseX=0,v.mouseY=0,v.mouseButton=0,v.mouseScroll=0,v.mouseClicked=void 0,v.mouseDragged=void 0,v.mouseMoved=void 0,v.mousePressed=void 0,v.mouseReleased=void 0,v.mouseScrolled=void 0,v.mouseOver=void 0,v.mouseOut=void 0,v.touchStart=void 0,v.touchEnd=void 0,v.touchMove=void 0,v.touchCancel=void 0,v.key=void 0,v.keyCode=void 0,v.keyPressed=r,v.keyReleased=r,v.keyTyped=r,v.draw=void 0,v.setup=void 0,v.__mousePressed=!1,v.__keyPressed=!1,v.__frameRate=60,v.mouseIsPressed=!1,v.keyIsPressed=!1,v.frameCount=0,v.width=100,v.height=100,v.angleMode="radians";var y,x,b,w,E,_,S,A,C,k,T,P,R,I,L,N,D,O,M,F,V,B,G,U,H,z,K,j,W,q,X,Y,$=v.PVector=function(){function e(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function t(e){return function(t,i){var r=t.get();return r[e](i),r}}for(var r in e.fromAngle=function(t,i){return null==i&&(i=new e),i.x=v.cos(t),i.y=v.sin(t),i},e.random2D=function(t){return e.fromAngle(360*i.random(),t)},e.random3D=function(t){var r=360*i.random(),s=2*i.random()-1,n=i.sqrt(1-s*s),a=n*v.cos(r),o=n*v.sin(r);return null==t?t=new e(a,o,s):t.set(a,o,s),t},e.dist=function(e,t){return e.dist(t)},e.dot=function(e,t){return e.dot(t)},e.cross=function(e,t){return e.cross(t)},e.sub=function(t,i){return new e(t.x-i.x,t.y-i.y,t.z-i.z)},e.angleBetween=function(e,t){return v.acos(e.dot(t)/(e.mag()*t.mag()))},e.lerp=function(t,i,r){var s=new e(t.x,t.y,t.z);return s.lerp(i,r),s},e.prototype={set:function(e,t,i){1===arguments.length?this.set(e.x||e[0]||0,e.y||e[1]||0,e.z||e[2]||0):(this.x=e||0,this.y=t||0,this.z=i||0)},get:function(){return new e(this.x,this.y,this.z)},mag:function(){var e=this.x,t=this.y,r=this.z;return i.sqrt(e*e+t*t+r*r)},magSq:function(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},setMag:function(e,t){if(void 0!==t){var i=e;return i.normalize(),i.mult(t),i}t=e,this.normalize(),this.mult(t)},add:function(e,t,i){void 0===t&&void 0===i?(this.x+=e.x,this.y+=e.y,this.z+=e.z):(this.x+=e,this.y+=t,this.z+=i)},sub:function(e,t,i){void 0===t&&void 0===i?(this.x-=e.x,this.y-=e.y,this.z-=e.z):(this.x-=e,this.y-=t,this.z-=i)},mult:function(e){"number"==typeof e?(this.x*=e,this.y*=e,this.z*=e):(this.x*=e.x,this.y*=e.y,this.z*=e.z)},div:function(e){"number"==typeof e?(this.x/=e,this.y/=e,this.z/=e):(this.x/=e.x,this.y/=e.y,this.z/=e.z)},rotate:function(e){var t=this.x,i=v.cos(e),r=v.sin(e);this.x=i*this.x-r*this.y,this.y=r*t+i*this.y},dist:function(e){var t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return i.sqrt(t*t+r*r+s*s)},dot:function(e,t,i){return void 0===t&&void 0===i?this.x*e.x+this.y*e.y+this.z*e.z:this.x*e+this.y*t+this.z*i},cross:function(t){var i=this.x,r=this.y,s=this.z;return new e(r*t.z-t.y*s,s*t.x-t.z*i,i*t.y-t.x*r)},lerp:function(e,t,i,r){var s,n,a=function(e,t,i){return e+(t-e)*i};void 0===i&&void 0===r?(r=t,s=e.x,n=e.y,i=e.z):(s=e,n=t),this.x=a(this.x,s,r),this.y=a(this.y,n,r),this.z=a(this.z,i,r)},normalize:function(){var e=this.mag();e>0&&this.div(e)},limit:function(e){this.mag()>e&&(this.normalize(),this.mult(e))},heading:function(){return-v.atan2(-this.y,this.x)},heading2D:function(){return this.heading()},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}},e.prototype)e.prototype.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&"toString"!==r&&(e[r]=t(r));return e}(),Q=!0,Z=[1,1,1,1],J=4294967295,ee="rgba(255, 255, 255, 1)",te=!0,ie=!0,re=[0,0,0,1],se=4278190080,ne="rgba(0, 0, 0, 1)",ae=!0,oe=1,he=!1,le=!1,ce=!0,ue=0,pe=n.CORNER,fe=n.CENTER,de=0,me=0,ge=0,ve=n.NORMAL_MODE_AUTO,ye=60,xe=1e3/ye,be=p.style.cursor,we=n.POLYGON,Ee=0,_e=20,Se=!1,Ae=-3355444,Ce=20,ke=255,Te=255,Pe=255,Re=255,Ie=0,Le=0,Ne=n.RGB,De=null,Oe=null,Me=Date.now(),Fe=Me,Ve=0,Be={attributes:{},locations:{}},Ge={width:0,height:0},Ue=n.IMAGE,He=!1,ze=n.LEFT,Ke=n.BASELINE,je=n.MODEL,We="Arial",qe=12,Xe=9,Ye=2,$e=14,Qe=d.get(We,qe),Ze=null,Je=!1,et=1e3,tt=[],it=null,rt=[n.SHIFT,n.CONTROL,n.ALT,n.CAPSLK,n.PGUP,n.PGDN,n.END,n.HOME,n.LEFT,n.UP,n.RIGHT,n.DOWN,n.NUMLK,n.INSERT,n.F1,n.F2,n.F3,n.F4,n.F5,n.F6,n.F7,n.F8,n.F9,n.F10,n.F11,n.F12,n.META];t.defaultView&&t.defaultView.getComputedStyle&&(parseInt(t.defaultView.getComputedStyle(p,null).paddingLeft,10),parseInt(t.defaultView.getComputedStyle(p,null).paddingTop,10),parseInt(t.defaultView.getComputedStyle(p,null).borderLeftWidth,10),parseInt(t.defaultView.getComputedStyle(p,null).borderTopWidth,10));var st,nt,at,ot,ht,lt,ct,ut,pt,ft=0,dt=0,mt=0,gt=[],vt=[],yt=[],xt=new Float32Array(n.SINCOS_LENGTH),bt=new Float32Array(n.SINCOS_LENGTH),wt=!1,Et=i.PI/180*60,_t=v.width/2,St=v.height/2,At=St/i.tan(Et/2),Ct=At/10,kt=10*At,Tt=v.width/v.height,Pt=[],Rt=[],It=0,Lt=!1,Nt=!1,Dt=!0,Ot=n.CORNER,Mt=[],Ft=new Float32Array([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),Vt=new Float32Array([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]),Bt=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),Gt=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]),Ut=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),Ht="varying vec4 frontColor;attribute vec3 Vertex;attribute vec3 Normal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 color;uniform bool usingMat;uniform vec3 specular;uniform vec3 mat_emissive;uniform vec3 mat_ambient;uniform vec3 mat_specular;uniform float shininess;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform mat4 normalTransform;uniform int lightCount;uniform vec3 falloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light lights0;uniform Light lights1;uniform Light lights2;uniform Light lights3;uniform Light lights4;uniform Light lights5;uniform Light lights6;uniform Light lights7;Light getLight(int index){  if(index == 0) return lights0;  if(index == 1) return lights1;  if(index == 2) return lights2;  if(index == 3) return lights3;  if(index == 4) return lights4;  if(index == 5) return lights5;  if(index == 6) return lights6;  return lights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerfactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerfactor = pow( nDotVH, shininess );  }  col += light.color * nDotVP;  spec += specular * powerfactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerfactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0) {    powerfactor = 0.0;  }  else{    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerfactor;  vec3 VP = light.position - ecPos;   vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( falloff[0] + ( falloff[1] * d ) + ( falloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(/Windows/.test(navigator.userAgent)?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerfactor = 0.0;  }  else {    powerfactor = pow( nDotHV, shininess );  }  spec += specular * powerfactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0, 0.0, 0.0 );  vec3 finalDiffuse = vec3( 0.0, 0.0, 0.0 );  vec3 finalSpecular = vec3( 0.0, 0.0, 0.0 );  vec4 col = color;  if(color[0] == -1.0){    col = aColor;  }  vec3 norm = normalize(vec3( normalTransform * vec4( Normal, 0.0 ) ));  vec4 ecPos4 = view * model * vec4(Vertex,1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  if( lightCount == 0 ) {    frontColor = col + vec4(mat_specular,1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= lightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }    }   if( usingMat == false ) {     frontColor = vec4(       vec3(col) * finalAmbient +       vec3(col) * finalDiffuse +       vec3(col) * finalSpecular,       col[3] );   }   else{     frontColor = vec4(        mat_emissive +        (vec3(col) * mat_ambient * finalAmbient) +        (vec3(col) * finalDiffuse) +        (mat_specular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = projection * view * model * vec4( Vertex, 1.0 );}";function zt(e,t,i,r){var s=Be.locations[e];void 0===s&&(s=y.getUniformLocation(t,i),Be.locations[e]=s),null!==s&&(4===r.length?y.uniform4fv(s,r):3===r.length?y.uniform3fv(s,r):2===r.length?y.uniform2fv(s,r):y.uniform1f(s,r))}function Kt(e,t,i,r){var s=Be.locations[e];void 0===s&&(s=y.getUniformLocation(t,i),Be.locations[e]=s),null!==s&&(4===r.length?y.uniform4iv(s,r):3===r.length?y.uniform3iv(s,r):2===r.length?y.uniform2iv(s,r):y.uniform1i(s,r))}function jt(e,t,i,r,s){var n=Be.locations[e];void 0===n&&(n=y.getUniformLocation(t,i),Be.locations[e]=n),-1!==n&&(16===s.length?y.uniformMatrix4fv(n,r,s):9===s.length?y.uniformMatrix3fv(n,r,s):y.uniformMatrix2fv(n,r,s))}function Wt(e,t,i,r,s){var n=Be.attributes[e];void 0===n&&(n=y.getAttribLocation(t,i),Be.attributes[e]=n),-1!==n&&(y.bindBuffer(y.ARRAY_BUFFER,s),y.vertexAttribPointer(n,r,y.FLOAT,!1,0,0),y.enableVertexAttribArray(n))}function qt(e,t,i){var r=Be.attributes[e];void 0===r&&(r=y.getAttribLocation(t,i),Be.attributes[e]=r),-1!==r&&y.disableVertexAttribArray(r)}var Xt=function(e,t,i){var r=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw e.getShaderInfoLog(r);var s=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(s,i),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw e.getShaderInfoLog(s);var n=e.createProgram();if(e.attachShader(n,r),e.attachShader(n,s),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw"Error linking shaders.";return n},Yt=function(e,t,i,r,s){return{x:e,y:t,w:i,h:r}},$t=Yt,Qt=function(e,t,i,r,s){return{x:e,y:t,w:s?i:i-e,h:s?r:r-t}},Zt=function(e,t,i,r,s){return{x:e-i/2,y:t-r/2,w:i,h:r}},Jt=function(){},ei=function(){},ti=function(){},ii=function(){};(ei.prototype=new Jt).constructor=ei,(ti.prototype=new Jt).constructor=ti,(ii.prototype=new Jt).constructor=ii,Jt.prototype.a3DOnlyFunction=r;var ri={},si=v.Character=function(e){return"string"==typeof e&&1===e.length?this.code=e.charCodeAt(0):this.code="number"==typeof e||e instanceof si?e:NaN,void 0===ri[this.code]?ri[this.code]=this:ri[this.code]};si.prototype.toString=function(){return String.fromCharCode(this.code)},si.prototype.valueOf=function(){return this.code};var ni=v.PShape=function(e){this.family=e||n.GROUP,this.visible=!0,this.style=!0,this.children=[],this.nameTable=[],this.params=[],this.name="",this.image=null,this.matrix=null,this.kind=null,this.close=null,this.width=null,this.height=null,this.parent=null};ni.prototype={isVisible:function(){return this.visible},setVisible:function(e){this.visible=e},disableStyle:function(){this.style=!1;for(var e=0,t=this.children.length;e<t;e++)this.children[e].disableStyle()},enableStyle:function(){this.style=!0;for(var e=0,t=this.children.length;e<t;e++)this.children[e].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(e){this.name=e},getName:function(){return this.name},draw:function(){this.visible&&(this.pre(),this.drawImpl(),this.post())},drawImpl:function(){this.family===n.GROUP?this.drawGroup():this.family===n.PRIMITIVE?this.drawPrimitive():this.family===n.GEOMETRY?this.drawGeometry():this.family===n.PATH&&this.drawPath()},drawPath:function(){var e,t;if(0!==this.vertices.length){if(v.beginShape(),0===this.vertexCodes.length)if(2===this.vertices[0].length)for(e=0,t=this.vertices.length;e<t;e++)v.vertex(this.vertices[e][0],this.vertices[e][1]);else for(e=0,t=this.vertices.length;e<t;e++)v.vertex(this.vertices[e][0],this.vertices[e][1],this.vertices[e][2]);else{var i=0;if(2===this.vertices[0].length)for(e=0,t=this.vertexCodes.length;e<t;e++)this.vertexCodes[e]===n.VERTEX?(v.vertex(this.vertices[i][0],this.vertices[i][1]),!0===this.vertices[i].moveTo?Pt[Pt.length-1].moveTo=!0:!1===this.vertices[i].moveTo&&(Pt[Pt.length-1].moveTo=!1),v.breakShape=!1,i++):this.vertexCodes[e]===n.BEZIER_VERTEX?(v.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+2][0],this.vertices[i+2][1]),i+=3):this.vertexCodes[e]===n.CURVE_VERTEX?(v.curveVertex(this.vertices[i][0],this.vertices[i][1]),i++):this.vertexCodes[e]===n.BREAK&&(v.breakShape=!0);else for(e=0,t=this.vertexCodes.length;e<t;e++)this.vertexCodes[e]===n.VERTEX?(v.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),!0===this.vertices[i].moveTo?Pt[Pt.length-1].moveTo=!0:!1===this.vertices[i].moveTo&&(Pt[Pt.length-1].moveTo=!1),v.breakShape=!1):this.vertexCodes[e]===n.BEZIER_VERTEX?(v.bezierVertex(this.vertices[i+0][0],this.vertices[i+0][1],this.vertices[i+0][2],this.vertices[i+1][0],this.vertices[i+1][1],this.vertices[i+1][2],this.vertices[i+2][0],this.vertices[i+2][1],this.vertices[i+2][2]),i+=3):this.vertexCodes[e]===n.CURVE_VERTEX?(v.curveVertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]),i++):this.vertexCodes[e]===n.BREAK&&(v.breakShape=!0)}v.endShape(this.close?n.CLOSE:n.OPEN)}},drawGeometry:function(){var e,t;if(v.beginShape(this.kind),this.style)for(e=0,t=this.vertices.length;e<t;e++)v.vertex(this.vertices[e]);else for(e=0,t=this.vertices.length;e<t;e++){var i=this.vertices[e];0===i[2]?v.vertex(i[0],i[1]):v.vertex(i[0],i[1],i[2])}v.endShape()},drawGroup:function(){for(var e=0,t=this.children.length;e<t;e++)this.children[e].draw()},drawPrimitive:function(){this.kind===n.POINT?v.point(this.params[0],this.params[1]):this.kind===n.LINE?4===this.params.length?v.line(this.params[0],this.params[1],this.params[2],this.params[3]):v.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]):this.kind===n.TRIANGLE?v.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]):this.kind===n.QUAD?v.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]):this.kind===n.RECT?null!==this.image?(v.imageMode(n.CORNER),v.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3])):(v.rectMode(n.CORNER),v.rect(this.params[0],this.params[1],this.params[2],this.params[3])):this.kind===n.ELLIPSE?(v.ellipseMode(n.CORNER),v.ellipse(this.params[0],this.params[1],this.params[2],this.params[3])):this.kind===n.ARC?(v.ellipseMode(n.CORNER),v.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])):this.kind===n.BOX?1===this.params.length?v.box(this.params[0]):v.box(this.params[0],this.params[1],this.params[2]):this.kind===n.SPHERE&&v.sphere(this.params[0])},pre:function(){this.matrix&&(v.pushMatrix(),y.transform(this.matrix.elements[0],this.matrix.elements[3],this.matrix.elements[1],this.matrix.elements[4],this.matrix.elements[2],this.matrix.elements[5])),this.style&&(v.pushStyle(),this.styles())},post:function(){this.matrix&&v.popMatrix(),this.style&&v.popStyle()},styles:function(){this.stroke?(v.stroke(this.strokeColor),v.strokeWeight(this.strokeWeight),v.strokeCap(this.strokeCap),v.strokeJoin(this.strokeJoin)):v.noStroke(),this.fill?v.fill(this.fillColor):v.noFill()},getChild:function(e){var t,i,r;if("number"==typeof e)return this.children[e];if(""===e||this.name===e)return this;if(this.nameTable.length>0){for(t=0,i=this.nameTable.length;t<i||r;t++)if(this.nameTable[t].getName===e){r=this.nameTable[t];break}if(r)return r}for(t=0,i=this.children.length;t<i;t++)if(r=this.children[t].getChild(e))return r;return null},getChildCount:function(){return this.children.length},addChild:function(e){this.children.push(e),e.parent=this,null!==e.getName()&&this.addName(e.getName(),e)},addName:function(e,t){null!==this.parent?this.parent.addName(e,t):this.nameTable.push([e,t])},translate:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.translate(arguments[0],arguments[1])):(this.checkMatrix(3),this.matrix.translate(arguments[0],arguments[1],0))},checkMatrix:function(e){null===this.matrix?this.matrix=2===e?new v.PMatrix2D:new v.PMatrix3D:3===e&&this.matrix instanceof v.PMatrix2D&&(this.matrix=new v.PMatrix3D)},rotateX:function(e){this.rotate(e,1,0,0)},rotateY:function(e){this.rotate(e,0,1,0)},rotateZ:function(e){this.rotate(e,0,0,1)},rotate:function(){1===arguments.length?(this.checkMatrix(2),this.matrix.rotate(arguments[0])):(this.checkMatrix(3),this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3]))},scale:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1])):3===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1],arguments[2])):(this.checkMatrix(2),this.matrix.scale(arguments[0]))},resetMatrix:function(){this.checkMatrix(2),this.matrix.reset()},applyMatrix:function(e){1===arguments.length?this.applyMatrix(e.elements[0],e.elements[1],0,e.elements[2],e.elements[3],e.elements[4],0,e.elements[5],0,0,1,0,0,0,0,1):6===arguments.length?(this.checkMatrix(2),this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)):16===arguments.length&&(this.checkMatrix(3),this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]))}};var ai=v.PShapeSVG=function(){if(v.PShape.call(this),1===arguments.length){if(this.element=arguments[0],this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=n.ALPHA_MASK,this.strokeWeight=1,this.strokeCap=n.SQUARE,this.strokeJoin=n.MITER,this.strokeGradient=null,this.strokeGradientPaint=null,this.strokeName=null,this.strokeOpacity=1,this.fill=!0,this.fillColor=n.ALPHA_MASK,this.fillGradient=null,this.fillGradientPaint=null,this.fillName=null,this.fillOpacity=1,"svg"!==this.element.getName())throw"root is not <svg>, it's <"+this.element.getName()+">"}else 2===arguments.length&&("string"==typeof arguments[1]?arguments[1].indexOf(".svg")>-1&&(this.element=new v.XMLElement(null,arguments[1]),this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=n.ALPHA_MASK,this.strokeWeight=1,this.strokeCap=n.SQUARE,this.strokeJoin=n.MITER,this.strokeGradient="",this.strokeGradientPaint="",this.strokeName="",this.strokeOpacity=1,this.fill=!0,this.fillColor=n.ALPHA_MASK,this.fillGradient=null,this.fillGradientPaint=null,this.fillOpacity=1):arguments[0]&&(this.element=arguments[1],this.vertexCodes=arguments[0].vertexCodes.slice(),this.vertices=arguments[0].vertices.slice(),this.stroke=arguments[0].stroke,this.strokeColor=arguments[0].strokeColor,this.strokeWeight=arguments[0].strokeWeight,this.strokeCap=arguments[0].strokeCap,this.strokeJoin=arguments[0].strokeJoin,this.strokeGradient=arguments[0].strokeGradient,this.strokeGradientPaint=arguments[0].strokeGradientPaint,this.strokeName=arguments[0].strokeName,this.fill=arguments[0].fill,this.fillColor=arguments[0].fillColor,this.fillGradient=arguments[0].fillGradient,this.fillGradientPaint=arguments[0].fillGradientPaint,this.fillName=arguments[0].fillName,this.strokeOpacity=arguments[0].strokeOpacity,this.fillOpacity=arguments[0].fillOpacity,this.opacity=arguments[0].opacity));this.name=this.element.getStringAttribute("id");var e=this.element.getStringAttribute("display","inline");this.visible="none"!==e;var t=this.element.getAttribute("transform");t&&(this.matrix=this.parseMatrix(t));var i=this.element.getStringAttribute("viewBox");if(null!==i){var r=i.split(" ");this.width=r[2],this.height=r[3]}var s=this.element.getStringAttribute("width"),a=this.element.getStringAttribute("height");if(null!==s)this.width=this.parseUnitSize(s),this.height=this.parseUnitSize(a);else if(0===this.width||0===this.height)throw this.width=1,this.height=1,"The width and/or height is not readable in the <svg> tag of this file.";this.parseColors(this.element),this.parseChildren(this.element)};ai.prototype=new ni,ai.prototype.parseMatrix=function(){function e(e){var t=[];return e.replace(/\((.*?)\)/,(function(e,i){t=i.replace(/,+/g," ").split(/\s+/)})),t}return function(t){this.checkMatrix(2);var i=[];if(t.replace(/\s*(\w+)\((.*?)\)/g,(function(e){i.push(v.trim(e))})),0===i.length)return null;for(var r=0,s=i.length;r<s;r++){var n=e(i[r]);if(-1!==i[r].indexOf("matrix"))this.matrix.set(n[0],n[2],n[4],n[1],n[3],n[5]);else if(-1!==i[r].indexOf("translate")){var a=n[0],o=2===n.length?n[1]:0;this.matrix.translate(a,o)}else if(-1!==i[r].indexOf("scale")){var h=n[0],l=2===n.length?n[1]:n[0];this.matrix.scale(h,l)}else if(-1!==i[r].indexOf("rotate")){var c=n[0];1===n.length?this.matrix.rotate("degrees"===v.angleMode?c:v.radians(c)):3===n.length&&(this.matrix.translate(n[1],n[2]),this.matrix.rotate("degrees"===v.angleMode?n[0]:v.radians(n[0])),this.matrix.translate(-n[1],-n[2]))}else-1!==i[r].indexOf("skewX")?this.matrix.skewX(parseFloat(n[0])):-1!==i[r].indexOf("skewY")&&this.matrix.skewY(n[0])}return this.matrix}}(),ai.prototype.parseChildren=function(e){for(var t=e.getChildren(),i=new v.PShape,r=0,s=t.length;r<s;r++){var n=this.parseChild(t[r]);n&&i.addChild(n)}this.children.push(i)},ai.prototype.getName=function(){return this.name},ai.prototype.parseChild=function(e){var t,i=e.getName();return"g"===i||"defs"===i?t=new ai(this,e):"line"===i?(t=new ai(this,e)).parseLine():"circle"===i?(t=new ai(this,e)).parseEllipse(!0):"ellipse"===i?(t=new ai(this,e)).parseEllipse(!1):"rect"===i?(t=new ai(this,e)).parseRect():"polygon"===i?(t=new ai(this,e)).parsePoly(!0):"polyline"===i?(t=new ai(this,e)).parsePoly(!1):"path"===i?(t=new ai(this,e)).parsePath():"radialGradient"===i?g("PShapeSVG.prototype.parseChild, name = radialGradient"):"linearGradient"===i?g("PShapeSVG.prototype.parseChild, name = linearGradient"):"text"===i?g("PShapeSVG.prototype.parseChild, name = text"):"filter"===i?g("PShapeSVG.prototype.parseChild, name = filter"):"mask"===i&&g("PShapeSVG.prototype.parseChild, name = mask"),t},ai.prototype.parsePath=function(){this.family=n.PATH,this.kind=0;var e=v.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(null!==e){e=v.__toCharArray(e);for(var t,i,r,s,a=0,o=0,h=0,l=0,c=0,u=0,p=0,f=0,d=0,m=0,g=0,y=0,x=0,b=0,w=0,E=0,_="",S=[],A=!1;w<e.length;)if((E=e[w].valueOf())>=65&&E<=90||E>=97&&E<=122){if(r=w,++w<e.length)for(S=[],E=e[w].valueOf();!(E>=65&&E<=90||E>=97&&E<=100||E>=102&&E<=122)&&!1===A;)32===E?(""!==_&&(S.push(parseFloat(_)),_=""),w++):45===E?101===e[w-1].valueOf()?(_+=e[w].toString(),w++):(""!==_&&S.push(parseFloat(_)),_=e[w].toString(),w++):(_+=e[w].toString(),w++),w===e.length?A=!0:E=e[w].valueOf();if(""!==_&&(S.push(parseFloat(_)),_=""),77===(E=(i=e[r]).valueOf())){if(S.length>=2&&S.length%2==0&&(a=S[0],o=S[1],this.parsePathMoveto(a,o),S.length>2))for(r=2,s=S.length;r<s;r+=2)a=S[r],o=S[r+1],this.parsePathLineto(a,o)}else if(109===E){if(S.length>=2&&S.length%2==0&&(a+=S[0],o+=S[1],this.parsePathMoveto(a,o),S.length>2))for(r=2,s=S.length;r<s;r+=2)a+=S[r],o+=S[r+1],this.parsePathLineto(a,o)}else if(76===E){if(S.length>=2&&S.length%2==0)for(r=0,s=S.length;r<s;r+=2)a=S[r],o=S[r+1],this.parsePathLineto(a,o)}else if(108===E){if(S.length>=2&&S.length%2==0)for(r=0,s=S.length;r<s;r+=2)a+=S[r],o+=S[r+1],this.parsePathLineto(a,o)}else if(72===E)for(r=0,s=S.length;r<s;r++)a=S[r],this.parsePathLineto(a,o);else if(104===E)for(r=0,s=S.length;r<s;r++)a+=S[r],this.parsePathLineto(a,o);else if(86===E)for(r=0,s=S.length;r<s;r++)o=S[r],this.parsePathLineto(a,o);else if(118===E)for(r=0,s=S.length;r<s;r++)o+=S[r],this.parsePathLineto(a,o);else if(67===E){if(S.length>=6&&S.length%6==0)for(r=0,s=S.length;r<s;r+=6)c=S[r],p=S[r+1],u=S[r+2],f=S[r+3],d=S[r+4],m=S[r+5],this.parsePathCurveto(c,p,u,f,d,m),a=d,o=m}else if(99===E){if(S.length>=6&&S.length%6==0)for(r=0,s=S.length;r<s;r+=6)c=a+S[r],p=o+S[r+1],u=a+S[r+2],f=o+S[r+3],d=a+S[r+4],m=o+S[r+5],this.parsePathCurveto(c,p,u,f,d,m),a=d,o=m}else if(83===E){if(S.length>=4&&S.length%4==0)for(r=0,s=S.length;r<s;r+=4)"c"===t.toLowerCase()||"s"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],y=this.vertices[this.vertices.length-2][1],c=(x=this.vertices[this.vertices.length-1][0])+(x-g),p=(b=this.vertices[this.vertices.length-1][1])+(b-y)):(c=this.vertices[this.vertices.length-1][0],p=this.vertices[this.vertices.length-1][1]),u=S[r],f=S[r+1],d=S[r+2],m=S[r+3],this.parsePathCurveto(c,p,u,f,d,m),a=d,o=m}else if(115===E){if(S.length>=4&&S.length%4==0)for(r=0,s=S.length;r<s;r+=4)"c"===t.toLowerCase()||"s"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],y=this.vertices[this.vertices.length-2][1],c=(x=this.vertices[this.vertices.length-1][0])+(x-g),p=(b=this.vertices[this.vertices.length-1][1])+(b-y)):(c=this.vertices[this.vertices.length-1][0],p=this.vertices[this.vertices.length-1][1]),u=a+S[r],f=o+S[r+1],d=a+S[r+2],m=o+S[r+3],this.parsePathCurveto(c,p,u,f,d,m),a=d,o=m}else if(81===E){if(S.length>=4&&S.length%4==0)for(r=0,s=S.length;r<s;r+=4)h=S[r],l=S[r+1],d=S[r+2],m=S[r+3],this.parsePathQuadto(a,o,h,l,d,m),a=d,o=m}else if(113===E){if(S.length>=4&&S.length%4==0)for(r=0,s=S.length;r<s;r+=4)h=a+S[r],l=o+S[r+1],d=a+S[r+2],m=o+S[r+3],this.parsePathQuadto(a,o,h,l,d,m),a=d,o=m}else if(84===E){if(S.length>=2&&S.length%2==0)for(r=0,s=S.length;r<s;r+=2)"q"===t.toLowerCase()||"t"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],y=this.vertices[this.vertices.length-2][1],h=(x=this.vertices[this.vertices.length-1][0])+(x-g),l=(b=this.vertices[this.vertices.length-1][1])+(b-y)):(h=a,l=o),d=S[r],m=S[r+1],this.parsePathQuadto(a,o,h,l,d,m),a=d,o=m}else if(116===E){if(S.length>=2&&S.length%2==0)for(r=0,s=S.length;r<s;r+=2)"q"===t.toLowerCase()||"t"===t.toLowerCase()?(g=this.vertices[this.vertices.length-2][0],y=this.vertices[this.vertices.length-2][1],h=(x=this.vertices[this.vertices.length-1][0])+(x-g),l=(b=this.vertices[this.vertices.length-1][1])+(b-y)):(h=a,l=o),d=a+S[r],m=o+S[r+1],this.parsePathQuadto(a,o,h,l,d,m),a=d,o=m}else 90!==E&&122!==E||(this.close=!0);t=i.toString()}else w++}},ai.prototype.parsePathQuadto=function(e,t,i,r,s,a){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.BEZIER_VERTEX),this.parsePathVertex(e+2*(i-e)/3,t+2*(r-t)/3),this.parsePathVertex(s+2*(i-s)/3,a+2*(r-a)/3),this.parsePathVertex(s,a)},ai.prototype.parsePathCurveto=function(e,t,i,r,s,a){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.BEZIER_VERTEX),this.parsePathVertex(e,t),this.parsePathVertex(i,r),this.parsePathVertex(s,a)},ai.prototype.parsePathLineto=function(e,t){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(n.VERTEX),this.parsePathVertex(e,t),this.vertices[this.vertices.length-1].moveTo=!1},ai.prototype.parsePathMoveto=function(e,t){this.vertices.length>0&&this.parsePathCode(n.BREAK),this.parsePathCode(n.VERTEX),this.parsePathVertex(e,t),this.vertices[this.vertices.length-1].moveTo=!0},ai.prototype.parsePathVertex=function(e,t){var i=[];i[0]=e,i[1]=t,this.vertices.push(i)},ai.prototype.parsePathCode=function(e){this.vertexCodes.push(e)},ai.prototype.parsePoly=function(e){this.family=n.PATH,this.close=e;var t=v.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(null!==t){var i=t.split(" ");if(i.length%2!=0)throw"Error parsing polygon points: odd number of coordinates provided";for(var r=0,s=i.length;r<s;r++){var a=[];a[0]=i[r],a[1]=i[++r],this.vertices.push(a)}}},ai.prototype.parseRect=function(){if(this.kind=n.RECT,this.family=n.PRIMITIVE,this.params=[],this.params[0]=this.element.getFloatAttribute("x"),this.params[1]=this.element.getFloatAttribute("y"),this.params[2]=this.element.getFloatAttribute("width"),this.params[3]=this.element.getFloatAttribute("height"),this.params[2]<0||this.params[3]<0)throw"svg error: negative width or height found while parsing <rect>"},ai.prototype.parseEllipse=function(e){var t,i;if(this.kind=n.ELLIPSE,this.family=n.PRIMITIVE,this.params=[],this.params[0]=0|this.element.getFloatAttribute("cx"),this.params[1]=0|this.element.getFloatAttribute("cy"),e){if((t=i=this.element.getFloatAttribute("r"))<0)throw"svg error: negative radius found while parsing <circle>"}else if(t=this.element.getFloatAttribute("rx"),i=this.element.getFloatAttribute("ry"),t<0||i<0)throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>";this.params[0]-=t,this.params[1]-=i,this.params[2]=2*t,this.params[3]=2*i},ai.prototype.parseLine=function(){this.kind=n.LINE,this.family=n.PRIMITIVE,this.params=[],this.params[0]=this.element.getFloatAttribute("x1"),this.params[1]=this.element.getFloatAttribute("y1"),this.params[2]=this.element.getFloatAttribute("x2"),this.params[3]=this.element.getFloatAttribute("y2")},ai.prototype.parseColors=function(e){if(e.hasAttribute("opacity")&&this.setOpacity(e.getAttribute("opacity")),e.hasAttribute("stroke")&&this.setStroke(e.getAttribute("stroke")),e.hasAttribute("stroke-width")&&this.setStrokeWeight(e.getAttribute("stroke-width")),e.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(e.getAttribute("stroke-linejoin")),e.hasAttribute("stroke-linecap")&&this.setStrokeCap(e.getStringAttribute("stroke-linecap")),e.hasAttribute("fill")&&this.setFill(e.getStringAttribute("fill")),e.hasAttribute("style"))for(var t=e.getStringAttribute("style").toString().split(";"),i=0,r=t.length;i<r;i++){var s=v.trim(t[i].split(":"));"fill"===s[0]?this.setFill(s[1]):"fill-opacity"===s[0]?this.setFillOpacity(s[1]):"stroke"===s[0]?this.setStroke(s[1]):"stroke-width"===s[0]?this.setStrokeWeight(s[1]):"stroke-linecap"===s[0]?this.setStrokeCap(s[1]):"stroke-linejoin"===s[0]?this.setStrokeJoin(s[1]):"stroke-opacity"===s[0]?this.setStrokeOpacity(s[1]):"opacity"===s[0]&&this.setOpacity(s[1])}},ai.prototype.setFillOpacity=function(e){this.fillOpacity=parseFloat(e),this.fillColor=255*this.fillOpacity<<24|16777215&this.fillColor},ai.prototype.setFill=function(e){var t=4278190080&this.fillColor;"none"===e?this.fill=!1:0===e.indexOf("#")?(this.fill=!0,4===e.length&&(e=e.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.fillColor=t|16777215&parseInt(e.substring(1),16)):0===e.indexOf("rgb")?(this.fill=!0,this.fillColor=t|this.parseRGB(e)):0===e.indexOf("url(#")?this.fillName=e.substring(5,e.length-1):l[e]&&(this.fill=!0,this.fillColor=t|16777215&parseInt(l[e].substring(1),16))},ai.prototype.setOpacity=function(e){this.strokeColor=255*parseFloat(e)<<24|16777215&this.strokeColor,this.fillColor=255*parseFloat(e)<<24|16777215&this.fillColor},ai.prototype.setStroke=function(e){var t=4278190080&this.strokeColor;"none"===e?this.stroke=!1:"#"===e.charAt(0)?(this.stroke=!0,4===e.length&&(e=e.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.strokeColor=t|16777215&parseInt(e.substring(1),16)):0===e.indexOf("rgb")?(this.stroke=!0,this.strokeColor=t|this.parseRGB(e)):0===e.indexOf("url(#")?this.strokeName=e.substring(5,e.length-1):l[e]&&(this.stroke=!0,this.strokeColor=t|16777215&parseInt(l[e].substring(1),16))},ai.prototype.setStrokeWeight=function(e){this.strokeWeight=this.parseUnitSize(e)},ai.prototype.setStrokeJoin=function(e){"miter"===e?this.strokeJoin=n.MITER:"round"===e?this.strokeJoin=n.ROUND:"bevel"===e&&(this.strokeJoin=n.BEVEL)},ai.prototype.setStrokeCap=function(e){"butt"===e?this.strokeCap=n.SQUARE:"round"===e?this.strokeCap=n.ROUND:"square"===e&&(this.strokeCap=n.PROJECT)},ai.prototype.setStrokeOpacity=function(e){this.strokeOpacity=parseFloat(e),this.strokeColor=255*this.strokeOpacity<<24|16777215&this.strokeColor},ai.prototype.parseRGB=function(e){var t=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(", ");return t[0]<<16|t[1]<<8|t[2]},ai.prototype.parseUnitSize=function(e){var t=e.length-2;return t<0?e:e.indexOf("pt")===t?1.25*parseFloat(e.substring(0,t)):e.indexOf("pc")===t?15*parseFloat(e.substring(0,t)):e.indexOf("mm")===t?3.543307*parseFloat(e.substring(0,t)):e.indexOf("cm")===t?35.43307*parseFloat(e.substring(0,t)):e.indexOf("in")===t?90*parseFloat(e.substring(0,t)):e.indexOf("px")===t?parseFloat(e.substring(0,t)):parseFloat(e)},v.shape=function(e,t,i,r,s){arguments.length>=1&&null!==arguments[0]&&e.isVisible()&&(v.pushMatrix(),Ot===n.CENTER?5===arguments.length?(v.translate(t-r/2,i-s/2),v.scale(r/e.getWidth(),s/e.getHeight())):3===arguments.length?v.translate(t-e.getWidth()/2,-e.getHeight()/2):v.translate(-e.getWidth()/2,-e.getHeight()/2):Ot===n.CORNER?5===arguments.length?(v.translate(t,i),v.scale(r/e.getWidth(),s/e.getHeight())):3===arguments.length&&v.translate(t,i):Ot===n.CORNERS&&(5===arguments.length?(r-=t,s-=i,v.translate(t,i),v.scale(r/e.getWidth(),s/e.getHeight())):3===arguments.length&&v.translate(t,i)),e.draw(),(1===arguments.length&&Ot===n.CENTER||arguments.length>1)&&v.popMatrix())},v.shapeMode=function(e){Ot=e},v.loadShape=function(e){return 1===arguments.length&&e.indexOf(".svg")>-1?new ai(null,e):null};var oi=function(e,t,i,r,s){this.fullName=e||"",this.name=t||"",this.namespace=i||"",this.value=r,this.type=s};oi.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(e){this.value=e}};var hi=v.XMLElement=function(){if(this.attributes=[],this.children=[],this.fullName=null,this.name=null,this.namespace="",this.content=null,this.parent=null,this.lineNr="",this.systemID="",this.type="ELEMENT",4===arguments.length){if(this.fullName=arguments[0]||"",arguments[1])this.name=arguments[1];else{var e=this.fullName.indexOf(":");this.name=e>=0?this.fullName.substring(e+1):this.fullName}this.namespace=arguments[1],this.lineNr=arguments[3],this.systemID=arguments[2]}else 2===arguments.length&&arguments[1].indexOf(".")>-1?this.parse(arguments[arguments.length-1]):1===arguments.length&&"string"==typeof arguments[0]&&this.parse(arguments[0])};hi.prototype={parse:function(e){try{var t=e.substring(e.length-4);".xml"!==t&&".svg"!==t||(e=s(e));var i=(new DOMParser).parseFromString(e,"text/xml").documentElement;if(!i)throw"Error loading document";return this.parseChildrenRecursive(null,i),this}catch(e){throw e}},parseChildrenRecursive:function(e,t){var i,r,s,n,a,o;if(e?(i=new hi(t.localName,t.nodeName,"","")).parent=e:(this.fullName=t.localName,this.name=t.nodeName,i=this),3===t.nodeType&&""!==t.textContent)return this.createPCDataElement(t.textContent);for(n=0,a=t.attributes.length;n<a;n++)s=t.attributes[n],r=new oi(s.getname,s.nodeName,s.namespaceURI,s.nodeValue,s.nodeType),i.attributes.push(r);for(n=0,a=t.childNodes.length;n<a;n++){var h=t.childNodes[n];1!==h.nodeType&&3!==h.nodeType||null!==(o=i.parseChildrenRecursive(i,h))&&i.children.push(o)}return i},createElement:function(){return 2===arguments.length?new hi(arguments[0],arguments[1],null,null):new hi(arguments[0],arguments[1],arguments[2],arguments[3])},createPCDataElement:function(e){if(""===e.replace(/^\s+$/g,""))return null;var t=new hi;return t.content=e,t.type="TEXT",t},hasAttribute:function(){return 1===arguments.length?null!==this.getAttribute(arguments[0]):2===arguments.length?null!==this.getAttribute(arguments[0],arguments[1]):void 0},equals:function(e){if(!(e instanceof hi))return!1;var t,i,r,s,n;if(this.name!==e.getLocalName())return!1;if(this.attributes.length!==e.getAttributeCount())return!1;if(this.attributes.length!==e.attributes.length)return!1;for(t=0,i=this.attributes.length;t<i;t++){if(r=this.attributes[t].getName(),s=this.attributes[t].getNamespace(),null===(n=e.findAttribute(r,s)))return!1;if(this.attributes[t].getValue()!==n.getValue())return!1;if(this.attributes[t].getType()!==n.getType())return!1}if(this.children.length!==e.getChildCount())return!1;if(this.children.length>0){var a,o;for(t=0,i=this.children.length;t<i;t++)if(a=this.getChild(t),o=e.getChild(t),!a.equals(o))return!1;return!0}return this.content===e.content},getContent:function(){if("TEXT"===this.type)return this.content;var e=this.children;return 1===e.length&&"TEXT"===e[0].type?e[0].content:null},getAttribute:function(){var e;return 2===arguments.length?(e=this.findAttribute(arguments[0]))?e.getValue():arguments[1]:1===arguments.length?(e=this.findAttribute(arguments[0]))?e.getValue():null:3===arguments.length?(e=this.findAttribute(arguments[0],arguments[1]))?e.getValue():arguments[2]:void 0},getStringAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0]):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(e){return this.getStringAttribute(e)},getFloatAttribute:function(){return 1===arguments.length?parseFloat(this.getAttribute(arguments[0],0)):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(e){return this.getFloatAttribute(e)},getIntAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0],0):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(e){return this.getIntAttribute(e)},hasChildren:function(){return this.children.length>0},addChild:function(e){null!==e&&(e.parent=this,this.children.push(e))},insertChild:function(e,t){if(e){if(null===e.getLocalName()&&!this.hasChildren()){var i=this.children[this.children.length-1];if(null===i.getLocalName())return void i.setContent(i.getContent()+e.getContent())}e.parent=this,this.children.splice(t,0,e)}},getChild:function(){if("number"==typeof arguments[0])return this.children[arguments[0]];if(-1!==arguments[0].indexOf("/"))return this.getChildRecursive(arguments[0].split("/"),0),null;for(var e,t,i=0,r=this.getChildCount();i<r;i++)if(null!==(t=(e=this.getChild(i)).getName())&&t===arguments[0])return e;return null},getChildren:function(){if(1===arguments.length){if("number"==typeof arguments[0])return this.getChild(arguments[0]);if(-1!==arguments[0].indexOf("/"))return this.getChildrenRecursive(arguments[0].split("/"),0);for(var e,t,i=[],r=0,s=this.getChildCount();r<s;r++)null!==(t=(e=this.getChild(r)).getName())&&t===arguments[0]&&i.push(e);return i}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(e,t){for(var i,r,s=0,n=this.getChildCount();s<n;s++)if(null!==(r=(i=this.getChild(s)).getName())&&r===e[t])return t===e.length-1?i:(t+=1,i.getChildRecursive(e,t));return null},getChildrenRecursive:function(e,t){if(t===e.length-1)return this.getChildren(e[t]);for(var i=this.getChildren(e[t]),r=[],s=0;s<i.length;s++)r=r.concat(i[s].getChildrenRecursive(e,t+1));return r},isLeaf:function(){return!this.hasChildren()},listChildren:function(){for(var e=[],t=0,i=this.children.length;t<i;t++)e.push(this.getChild(t).getName());return e},removeAttribute:function(e,t){this.namespace=t||"";for(var i=0,r=this.attributes.length;i<r;i++)if(this.attributes[i].getName()===e&&this.attributes[i].getNamespace()===this.namespace){this.attributes.splice(i,1);break}},removeChild:function(e){if(e)for(var t=0,i=this.children.length;t<i;t++)if(this.children[t].equals(e)){this.children.splice(t,1);break}},removeChildAtIndex:function(e){this.children.length>e&&this.children.splice(e,1)},findAttribute:function(e,t){this.namespace=t||"";for(var i=0,r=this.attributes.length;i<r;i++)if(this.attributes[i].getName()===e&&this.attributes[i].getNamespace()===this.namespace)return this.attributes[i];return null},setAttribute:function(){var e;if(3===arguments.length){var t=arguments[0].indexOf(":"),i=arguments[0].substring(t+1);(e=this.findAttribute(i,arguments[1]))?e.setValue(arguments[2]):(e=new oi(arguments[0],i,arguments[1],arguments[2],"CDATA"),this.attributes.push(e))}else(e=this.findAttribute(arguments[0]))?e.setValue(arguments[1]):(e=new oi(arguments[0],arguments[0],null,arguments[1],"CDATA"),this.attributes.push(e))},setString:function(e,t){this.setAttribute(e,t)},setInt:function(e,t){this.setAttribute(e,t)},setFloat:function(e,t){this.setAttribute(e,t)},setContent:function(e){this.children.length>0&&m.debug("Tried to set content for XMLElement with children"),this.content=e},setName:function(){if(1===arguments.length)this.name=arguments[0],this.fullName=arguments[0],this.namespace=null;else{var e=arguments[0].indexOf(":");this.name=null===arguments[1]||e<0?arguments[0]:arguments[0].substring(e+1),this.fullName=arguments[0],this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if("TEXT"===this.type)return this.content;var e,t,i=(""!==this.namespace&&this.namespace!==this.name?this.namespace+":":"")+this.name,r="<"+i;for(e=0;e<this.attributes.length;e++){var s=this.attributes[e];r+=" "+s.getName()+'="'+s.getValue()+'"'}if(0===this.children.length)""===this.content?r+="/>":r+=">"+this.content+"</"+i+">";else{for(r+=">",t=0;t<this.children.length;t++)r+=this.children[t].toString();r+="</"+i+">"}return r}},hi.parse=function(e){var t=new hi;return t.parse(e),t};var li=function(e){for(var t=0,r=0;r<e.length;r++)t=0!==r?i.max(t,i.abs(e[r])):i.abs(e[r]);var s=(t+"").indexOf(".");return 0===s?s=1:-1===s&&(s=(t+"").length),s},ci=v.PMatrix2D=function(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof ci?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};ci.prototype={set:function(){if(6===arguments.length){var e=arguments;this.set([e[0],e[1],e[2],e[3],e[4],e[5]])}else 1===arguments.length&&arguments[0]instanceof ci?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var e=new ci;return e.set(this.elements),e},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(e,t){this.elements[2]=e*this.elements[0]+t*this.elements[1]+this.elements[2],this.elements[5]=e*this.elements[3]+t*this.elements[4]+this.elements[5]},invTranslate:function(e,t){this.translate(-e,-t)},transpose:function(){},mult:function(e,t){var i,r;return e instanceof $?(i=e.x,r=e.y,t||(t=new $)):e instanceof Array&&(i=e[0],r=e[1],t||(t=[])),t instanceof Array?(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2],t[1]=this.elements[3]*i+this.elements[4]*r+this.elements[5]):t instanceof $&&(t.x=this.elements[0]*i+this.elements[1]*r+this.elements[2],t.y=this.elements[3]*i+this.elements[4]*r+this.elements[5],t.z=0),t},multX:function(e,t){return e*this.elements[0]+t*this.elements[1]+this.elements[2]},multY:function(e,t){return e*this.elements[3]+t*this.elements[4]+this.elements[5]},skewX:function(e){this.apply(1,0,1,e,0,0)},skewY:function(e){this.apply(1,0,1,0,e,0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var e=this.determinant();if(i.abs(e)>n.MIN_INT){var t=this.elements[0],r=this.elements[1],s=this.elements[2],a=this.elements[3],o=this.elements[4],h=this.elements[5];return this.elements[0]=o/e,this.elements[3]=-a/e,this.elements[1]=-r/e,this.elements[4]=t/e,this.elements[2]=(r*h-o*s)/e,this.elements[5]=(a*s-t*h)/e,!0}return!1},scale:function(e,t){e&&!t&&(t=e),e&&t&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[3]*=e,this.elements[4]*=t)},invScale:function(e,t){e&&!t&&(t=e),this.scale(1/e,1/t)},apply:function(){var e;1===arguments.length&&arguments[0]instanceof ci?e=arguments[0].array():6===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,this.elements[2],0,0,this.elements[5]],i=0,r=0;r<2;r++)for(var s=0;s<3;s++,i++)t[i]+=this.elements[3*r+0]*e[s+0]+this.elements[3*r+1]*e[s+3];this.elements=t.slice()},preApply:function(){var e;1===arguments.length&&arguments[0]instanceof ci?e=arguments[0].array():6===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);var t=[0,0,e[2],0,0,e[5]];t[2]=e[2]+this.elements[2]*e[0]+this.elements[5]*e[1],t[5]=e[5]+this.elements[2]*e[3]+this.elements[5]*e[4],t[0]=this.elements[0]*e[0]+this.elements[3]*e[1],t[3]=this.elements[0]*e[3]+this.elements[3]*e[4],t[1]=this.elements[1]*e[0]+this.elements[4]*e[1],t[4]=this.elements[1]*e[3]+this.elements[4]*e[4],this.elements=t.slice()},rotate:function(e){var t=v.cos(e),i=v.sin(e),r=this.elements[0],s=this.elements[1];this.elements[0]=t*r+i*s,this.elements[1]=-i*r+t*s,r=this.elements[3],s=this.elements[4],this.elements[3]=t*r+i*s,this.elements[4]=-i*r+t*s},rotateZ:function(e){this.rotate(e)},invRotateZ:function(e){this.rotateZ(e-("degrees"===v.angleMode?180:i.PI))},print:function(){var e=li(this.elements),t=v.nfs(this.elements[0],e,4)+" "+v.nfs(this.elements[1],e,4)+" "+v.nfs(this.elements[2],e,4)+"\n"+v.nfs(this.elements[3],e,4)+" "+v.nfs(this.elements[4],e,4)+" "+v.nfs(this.elements[5],e,4)+"\n\n";v.println(t)}};var ui=v.PMatrix3D=function(){this.reset()};ui.prototype={set:function(){16===arguments.length?this.elements=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof ui?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var e=new ui;return e.set(this.elements),e},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(e,t,i){void 0===i&&(i=0),this.elements[3]+=e*this.elements[0]+t*this.elements[1]+i*this.elements[2],this.elements[7]+=e*this.elements[4]+t*this.elements[5]+i*this.elements[6],this.elements[11]+=e*this.elements[8]+t*this.elements[9]+i*this.elements[10],this.elements[15]+=e*this.elements[12]+t*this.elements[13]+i*this.elements[14]},transpose:function(){var e=this.elements[4];this.elements[4]=this.elements[1],this.elements[1]=e,e=this.elements[8],this.elements[8]=this.elements[2],this.elements[2]=e,e=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=e,e=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=e,e=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=e,e=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=e},mult:function(e,t){var i,r,s,n;return e instanceof $?(i=e.x,r=e.y,s=e.z,n=1,t||(t=new $)):e instanceof Array&&(i=e[0],r=e[1],s=e[2],n=e[3]||1,(!t||3!==t.length&&4!==t.length)&&(t=[0,0,0])),t instanceof Array&&(3===t.length?(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2]*s+this.elements[3],t[1]=this.elements[4]*i+this.elements[5]*r+this.elements[6]*s+this.elements[7],t[2]=this.elements[8]*i+this.elements[9]*r+this.elements[10]*s+this.elements[11]):4===t.length&&(t[0]=this.elements[0]*i+this.elements[1]*r+this.elements[2]*s+this.elements[3]*n,t[1]=this.elements[4]*i+this.elements[5]*r+this.elements[6]*s+this.elements[7]*n,t[2]=this.elements[8]*i+this.elements[9]*r+this.elements[10]*s+this.elements[11]*n,t[3]=this.elements[12]*i+this.elements[13]*r+this.elements[14]*s+this.elements[15]*n)),t instanceof $&&(t.x=this.elements[0]*i+this.elements[1]*r+this.elements[2]*s+this.elements[3],t.y=this.elements[4]*i+this.elements[5]*r+this.elements[6]*s+this.elements[7],t.z=this.elements[8]*i+this.elements[9]*r+this.elements[10]*s+this.elements[11]),t},preApply:function(){var e;1===arguments.length&&arguments[0]instanceof ui?e=arguments[0].array():16===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,r=0;r<4;r++)for(var s=0;s<4;s++,i++)t[i]+=this.elements[s+0]*e[4*r+0]+this.elements[s+4]*e[4*r+1]+this.elements[s+8]*e[4*r+2]+this.elements[s+12]*e[4*r+3];this.elements=t.slice()},apply:function(){var e;1===arguments.length&&arguments[0]instanceof ui?e=arguments[0].array():16===arguments.length?e=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(e=arguments[0]);for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,r=0;r<4;r++)for(var s=0;s<4;s++,i++)t[i]+=this.elements[4*r+0]*e[s+0]+this.elements[4*r+1]*e[s+4]+this.elements[4*r+2]*e[s+8]+this.elements[4*r+3]*e[s+12];this.elements=t.slice()},rotate:function(e,t,i,r){if(i){var s=v.cos(e),n=v.sin(e),a=1-s;this.apply(a*t*t+s,a*t*i-n*r,a*t*r+n*i,0,a*t*i+n*r,a*i*i+s,a*i*r-n*t,0,a*t*r-n*i,a*i*r+n*t,a*r*r+s,0,0,0,0,1)}else this.rotateZ(e)},invApply:function(){void 0===ut&&(ut=new ui);var e=arguments;return ut.set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),!!ut.invert()&&(this.preApply(ut),!0)},rotateX:function(e){var t=v.cos(e),i=v.sin(e);this.apply([1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1])},rotateY:function(e){var t=v.cos(e),i=v.sin(e);this.apply([t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1])},rotateZ:function(e){var t=v.cos(e),i=v.sin(e);this.apply([t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1])},scale:function(e,t,i){!e||t||i?e&&t&&!i&&(i=1):t=i=e,e&&t&&i&&(this.elements[0]*=e,this.elements[1]*=t,this.elements[2]*=i,this.elements[4]*=e,this.elements[5]*=t,this.elements[6]*=i,this.elements[8]*=e,this.elements[9]*=t,this.elements[10]*=i,this.elements[12]*=e,this.elements[13]*=t,this.elements[14]*=i)},skewX:function(e){var t=v.tan(e);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(e){var t=v.tan(e);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},multX:function(e,t,i,r){return i?r?this.elements[0]*e+this.elements[1]*t+this.elements[2]*i+this.elements[3]*r:this.elements[0]*e+this.elements[1]*t+this.elements[2]*i+this.elements[3]:this.elements[0]*e+this.elements[1]*t+this.elements[3]},multY:function(e,t,i,r){return i?r?this.elements[4]*e+this.elements[5]*t+this.elements[6]*i+this.elements[7]*r:this.elements[4]*e+this.elements[5]*t+this.elements[6]*i+this.elements[7]:this.elements[4]*e+this.elements[5]*t+this.elements[7]},multZ:function(e,t,i,r){return r?this.elements[8]*e+this.elements[9]*t+this.elements[10]*i+this.elements[11]*r:this.elements[8]*e+this.elements[9]*t+this.elements[10]*i+this.elements[11]},multW:function(e,t,i,r){return r?this.elements[12]*e+this.elements[13]*t+this.elements[14]*i+this.elements[15]*r:this.elements[12]*e+this.elements[13]*t+this.elements[14]*i+this.elements[15]},invert:function(){var e=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],t=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],r=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],s=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],n=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],a=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],o=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],h=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],l=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],c=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],u=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],p=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],f=e*p-t*u+r*c+s*l-n*h+a*o;if(i.abs(f)<=1e-9)return!1;var d=[];d[0]=+this.elements[5]*p-this.elements[6]*u+this.elements[7]*c,d[4]=-this.elements[4]*p+this.elements[6]*l-this.elements[7]*h,d[8]=+this.elements[4]*u-this.elements[5]*l+this.elements[7]*o,d[12]=-this.elements[4]*c+this.elements[5]*h-this.elements[6]*o,d[1]=-this.elements[1]*p+this.elements[2]*u-this.elements[3]*c,d[5]=+this.elements[0]*p-this.elements[2]*l+this.elements[3]*h,d[9]=-this.elements[0]*u+this.elements[1]*l-this.elements[3]*o,d[13]=+this.elements[0]*c-this.elements[1]*h+this.elements[2]*o,d[2]=+this.elements[13]*a-this.elements[14]*n+this.elements[15]*s,d[6]=-this.elements[12]*a+this.elements[14]*r-this.elements[15]*t,d[10]=+this.elements[12]*n-this.elements[13]*r+this.elements[15]*e,d[14]=-this.elements[12]*s+this.elements[13]*t-this.elements[14]*e,d[3]=-this.elements[9]*a+this.elements[10]*n-this.elements[11]*s,d[7]=+this.elements[8]*a-this.elements[10]*r+this.elements[11]*t,d[11]=-this.elements[8]*n+this.elements[9]*r-this.elements[11]*e,d[15]=+this.elements[8]*s-this.elements[9]*t+this.elements[10]*e;var m=1/f;return d[0]*=m,d[1]*=m,d[2]*=m,d[3]*=m,d[4]*=m,d[5]*=m,d[6]*=m,d[7]*=m,d[8]*=m,d[9]*=m,d[10]*=m,d[11]*=m,d[12]*=m,d[13]*=m,d[14]*=m,d[15]*=m,this.elements=d.slice(),!0},toString:function(){for(var e="",t=0;t<15;t++)e+=this.elements[t]+", ";return e+this.elements[15]},print:function(){var e=li(this.elements),t=v.nfs(this.elements[0],e,4)+" "+v.nfs(this.elements[1],e,4)+" "+v.nfs(this.elements[2],e,4)+" "+v.nfs(this.elements[3],e,4)+"\n"+v.nfs(this.elements[4],e,4)+" "+v.nfs(this.elements[5],e,4)+" "+v.nfs(this.elements[6],e,4)+" "+v.nfs(this.elements[7],e,4)+"\n"+v.nfs(this.elements[8],e,4)+" "+v.nfs(this.elements[9],e,4)+" "+v.nfs(this.elements[10],e,4)+" "+v.nfs(this.elements[11],e,4)+"\n"+v.nfs(this.elements[12],e,4)+" "+v.nfs(this.elements[13],e,4)+" "+v.nfs(this.elements[14],e,4)+" "+v.nfs(this.elements[15],e,4)+"\n\n";v.println(t)},invTranslate:function(e,t,i){this.preApply(1,0,0,-e,0,1,0,-t,0,0,1,-i,0,0,0,1)},invRotateX:function(e){var t=v.cos(-e),i=v.sin(-e);this.preApply([1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1])},invRotateY:function(e){var t=v.cos(-e),i=v.sin(-e);this.preApply([t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1])},invRotateZ:function(e){var t=v.cos(-e),i=v.sin(-e);this.preApply([t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1])},invScale:function(e,t,i){this.preApply([1/e,0,0,0,0,1/t,0,0,0,0,1/i,0,0,0,0,1])}};var pi=v.PMatrixStack=function(){this.matrixStack=[]};function fi(e,t,r,s){var a,o,h,l;if(Ne===n.HSB){var c=v.color.toRGB(e,t,r);a=c[0],o=c[1],h=c[2]}else a=i.round(e/Te*255),o=i.round(t/Pe*255),h=i.round(r/Re*255);return(l=(l=(l=i.round(s/ke*255))<0?0:l)>255?255:l)<<24&n.ALPHA_MASK|(a=(a=a<0?0:a)>255?255:a)<<16&n.RED_MASK|(o=(o=o<0?0:o)>255?255:o)<<8&n.GREEN_MASK|(h=(h=h<0?0:h)>255?255:h)&n.BLUE_MASK}function di(e){var t,i,r;t=((e&n.RED_MASK)>>>16)/255,i=((e&n.GREEN_MASK)>>>8)/255,r=(e&n.BLUE_MASK)/255;var s,a=v.max(v.max(t,i),r),o=v.min(v.min(t,i),r);return o===a?[0,0,a*Re]:(s=t===a?(i-r)/(a-o):i===a?2+(r-t)/(a-o):4+(t-i)/(a-o),(s/=6)<0?s+=1:s>1&&(s-=1),[s*Te,(a-o)/a*Pe,a*Re])}function mi(){y.save()}function gi(){y.restore(),ae=!0,te=!0}function vi(){var e=(Date.now()-Fe)/1e3,t=++Ve/e;e>.5&&(Fe=Date.now(),Ve=0,v.__frameRate=t),v.frameCount++}pi.prototype.load=function(){var e=b.$newPMatrix();1===arguments.length?e.set(arguments[0]):e.set(arguments),this.matrixStack.push(e)},ei.prototype.$newPMatrix=function(){return new ci},ti.prototype.$newPMatrix=function(){return new ui},pi.prototype.push=function(){this.matrixStack.push(this.peek())},pi.prototype.pop=function(){return this.matrixStack.pop()},pi.prototype.peek=function(){var e=b.$newPMatrix();return e.set(this.matrixStack[this.matrixStack.length-1]),e},pi.prototype.mult=function(e){this.matrixStack[this.matrixStack.length-1].apply(e)},v.split=function(e,t){return e.split(t)},v.splitTokens=function(e,t){1===arguments.length&&(t="\n\t\r\f "),t="["+t+"]";for(var i=[],r=0,s=e.search(t);s>=0;)0===s?e=e.substring(1):(i[r]=e.substring(0,s),r++,e=e.substring(s)),s=e.search(t);return e.length>0&&(i[r]=e),0===i.length&&(i=void 0),i},v.append=function(e,t){return e[e.length]=t,e},v.concat=function(e,t){return e.concat(t)},v.sort=function(e,t){var i=[];if(e.length>0){for(var r=t>0?t:e.length,s=0;s<r;s++)i.push(e[s]);if("string"==typeof e[0]?i.sort():i.sort((function(e,t){return e-t})),t>0)for(var n=i.length;n<e.length;n++)i.push(e[n])}return i},v.splice=function(e,t,i){if(0===t.length)return e;if(t instanceof Array)for(var r=0,s=i;r<t.length;s++,r++)e.splice(s,0,t[r]);else e.splice(i,0,t);return e},v.subset=function(e,t,i){var r=void 0!==i?t+i:e.length;return e.slice(t,r)},v.join=function(e,t){return e.join(t)},v.shorten=function(e){for(var t=[],i=e.length,r=0;r<i;r++)t[r]=e[r];return t.pop(),t},v.expand=function(e,t){var i=e.slice(0),r=t||2*e.length;return i.length=r,i},v.arrayCopy=function(){var e,t,i,r=0,s=0;2===arguments.length?(t=arguments[1],i=(e=arguments[0]).length):3===arguments.length?(e=arguments[0],t=arguments[1],i=arguments[2]):5===arguments.length&&(e=arguments[0],r=arguments[1],t=arguments[2],s=arguments[3],i=arguments[4]);for(var n=r,a=s;n<i+r;n++,a++){if(void 0===t[a])throw"array index out of bounds exception";t[a]=e[n]}},v.reverse=function(e){return e.reverse()},v.mix=function(e,t,i){return e+((t-e)*i>>8)},v.peg=function(e){return e<0?0:e>255?255:e},v.modes=function(){var e=n.ALPHA_MASK,t=n.RED_MASK,r=n.GREEN_MASK,s=n.BLUE_MASK,a=i.min,o=i.max;function h(e,t,i,r,s,n,o,h,l,c,u){var p=i+((l-i)*t>>8),f=r+((c-r)*t>>8),d=s+((u-s)*t>>8);return a(((4278190080&e)>>>24)+t,255)<<24|(p=(p<0?0:p>255?255:p)<<16)|(f=(f<0?0:f>255?255:f)<<8)|(d<0?0:d>255?255:d)}return{replace:function(e,t){return t},blend:function(i,n){var o=(n&e)>>>24,h=i&t,l=i&r,c=i&s,u=n&t,p=n&r,f=n&s;return a(((i&e)>>>24)+o,255)<<24|h+((u-h)*o>>8)&t|l+((p-l)*o>>8)&r|c+((f-c)*o>>8)&s},add:function(i,n){var o=(n&e)>>>24;return a(((i&e)>>>24)+o,255)<<24|a((i&t)+((n&t)>>8)*o,t)&t|a((i&r)+((n&r)>>8)*o,r)&r|a((i&s)+((n&s)*o>>8),s)},subtract:function(i,n){var h=(n&e)>>>24;return a(((i&e)>>>24)+h,255)<<24|o((i&t)-((n&t)>>8)*h,r)&t|o((i&r)-((n&r)>>8)*h,s)&r|o((i&s)-((n&s)*h>>8),0)},lightest:function(i,n){var h=(n&e)>>>24;return a(((i&e)>>>24)+h,255)<<24|o(i&t,((n&t)>>8)*h)&t|o(i&r,((n&r)>>8)*h)&r|o(i&s,(n&s)*h>>8)},darkest:function(i,n){var o=(n&e)>>>24,h=i&t,l=i&r,c=i&s,u=a(i&t,((n&t)>>8)*o),p=a(i&r,((n&r)>>8)*o),f=a(i&s,(n&s)*o>>8);return a(((i&e)>>>24)+o,255)<<24|h+((u-h)*o>>8)&t|l+((p-l)*o>>8)&r|c+((f-c)*o>>8)&s},difference:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,a>c?a-c:c-a,o>u?o-u:u-o,l>p?l-p:p-l)},exclusion:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,a+c-(a*c>>7),o+u-(o*u>>7),l+p-(l*p>>7))},multiply:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,a*((n&t)>>16)>>8,o*((n&r)>>8)>>8,l*(n&s)>>8)},screen:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,255-((255-a)*(255-((n&t)>>16))>>8),255-((255-o)*(255-((n&r)>>8))>>8),255-((255-l)*(255-(n&s))>>8))},hard_light:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,c<128?a*c>>7:255-((255-a)*(255-c)>>7),u<128?o*u>>7:255-((255-o)*(255-u)>>7),p<128?l*p>>7:255-((255-l)*(255-p)>>7))},soft_light:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,(a*c>>7)+(a*a>>8)-(a*a*c>>15),(o*u>>7)+(o*o>>8)-(o*o*u>>15),(l*p>>7)+(l*l>>8)-(l*l*p>>15))},overlay:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s;return h(i,(n&e)>>>24,a,o,l,0,0,0,a<128?a*c>>7:255-((255-a)*(255-c)>>7),o<128?o*u>>7:255-((255-o)*(255-u)>>7),l<128?l*p>>7:255-((255-l)*(255-p)>>7))},dodge:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s,f=255;255!==c&&(f=(f=(a<<8)/(255-c))<0?0:f>255?255:f);var d=255;255!==u&&(d=(d=(o<<8)/(255-u))<0?0:d>255?255:d);var m=255;return 255!==p&&(m=(m=(l<<8)/(255-p))<0?0:m>255?255:m),h(i,(n&e)>>>24,a,o,l,0,0,0,f,d,m)},burn:function(i,n){var a=(i&t)>>16,o=(i&r)>>8,l=i&s,c=(n&t)>>16,u=(n&r)>>8,p=n&s,f=0;0!==c&&(f=255-((f=(255-a<<8)/c)<0?0:f>255?255:f));var d=0;0!==u&&(d=255-((d=(255-o<<8)/u)<0?0:d>255?255:d));var m=0;return 0!==p&&(m=255-((m=(255-l<<8)/p)<0?0:m>255?255:m)),h(i,(n&e)>>>24,a,o,l,0,0,0,f,d,m)}}}(),v.color=function(e,t,r,s){return void 0!==e&&void 0!==t&&void 0!==r&&void 0!==s?fi(e,t,r,s):void 0!==e&&void 0!==t&&void 0!==r?fi(e,t,r,ke):void 0!==e&&void 0!==t?function(e,t){var r;return e&n.ALPHA_MASK?(r=i.round(t/ke*255),e-(e&n.ALPHA_MASK)+((r=(r=r>255?255:r)<0?0:r)<<24&n.ALPHA_MASK)):Ne===n.RGB?fi(e,e,e,t):Ne===n.HSB?fi(0,0,e/Te*Re,t):void 0}(e,t):"number"==typeof e?function(e){if(e<=Te&&e>=0){if(Ne===n.RGB)return fi(e,e,e,ke);if(Ne===n.HSB)return fi(0,0,e/Te*Re,ke)}if(e)return e>2147483647&&(e-=4294967296),e}(e):fi(Te,Pe,Re,ke)},v.color.toString=function(e){return"rgba("+((e&n.RED_MASK)>>>16)+","+((e&n.GREEN_MASK)>>>8)+","+(e&n.BLUE_MASK)+","+((e&n.ALPHA_MASK)>>>24)/255+")"},v.color.toInt=function(e,t,i,r){return r<<24&n.ALPHA_MASK|e<<16&n.RED_MASK|t<<8&n.GREEN_MASK|i&n.BLUE_MASK},v.color.toArray=function(e){return[(e&n.RED_MASK)>>>16,(e&n.GREEN_MASK)>>>8,e&n.BLUE_MASK,(e&n.ALPHA_MASK)>>>24]},v.color.toGLArray=function(e){return[((e&n.RED_MASK)>>>16)/255,((e&n.GREEN_MASK)>>>8)/255,(e&n.BLUE_MASK)/255,((e&n.ALPHA_MASK)>>>24)/255]},v.color.toRGB=function(e,t,r){e=(e=e>Te?Te:e)/Te*360,t=(t=t>Pe?Pe:t)/Pe*100,r=(r=r>Re?Re:r)/Re*100;var s=i.round(r/100*255);if(0===t)return[s,s,s];var n=e%360,a=n%60,o=i.round(r*(100-t)/1e4*255),h=i.round(r*(6e3-t*a)/6e5*255),l=i.round(r*(6e3-t*(60-a))/6e5*255);switch(i.floor(n/60)){case 0:return[s,l,o];case 1:return[h,s,o];case 2:return[o,s,l];case 3:return[o,h,s];case 4:return[l,o,s];case 5:return[s,o,h]}},v.brightness=function(e){return di(e)[2]},v.saturation=function(e){return di(e)[1]},v.hue=function(e){return di(e)[0]},v.red=function(e){return((e&n.RED_MASK)>>>16)/255*Te},v.green=function(e){return((e&n.GREEN_MASK)>>>8)/255*Pe},v.blue=function(e){return(e&n.BLUE_MASK)/255*Re},v.alpha=function(e){return((e&n.ALPHA_MASK)>>>24)/255*ke},v.lerpColor=function(e,t,i){var r,s,a,o,h,l,c,u,p,f,d,m,g,y,x,b,w=v.color(e),E=v.color(t);return Ne===n.HSB?(m=di(w),c=((w&n.ALPHA_MASK)>>>24)/ke,g=di(E),d=((E&n.ALPHA_MASK)>>>24)/ke,x=v.lerp(m[0],g[0],i),b=v.lerp(m[1],g[1],i),a=v.lerp(m[2],g[2],i),y=v.color.toRGB(x,b,a),v.lerp(c,d,i)*ke<<24&n.ALPHA_MASK|y[0]<<16&n.RED_MASK|y[1]<<8&n.GREEN_MASK|y[2]&n.BLUE_MASK):(o=(w&n.RED_MASK)>>>16,h=(w&n.GREEN_MASK)>>>8,l=w&n.BLUE_MASK,c=((w&n.ALPHA_MASK)>>>24)/ke,u=(E&n.RED_MASK)>>>16,p=(E&n.GREEN_MASK)>>>8,f=E&n.BLUE_MASK,d=((E&n.ALPHA_MASK)>>>24)/ke,r=0|v.lerp(o,u,i),s=0|v.lerp(h,p,i),a=0|v.lerp(l,f,i),v.lerp(c,d,i)*ke<<24&n.ALPHA_MASK|r<<16&n.RED_MASK|s<<8&n.GREEN_MASK|a&n.BLUE_MASK)},v.colorMode=function(){Ne=arguments[0],arguments.length>1&&(Te=arguments[1],Pe=arguments[2]||arguments[1],Re=arguments[3]||arguments[1],ke=arguments[4]||arguments[1])},v.blendColor=function(e,t,i){return i===n.REPLACE?v.modes.replace(e,t):i===n.BLEND?v.modes.blend(e,t):i===n.ADD?v.modes.add(e,t):i===n.SUBTRACT?v.modes.subtract(e,t):i===n.LIGHTEST?v.modes.lightest(e,t):i===n.DARKEST?v.modes.darkest(e,t):i===n.DIFFERENCE?v.modes.difference(e,t):i===n.EXCLUSION?v.modes.exclusion(e,t):i===n.MULTIPLY?v.modes.multiply(e,t):i===n.SCREEN?v.modes.screen(e,t):i===n.HARD_LIGHT?v.modes.hard_light(e,t):i===n.SOFT_LIGHT?v.modes.soft_light(e,t):i===n.OVERLAY?v.modes.overlay(e,t):i===n.DODGE?v.modes.dodge(e,t):i===n.BURN?v.modes.burn(e,t):void 0},v.printMatrix=function(){ot.print()},ei.prototype.translate=function(e,t){ot.translate(e,t),ht.invTranslate(e,t),y.translate(e,t)},ti.prototype.translate=function(e,t,i){ot.translate(e,t,i),ht.invTranslate(e,t,i)},ei.prototype.scale=function(e,t){ot.scale(e,t),ht.invScale(e,t),y.scale(e,t||e)},ti.prototype.scale=function(e,t,i){ot.scale(e,t,i),ht.invScale(e,t,i)},ei.prototype.pushMatrix=function(){lt.load(ot),ct.load(ht),mi()},ti.prototype.pushMatrix=function(){lt.load(ot),ct.load(ht)},ei.prototype.popMatrix=function(){ot.set(lt.pop()),ht.set(ct.pop()),gi()},ti.prototype.popMatrix=function(){ot.set(lt.pop()),ht.set(ct.pop())},ei.prototype.resetMatrix=function(){ot.reset(),ht.reset(),y.setTransform(1,0,0,1,0,0)},ti.prototype.resetMatrix=function(){ot.reset(),ht.reset()},Jt.prototype.applyMatrix=function(){var e=arguments;ot.apply(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),ht.invApply(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},ei.prototype.applyMatrix=function(){for(var e=arguments,t=e.length;t<16;t++)e[t]=0;e[10]=e[15]=1,Jt.prototype.applyMatrix.apply(this,e)},v.rotateX=function(e){ot.rotateX(e),ht.invRotateX(e)},ei.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."},ti.prototype.rotateZ=function(e){ot.rotateZ(e),ht.invRotateZ(e)},v.rotateY=function(e){ot.rotateY(e),ht.invRotateY(e)},ei.prototype.rotate=function(e){ot.rotateZ(e),ht.invRotateZ(e),y.rotate(v.convertToRadians(e))},ti.prototype.rotate=function(e){v.rotateZ(e)},v.pushStyle=function(){mi(),v.pushMatrix();var e={doFill:Q,currentFillColor:J,currentFillRGB:ee,doStroke:ie,currentStrokeColor:se,currentStrokeRGB:ne,curTint:De,curRectMode:pe,curColorMode:Ne,colorModeX:Te,colorModeZ:Re,colorModeY:Pe,colorModeA:ke,curTextFont:Qe,horizontalTextAlignment:ze,verticalTextAlignment:Ke,textMode:je,curFontName:We,curTextSize:qe,curTextAscent:Xe,curTextDescent:Ye,curTextLeading:$e};Mt.push(e)},v.popStyle=function(){var e=Mt.pop();if(!e)throw"Too many popStyle() without enough pushStyle()";gi(),v.popMatrix(),Q=e.doFill,J=e.currentFillColor,ee=e.currentFillRGB,ie=e.doStroke,se=e.currentStrokeColor,ne=e.currentStrokeRGB,De=e.curTint,pe=e.curRectmode,Ne=e.curColorMode,Te=e.colorModeX,Re=e.colorModeZ,Pe=e.colorModeY,ke=e.colorModeA,Qe=e.curTextFont,We=e.curFontName,qe=e.curTextSize,ze=e.horizontalTextAlignment,Ke=e.verticalTextAlignment,je=e.textMode,Xe=e.curTextAscent,Ye=e.curTextDescent,$e=e.curTextLeading},v.year=function(){return(new Date).getFullYear()},v.month=function(){return(new Date).getMonth()+1},v.day=function(){return(new Date).getDate()},v.hour=function(){return(new Date).getHours()},v.minute=function(){return(new Date).getMinutes()},v.second=function(){return(new Date).getSeconds()},v.millis=function(){return Date.now()-Me},ei.prototype.redraw=function(){vi(),y.lineWidth=oe;var e=v.pmouseX,t=v.pmouseY;v.pmouseX=Ie,v.pmouseY=Le,mi(),v.draw(),gi(),Ie=v.mouseX,Le=v.mouseY,v.pmouseX=e,v.pmouseY=t,v.mouseIsPressed=v.__mousePressed},ti.prototype.redraw=function(){vi();var e=v.pmouseX,t=v.pmouseY;v.pmouseX=Ie,v.pmouseY=Le,y.clear(y.DEPTH_BUFFER_BIT),Be={attributes:{},locations:{}},v.noLights(),v.lightFalloff(1,0,0),v.shininess(1),v.ambient(255,255,255),v.specular(0,0,0),v.emissive(0,0,0),v.camera(),v.draw(),Ie=v.mouseX,Le=v.mouseY,v.pmouseX=e,v.pmouseY=t,v.mouseIsPressed=v.__mousePressed},v.noLoop=function(){ce=!1,he=!1,clearInterval(ue),x.onPause()},v.loop=function(){he||(Fe=Date.now(),Ve=0,ue=e.setInterval((function(){try{x.onFrameStart(),v.redraw(),x.onFrameEnd()}catch(t){throw e.clearInterval(ue),t}}),xe),ce=!0,he=!0,x.onLoop())},v.frameRate=function(e){xe=1e3/(ye=e),ce&&(v.noLoop(),v.loop())};var yi=[];function xi(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i),yi.push({elem:e,type:t,fn:i})}function bi(e){var t=e.elem,i=e.type,r=e.fn;t.removeEventListener?t.removeEventListener(i,r,!1):t.detachEvent&&t.detachEvent("on"+i,r)}function wi(e,t,r,s,n,a){var o=e<0?r:t,h=0===n,l=void 0===n||n<0?0:n,c=i.abs(e);if(h)for(l=1,c*=10;i.abs(i.round(c)-c)>1e-6&&l<7;)++l,c*=10;else 0!==l&&(c*=i.pow(10,l));var u,p=2*c;if(i.floor(c)===c)u=c;else if(i.floor(p)===p){var f=i.floor(c);u=f+f%2}else u=i.round(c);for(var d="",m=s+l;m>0||u>0;)m--,d=""+u%10+d,u=i.floor(u/10);if(void 0!==a)for(var g=d.length-3-l;g>0;)d=d.substring(0,g)+a+d.substring(g),g-=3;return l>0?o+d.substring(0,d.length-l)+"."+d.substring(d.length-l,d.length):o+d}function Ei(e,t,i,r,s,n){if(e instanceof Array){for(var a=[],o=0,h=e.length;o<h;o++)a.push(wi(e[o],t,i,r,s,n));return a}return wi(e,t,i,r,s,n)}function _i(e){var t=parseInt("0x"+e,16);return t>2147483647&&(t-=4294967296),t}function Si(e){return Array.prototype.slice.call(e,1)}v.exit=function(){var t;for(var i in e.clearInterval(ue),t=v.externals.canvas.id,c.splice(u[t],1),delete u[t],m.lib)m.lib.hasOwnProperty(i)&&m.lib[i].hasOwnProperty("detach")&&m.lib[i].detach(v);for(var r=yi.length;r--;)bi(yi[r]);x.onExit()},v.cursor=function(){if(arguments.length>1||1===arguments.length&&arguments[0]instanceof v.PImage){var e,t,i=arguments[0];if(arguments.length>=3){if(t=arguments[2],(e=arguments[1])<0||t<0||t>=i.height||e>=i.width)throw"x and y must be non-negative and less than the dimensions of the image"}else e=i.width>>>1,t=i.height>>>1;var r='url("'+i.toDataURL()+'") '+e+" "+t+", default";p.style.cursor=r}else if(1===arguments.length){var s=arguments[0];p.style.cursor=s}else p.style.cursor=be},v.noCursor=function(){p.style.cursor=n.NOCURSOR},v.link=function(t,i){void 0!==i?e.open(t,i):e.location=t},v.beginDraw=r,v.endDraw=r,ei.prototype.toImageData=function(e,t,i,r){return e=void 0!==e?e:0,t=void 0!==t?t:0,i=void 0!==i?i:v.width,r=void 0!==r?r:v.height,y.getImageData(e,t,i,r)},ti.prototype.toImageData=function(e,i,r,s){e=void 0!==e?e:0,i=void 0!==i?i:0,r=void 0!==r?r:v.width,s=void 0!==s?s:v.height;var n=t.createElement("canvas").getContext("2d").createImageData(r,s),a=new Uint8Array(r*s*4);return y.readPixels(e,i,r,s,y.RGBA,y.UNSIGNED_BYTE,a),n.data.set(a),n},v.status=function(t){e.status=t},v.binary=function(e,t){var i;if(t>0)i=t;else if(e instanceof si)i=16,e|=0;else for(i=32;i>1&&!(e>>>i-1&1);)i--;for(var r="";i>0;)r+=e>>>--i&1?"1":"0";return r},v.unbinary=function(e){for(var t=e.length-1,i=1,r=0;t>=0;){var s=e[t--];if("0"!==s&&"1"!==s)throw"the value passed into unbinary was not an 8 bit binary number";"1"===s&&(r+=i),i<<=1}return r},v.nf=function(e,t,i){return Ei(e,"","-",t,i)},v.nfs=function(e,t,i){return Ei(e," ","-",t,i)},v.nfp=function(e,t,i){return Ei(e,"+","-",t,i)},v.nfc=function(e,t,i){return Ei(e,"","-",t,i,",")},v.hex=function(e,t){return 1===arguments.length&&(t=e instanceof si?4:8),function(e,t){t=null==t?t=8:t,e<0&&(e=4294967295+e+1);for(var i=Number(e).toString(16).toUpperCase();i.length<t;)i="0"+i;return i.length>=t&&(i=i.substring(i.length-t,i.length)),i}(e,t)},v.unhex=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(_i(e[i]));return t}return _i(e)},v.loadStrings=function(e){if(localStorage[e])return localStorage[e].split("\n");var t=s(e);return"string"!=typeof t||""===t?[]:(t=t.replace(/(\r\n?)/g,"\n").replace(/\n$/,"")).split("\n")},v.saveStrings=function(e,t){localStorage[e]=t.join("\n")},v.loadBytes=function(e){for(var t=s(e),i=[],r=0;r<t.length;r++)i.push(t.charCodeAt(r));return i},v.matchAll=function(e,t){for(var i,r=[],s=new RegExp(t,"g");null!==(i=s.exec(e));)r.push(i),0===i[0].length&&++s.lastIndex;return r.length>0?r:null},v.__contains=function(e,t){return"string"!=typeof e?e.contains.apply(e,Si(arguments)):null!==e&&null!==t&&"string"==typeof t&&e.indexOf(t)>-1},v.__replaceAll=function(e,t,i){return"string"!=typeof e?e.replaceAll.apply(e,Si(arguments)):e.replace(new RegExp(t,"g"),i)},v.__replaceFirst=function(e,t,i){return"string"!=typeof e?e.replaceFirst.apply(e,Si(arguments)):e.replace(new RegExp(t,""),i)},v.__replace=function(e,t,i){if("string"!=typeof e)return e.replace.apply(e,Si(arguments));if(t instanceof RegExp)return e.replace(t,i);if("string"!=typeof t&&(t=t.toString()),""===t)return e;var r=e.indexOf(t);if(r<0)return e;var s=0,n="";do{n+=e.substring(s,r)+i,s=r+t.length}while((r=e.indexOf(t,s))>=0);return n+e.substring(s)},v.__equals=function(e,t){return e.equals instanceof Function?e.equals.apply(e,Si(arguments)):e.valueOf()===t.valueOf()},v.__equalsIgnoreCase=function(e,t){return"string"!=typeof e?e.equalsIgnoreCase.apply(e,Si(arguments)):e.toLowerCase()===t.toLowerCase()},v.__toCharArray=function(e){if("string"!=typeof e)return e.toCharArray.apply(e,Si(arguments));for(var t=[],i=0,r=e.length;i<r;++i)t[i]=new si(e.charAt(i));return t},v.__split=function(e,t,i){if("string"!=typeof e)return e.split.apply(e,Si(arguments));var r=new RegExp(t);if(void 0===i||i<1)return e.split(r);for(var s,n=[],a=e;-1!==(s=a.search(r))&&n.length<i-1;){var o=r.exec(a).toString();n.push(a.substring(0,s)),a=a.substring(s+o.length)}return-1===s&&""===a||n.push(a),n},v.__codePointAt=function(e,t){var i=e.charCodeAt(t);return 55296<=i&&i<=56319?1024*(i-55296)+(e.charCodeAt(t+1)-56320)+65536:i},v.match=function(e,t){return e.match(t)},v.__startsWith=function(e,t,i){return"string"!=typeof e?e.startsWith.apply(e,Si(arguments)):!((i=i||0)<0||i>e.length||""!==t&&t!==e&&e.indexOf(t)!==i)},v.__endsWith=function(e,t){if("string"!=typeof e)return e.endsWith.apply(e,Si(arguments));var i=t?t.length:0;return""===t||t===e||e.indexOf(t)===e.length-i},v.__hashCode=function(e){return e.hashCode instanceof Function?e.hashCode.apply(e,Si(arguments)):function(e){if("string"==typeof e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)&4294967295;return t}return"object"!=typeof e?4294967295&e:e.hashCode instanceof Function?e.hashCode():(void 0===e.$id&&(e.$id=i.floor(65536*i.random())-32768<<16|i.floor(65536*i.random())),e.$id)}(e)},v.__printStackTrace=function(e){v.println("Exception: "+e.toString())},v._clearLogs=function(){m.logger.clear&&m.logger.clear()};var Ai=[];function Ci(e){return"number"==typeof e?0!==e:"boolean"==typeof e?e:"string"==typeof e?"true"===e.toLowerCase():e instanceof si?49===e.code||84===e.code||116===e.code:void 0}function ki(e){return"number"==typeof e?e:"boolean"==typeof e?e?1:0:"string"==typeof e?parseFloat(e):e instanceof si?e.code:void 0}function Ti(e,t){return"number"==typeof e?4294967295&e:"boolean"==typeof e?e?1:0:"string"==typeof e?4294967295&parseInt(e,t||10):e instanceof si?e.code:void 0}v.println=function(e){var t=Ai.length;t&&(m.logger.log(Ai.join("")),Ai.length=0),0===arguments.length&&0===t?m.logger.log(""):0!==arguments.length&&m.logger.log(e)},v.print=function(e){Ai.push(e)},v.str=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(e[i].toString()+"");return t}return e.toString()+""},v.trim=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(e[i].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return t}return e.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")},v.parseBoolean=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(Ci(e[i]));return t}return Ci(e)},v.parseByte=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(0-(128&e[i])|127&e[i]);return t}return 0-(128&e)|127&e},v.parseChar=function(e){if("number"==typeof e)return new si(String.fromCharCode(65535&e));if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(new si(String.fromCharCode(65535&e[i])));return t}throw"char() may receive only one argument of type int, byte, int[], or byte[]."},v.parseFloat=function(e){if(e instanceof Array){for(var t=[],i=0;i<e.length;i++)t.push(ki(e[i]));return t}return ki(e)},v.parseInt=function(e,t){if(e instanceof Array){for(var i=[],r=0;r<e.length;r++)"string"!=typeof e[r]||/^\s*[+\-]?\d+\s*$/.test(e[r])?i.push(Ti(e[r],t)):i.push(0);return i}return Ti(e,t)},v.__int_cast=function(e){return 0|e},v.__instanceof=function(e,t){if("function"!=typeof t)throw"Function is expected as type argument for instanceof operator";if("string"==typeof e)return t===Object||t===String;if(e instanceof t)return!0;if("object"!=typeof e||null===e)return!1;var i=e.constructor;if(t.$isInterface){for(var r=[];i;)i.$interfaces&&(r=r.concat(i.$interfaces)),i=i.$base;for(;r.length>0;){var s=r.shift();if(s===t)return!0;s.$interfaces&&(r=r.concat(s.$interfaces))}return!1}for(;i.hasOwnProperty("$base");)if((i=i.$base)===t)return!0;return!1},v.abs=i.abs,v.ceil=i.ceil,v.constrain=function(e,t,i){return e>i?i:e<t?t:e},v.dist=function(){var e,t,r;return 4===arguments.length?(e=arguments[0]-arguments[2],t=arguments[1]-arguments[3],i.sqrt(e*e+t*t)):6===arguments.length?(e=arguments[0]-arguments[3],t=arguments[1]-arguments[4],r=arguments[2]-arguments[5],i.sqrt(e*e+t*t+r*r)):void 0},v.exp=i.exp,v.floor=i.floor,v.lerp=function(e,t,i){return(t-e)*i+e},v.log=i.log,v.mag=function(e,t,r){return r?i.sqrt(e*e+t*t+r*r):i.sqrt(e*e+t*t)},v.map=function(e,t,i,r,s){return r+(e-t)/(i-t)*(s-r)},v.max=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];var e=1===arguments.length?arguments[0]:arguments;if(!("length"in e&&e.length>0))throw"Non-empty array is expected";for(var t=e[0],i=e.length,r=1;r<i;++r)t<e[r]&&(t=e[r]);return t},v.min=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];var e=1===arguments.length?arguments[0]:arguments;if(!("length"in e&&e.length>0))throw"Non-empty array is expected";for(var t=e[0],i=e.length,r=1;r<i;++r)t>e[r]&&(t=e[r]);return t},v.norm=function(e,t,i){return(e-t)/(i-t)},v.pow=i.pow,v.round=i.round,v.sq=function(e){return e*e},v.sqrt=i.sqrt,v.convertToDegrees=function(e){return"degrees"===v.angleMode?v.degrees(e):e},v.convertToRadians=function(e){return"degrees"===v.angleMode?v.radians(e):e};var Pi=function(){var e=arguments;return function(){for(var t=arguments,i=0;i<e.length;i++)t=[e[i].apply(e[i],t)];return t[0]}};v.acos=Pi(i.acos,v.convertToDegrees),v.asin=Pi(i.asin,v.convertToDegrees),v.atan=Pi(i.atan,v.convertToDegrees),v.atan2=Pi(i.atan2,v.convertToDegrees),v.cos=Pi(v.convertToRadians,i.cos),v.degrees=function(e){return 180*e/i.PI},v.radians=function(e){return e/180*i.PI},v.sin=Pi(v.convertToRadians,i.sin),v.tan=Pi(v.convertToRadians,i.tan),Et="degrees"===v.angleMode?60:v.radians(60),At=St/v.tan(Et/2);var Ri=i.random;function Ii(e,t){var i=e||362436069,r=t||521288629,s=function(){return 4294967295&((65535&(i=36969*(65535&i)+(i>>>16)&4294967295))<<16|65535&(r=18e3*(65535&r)+(r>>>16)&4294967295))};this.nextDouble=function(){var e=s()/4294967296;return e<0?1+e:e},this.nextInt=s}function Li(e){var t,r,s=void 0!==e?new Ii(e):Ii.createRandomized(),n=new Uint8Array(512);for(t=0;t<256;++t)n[t]=t;for(t=0;t<256;++t){var a=n[r=255&s.nextInt()];n[r]=n[t],n[t]=a}for(t=0;t<256;++t)n[t+256]=n[t];function o(e,t,i,r){var s=15&e,n=s<8?t:i,a=s<4?i:12===s||14===s?t:r;return(1&s?-n:n)+(2&s?-a:a)}function h(e,t,i){var r=1&e?i:t;return 2&e?r:-r}function l(e,t){return 1&e?t:-t}function c(e,t,i){return t+e*(i-t)}this.noise3d=function(e,t,r){var s=255&i.floor(e),a=255&i.floor(t),h=255&i.floor(r),l=(3-2*(e-=i.floor(e)))*e*e,u=(3-2*(t-=i.floor(t)))*t*t,p=(3-2*(r-=i.floor(r)))*r*r,f=n[s]+a,d=n[f]+h,m=n[f+1]+h,g=n[s+1]+a,v=n[g]+h,y=n[g+1]+h;return c(p,c(u,c(l,o(n[d],e,t,r),o(n[v],e-1,t,r)),c(l,o(n[m],e,t-1,r),o(n[y],e-1,t-1,r))),c(u,c(l,o(n[d+1],e,t,r-1),o(n[v+1],e-1,t,r-1)),c(l,o(n[m+1],e,t-1,r-1),o(n[y+1],e-1,t-1,r-1))))},this.noise2d=function(e,t){var r=255&i.floor(e),s=255&i.floor(t),a=(3-2*(e-=i.floor(e)))*e*e,o=(3-2*(t-=i.floor(t)))*t*t,l=n[r]+s,u=n[r+1]+s;return c(o,c(a,h(n[l],e,t),h(n[u],e-1,t)),c(a,h(n[l+1],e,t-1),h(n[u+1],e-1,t-1)))},this.noise1d=function(e){var t=255&i.floor(e);return c((3-2*(e-=i.floor(e)))*e*e,l(n[t],e),l(n[t+1],e-1))}}v.random=function(){if(0===arguments.length)return Ri();if(1===arguments.length)return Ri()*arguments[0];var e=arguments[0],t=arguments[1];return Ri()*(t-e)+e},Ii.createRandomized=function(){var e=new Date;return new Ii(e/6e4&4294967295,4294967295&e)},v.randomSeed=function(e){Ri=new Ii(e).nextDouble},v.Random=function(e){var t,r,s=!1;this.nextGaussian=function(){if(s)return s=!1,t;var e,n,a;do{a=(e=2*r()-1)*e+(n=2*r()-1)*n}while(a>=1||0===a);var o=i.sqrt(-2*i.log(a)/a);return t=n*o,s=!0,e*o},r=void 0===e?i.random:new Ii(e).nextDouble};var Ni,Di={generator:void 0,octaves:4,fallout:.5,seed:void 0};function Oi(){Q&&(te&&(y.fillStyle=ee,te=!1),y.fill())}function Mi(){ie&&(ae&&(y.strokeStyle=ne,ae=!1),y.stroke())}v.noise=function(e,t,i){void 0===Di.generator&&(Di.generator=new Li(Di.seed));for(var r=Di.generator,s=1,n=1,a=0,o=0;o<Di.octaves;++o){switch(s*=Di.fallout,arguments.length){case 1:a+=s*(1+r.noise1d(n*e))/2;break;case 2:a+=s*(1+r.noise2d(n*e,n*t))/2;break;case 3:a+=s*(1+r.noise3d(n*e,n*t,n*i))/2}n*=2}return a},v.noiseDetail=function(e,t){Di.octaves=e,void 0!==t&&(Di.fallout=t)},v.noiseSeed=function(e){Di.seed=e,Di.generator=void 0},Jt.prototype.size=function(e,t,r){ie&&v.stroke(0),Q&&v.fill(255);var s={fillStyle:y.fillStyle,strokeStyle:y.strokeStyle,lineCap:y.lineCap,lineJoin:y.lineJoin};for(var a in p.style.length>0&&(p.style.removeProperty("width"),p.style.removeProperty("height")),p.width=v.width=e||100,p.height=v.height=t||100,s)s.hasOwnProperty(a)&&(y[a]=s[a]);v.textFont(Qe),v.background(),et=i.max(1e3,e*t*.05),v.externals.context=y;for(var o=0;o<n.SINCOS_LENGTH;o++)xt[o]=v.sin("degrees"===v.angleMode?o:v.radians(o)),bt[o]=v.cos("degrees"===v.angleMode?o:v.radians(o))},ei.prototype.size=function(e,t,i){void 0===y&&(y=p.getContext("2d"),lt=new pi,ct=new pi,ot=new ci,ht=new ci),Jt.prototype.size.apply(this,arguments)},ti.prototype.size=(Ni=!1,function(e,t,i){if(Ni)throw"Multiple calls to size() for 3D renders are not allowed.";Ni=!0;try{p.width=v.width=e||100,p.height=v.height=t||100,y=function(e){for(var t,i=["experimental-webgl","webgl","webkit-3d"],r=0,s=i.length;r<s&&!(t=e.getContext(i[r],{antialias:!1}));r++);return t}(p),z=y.createTexture(),K=y.createTexture()}catch(e){m.debug(e)}if(!y)throw"WebGL context is not supported on this browser.";y.viewport(0,0,p.width,p.height),y.enable(y.DEPTH_TEST),y.enable(y.BLEND),y.blendFunc(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA),P=Xt(y,"varying vec4 frontColor;attribute vec3 Vertex;attribute vec2 aTextureCoord;uniform vec4 color;uniform mat4 model;uniform mat4 view;uniform mat4 projection;uniform float pointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = pointSize;  frontColor = color;  gl_Position = projection * view * model * vec4(Vertex, 1.0);  vTextureCoord = aTextureCoord;}","#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int picktype;void main(void){  if(picktype == 0){    gl_FragColor = frontColor;  }  else if(picktype == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(frontColor.rgb*alpha, alpha);\n  }}"),R=Xt(y,"varying vec4 frontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float pointSize;void main(void) {  frontColor = aColor;  gl_PointSize = pointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}","#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;void main(void){  gl_FragColor = frontColor;}"),v.strokeWeight(1),T=Xt(y,Ht,"#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 frontColor;uniform sampler2D sampler;uniform bool usingTexture;varying vec2 vTexture;void main(void){  if(usingTexture){    gl_FragColor = vec4(texture2D(sampler, vTexture.xy)) * frontColor;  }  else{    gl_FragColor = frontColor;  }}"),y.useProgram(T),Kt("usingTexture3d",T,"usingTexture",He),v.lightFalloff(1,0,0),v.shininess(1),v.ambient(255,255,255),v.specular(0,0,0),v.emissive(0,0,0),I=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,I),y.bufferData(y.ARRAY_BUFFER,Ft,y.STATIC_DRAW),L=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,L),y.bufferData(y.ARRAY_BUFFER,Bt,y.STATIC_DRAW),N=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,N),y.bufferData(y.ARRAY_BUFFER,Vt,y.STATIC_DRAW),D=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,D),y.bufferData(y.ARRAY_BUFFER,Gt,y.STATIC_DRAW),O=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,O),y.bufferData(y.ARRAY_BUFFER,Ut,y.STATIC_DRAW),M=y.createBuffer(),F=y.createBuffer(),V=y.createBuffer(),B=y.createBuffer(),G=y.createBuffer(),H=y.createBuffer(),U=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,U),y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,0,0]),y.STATIC_DRAW),j=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,j),y.bufferData(y.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),y.STATIC_DRAW),W=y.createBuffer(),y.bindBuffer(y.ARRAY_BUFFER,W),y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),y.STATIC_DRAW),q=y.createBuffer(),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,q),y.bufferData(y.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),y.STATIC_DRAW),nt=new ui,at=new ui,ot=new ui,ht=new ui,pt=new ui,v.camera(),v.perspective(),lt=new pi,ct=new pi,E=new ui,_=new ui,S=new ui,A=new ui,C=new ui,(k=new ui).set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0),Jt.prototype.size.apply(this,arguments)}),ei.prototype.ambientLight=Jt.prototype.a3DOnlyFunction,ti.prototype.ambientLight=function(e,t,i,r,s,a){if(ft===n.MAX_LIGHTS)throw"can only create "+n.MAX_LIGHTS+" lights";var o=new $(r,s,a),h=new ui;h.scale(1,-1,1),h.apply(ot.array()),h.mult(o,o);var l=fi(e,t,i,0),c=[((l&n.RED_MASK)>>>16)/255,((l&n.GREEN_MASK)>>>8)/255,(l&n.BLUE_MASK)/255];y.useProgram(T),zt("lights.color.3d."+ft,T,"lights"+ft+".color",c),zt("lights.position.3d."+ft,T,"lights"+ft+".position",o.array()),Kt("lights.type.3d."+ft,T,"lights"+ft+".type",0),Kt("lightCount3d",T,"lightCount",++ft)},ei.prototype.directionalLight=Jt.prototype.a3DOnlyFunction,ti.prototype.directionalLight=function(e,t,i,r,s,a){if(ft===n.MAX_LIGHTS)throw"can only create "+n.MAX_LIGHTS+" lights";y.useProgram(T);var o=new ui;o.scale(1,-1,1),o.apply(ot.array());var h=[(o=o.array())[0]*r+o[4]*s+o[8]*a,o[1]*r+o[5]*s+o[9]*a,o[2]*r+o[6]*s+o[10]*a],l=fi(e,t,i,0);zt("lights.color.3d."+ft,T,"lights"+ft+".color",[((l&n.RED_MASK)>>>16)/255,((l&n.GREEN_MASK)>>>8)/255,(l&n.BLUE_MASK)/255]),zt("lights.position.3d."+ft,T,"lights"+ft+".position",h),Kt("lights.type.3d."+ft,T,"lights"+ft+".type",1),Kt("lightCount3d",T,"lightCount",++ft)},ei.prototype.lightFalloff=Jt.prototype.a3DOnlyFunction,ti.prototype.lightFalloff=function(e,t,i){y.useProgram(T),zt("falloff3d",T,"falloff",[e,t,i])},ei.prototype.lightSpecular=Jt.prototype.a3DOnlyFunction,ti.prototype.lightSpecular=function(e,t,i){var r=fi(e,t,i,0),s=[((r&n.RED_MASK)>>>16)/255,((r&n.GREEN_MASK)>>>8)/255,(r&n.BLUE_MASK)/255];y.useProgram(T),zt("specular3d",T,"specular",s)},v.lights=function(){v.ambientLight(128,128,128),v.directionalLight(128,128,128,0,0,-1),v.lightFalloff(1,0,0),v.lightSpecular(0,0,0)},ei.prototype.pointLight=Jt.prototype.a3DOnlyFunction,ti.prototype.pointLight=function(e,t,i,r,s,a){if(ft===n.MAX_LIGHTS)throw"can only create "+n.MAX_LIGHTS+" lights";var o=new $(r,s,a),h=new ui;h.scale(1,-1,1),h.apply(ot.array()),h.mult(o,o);var l=fi(e,t,i,0),c=[((l&n.RED_MASK)>>>16)/255,((l&n.GREEN_MASK)>>>8)/255,(l&n.BLUE_MASK)/255];y.useProgram(T),zt("lights.color.3d."+ft,T,"lights"+ft+".color",c),zt("lights.position.3d."+ft,T,"lights"+ft+".position",o.array()),Kt("lights.type.3d."+ft,T,"lights"+ft+".type",2),Kt("lightCount3d",T,"lightCount",++ft)},ei.prototype.noLights=Jt.prototype.a3DOnlyFunction,ti.prototype.noLights=function(){ft=0,y.useProgram(T),Kt("lightCount3d",T,"lightCount",ft)},ei.prototype.spotLight=Jt.prototype.a3DOnlyFunction,ti.prototype.spotLight=function(e,t,i,r,s,a,o,h,l,c,u){if(ft===n.MAX_LIGHTS)throw"can only create "+n.MAX_LIGHTS+" lights";y.useProgram(T);var p=new $(r,s,a),f=new ui;f.scale(1,-1,1),f.apply(ot.array()),f.mult(p,p);var d=[(f=f.array())[0]*o+f[4]*h+f[8]*l,f[1]*o+f[5]*h+f[9]*l,f[2]*o+f[6]*h+f[10]*l],m=fi(e,t,i,0);zt("lights.color.3d."+ft,T,"lights"+ft+".color",[((m&n.RED_MASK)>>>16)/255,((m&n.GREEN_MASK)>>>8)/255,(m&n.BLUE_MASK)/255]),zt("lights.position.3d."+ft,T,"lights"+ft+".position",p.array()),zt("lights.direction.3d."+ft,T,"lights"+ft+".direction",d),zt("lights.concentration.3d."+ft,T,"lights"+ft+".concentration",u),zt("lights.angle.3d."+ft,T,"lights"+ft+".angle",c),Kt("lights.type.3d."+ft,T,"lights"+ft+".type",3),Kt("lightCount3d",T,"lightCount",++ft)},ei.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode"},ti.prototype.beginCamera=function(){if(wt)throw"You cannot call beginCamera() again before calling endCamera()";wt=!0,ot=at,ht=nt},ei.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode"},ti.prototype.endCamera=function(){if(!wt)throw"You cannot call endCamera() before calling beginCamera()";ot.set(nt),ht.set(at),wt=!1},v.camera=function(e,t,i,r,s,n,a,o,h){void 0===e&&(_t=v.width/2,St=v.height/2,At=St/v.tan(Et/2),e=_t,t=St,i=At,r=_t,s=St,n=0,a=0,o=1,h=0);var l=new $(e-r,t-s,i-n),c=new $(a,o,h);l.normalize();var u=$.cross(c,l);c=$.cross(l,u),u.normalize(),c.normalize();var p=u.x,f=u.y,d=u.z,m=c.x,g=c.y,y=c.z,x=l.x,b=l.y,w=l.z;nt.set(p,f,d,0,m,g,y,0,x,b,w,0,0,0,0,1),nt.translate(-e,-t,-i),at.reset(),at.invApply(p,f,d,0,m,g,y,0,x,b,w,0,0,0,0,1),at.translate(e,t,i),ot.set(nt),ht.set(at)},v.perspective=function(e,t,i,r){var s,n,a,o;0===arguments.length&&(St=p.height/2,At=St/v.tan(Et/2),Ct=At/10,kt=10*At,Tt=v.width/v.height,e=Et,t=Tt,i=Ct,r=kt),a=(s=i*v.tan(e/2))*t,o=(n=-s)*t,v.frustum(o,a,n,s,i,r)},ei.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode"},ti.prototype.frustum=function(e,t,i,r,s,n){(pt=new ui).set(2*s/(t-e),0,(t+e)/(t-e),0,0,2*s/(r-i),(r+i)/(r-i),0,0,0,-(n+s)/(n-s),-2*n*s/(n-s),0,0,-1,0);var a=new ui;a.set(pt),a.transpose(),y.useProgram(P),jt("projection2d",P,"projection",!1,a.array()),y.useProgram(T),jt("projection3d",T,"projection",!1,a.array()),y.useProgram(R),jt("uProjectionUS",R,"uProjection",!1,a.array())},v.ortho=function(e,t,i,r,s,n){0===arguments.length&&(e=0,t=v.width,i=0,r=v.height,s=-10,n=10);var a=2/(t-e),o=2/(r-i),h=-2/(n-s),l=-(t+e)/(t-e),c=-(r+i)/(r-i),u=-(n+s)/(n-s);(pt=new ui).set(a,0,0,l,0,o,0,c,0,0,h,u,0,0,0,1);var p=new ui;p.set(pt),p.transpose(),y.useProgram(P),jt("projection2d",P,"projection",!1,p.array()),y.useProgram(T),jt("projection3d",T,"projection",!1,p.array()),y.useProgram(R),jt("uProjectionUS",R,"uProjection",!1,p.array())},v.printProjection=function(){pt.print()},v.printCamera=function(){nt.print()},ei.prototype.box=Jt.prototype.a3DOnlyFunction,ti.prototype.box=function(e,t,i){t&&i||(t=i=e);var r=new ui;r.scale(e,t,i);var s=new ui;if(s.scale(1,-1,1),s.apply(ot.array()),s.transpose(),Q){if(y.useProgram(T),jt("model3d",T,"model",!1,r.array()),jt("view3d",T,"view",!1,s.array()),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),zt("color3d",T,"color",Z),ft>0){var n=new ui;n.set(s);var a=new ui;a.set(r),n.mult(a);var o=new ui;o.set(n),o.invert(),o.transpose(),jt("normalTransform3d",T,"normalTransform",!1,o.array()),Wt("normal3d",T,"Normal",3,L)}else qt("normal3d",T,"Normal");Wt("vertex3d",T,"Vertex",3,I),qt("aColor3d",T,"aColor"),qt("aTexture3d",T,"aTexture"),y.drawArrays(y.TRIANGLES,0,Ft.length/3),y.disable(y.POLYGON_OFFSET_FILL)}oe>0&&ie&&(y.useProgram(P),jt("model2d",P,"model",!1,r.array()),jt("view2d",P,"view",!1,s.array()),zt("color2d",P,"color",re),Kt("picktype2d",P,"picktype",0),Wt("vertex2d",P,"Vertex",3,N),qt("aTextureCoord2d",P,"aTextureCoord"),y.drawArrays(y.LINES,0,Vt.length/3))},v.sphereDetail=function(e,t){var i;if(1===arguments.length&&(e=t=arguments[0]),e<3&&(e=3),t<2&&(t=2),e!==mt||t!==dt){var r=n.SINCOS_LENGTH/e,s=new Float32Array(e),a=new Float32Array(e);for(i=0;i<e;i++)s[i]=bt[i*r%n.SINCOS_LENGTH|0],a[i]=xt[i*r%n.SINCOS_LENGTH|0];var o=e*(t-1)+2,h=0;gt=new Float32Array(o),vt=new Float32Array(o),yt=new Float32Array(o);var l=.5*n.SINCOS_LENGTH/t,c=l;for(i=1;i<t;i++){for(var u=xt[c%n.SINCOS_LENGTH|0],p=-bt[c%n.SINCOS_LENGTH|0],f=0;f<e;f++)gt[h]=s[f]*u,vt[h]=p,yt[h++]=a[f]*u;c+=l}mt=e,dt=t,function(){var e,t,i,r;for(st=[],e=0;e<mt;e++)st.push(0),st.push(-1),st.push(0),st.push(gt[e]),st.push(vt[e]),st.push(yt[e]);st.push(0),st.push(-1),st.push(0),st.push(gt[0]),st.push(vt[0]),st.push(yt[0]);var s=0;for(e=2;e<dt;e++){t=i=s,r=s+=mt;for(var n=0;n<mt;n++)st.push(gt[t]),st.push(vt[t]),st.push(yt[t++]),st.push(gt[r]),st.push(vt[r]),st.push(yt[r++]);t=i,r=s,st.push(gt[t]),st.push(vt[t]),st.push(yt[t]),st.push(gt[r]),st.push(vt[r]),st.push(yt[r])}for(e=0;e<mt;e++)r=s+e,st.push(gt[r]),st.push(vt[r]),st.push(yt[r]),st.push(0),st.push(1),st.push(0);st.push(gt[s]),st.push(vt[s]),st.push(yt[s]),st.push(0),st.push(1),st.push(0),y.bindBuffer(y.ARRAY_BUFFER,M),y.bufferData(y.ARRAY_BUFFER,new Float32Array(st),y.STATIC_DRAW)}()}},ei.prototype.sphere=Jt.prototype.a3DOnlyFunction,ti.prototype.sphere=function(){var e=arguments[0];(mt<3||dt<2)&&v.sphereDetail(30);var t=new ui;t.scale(e,e,e);var i=new ui;if(i.scale(1,-1,1),i.apply(ot.array()),i.transpose(),Q){if(ft>0){var r=new ui;r.set(i);var s=new ui;s.set(t),r.mult(s);var n=new ui;n.set(r),n.invert(),n.transpose(),jt("normalTransform3d",T,"normalTransform",!1,n.array()),Wt("normal3d",T,"Normal",3,M)}else qt("normal3d",T,"Normal");y.useProgram(T),qt("aTexture3d",T,"aTexture"),jt("model3d",T,"model",!1,t.array()),jt("view3d",T,"view",!1,i.array()),Wt("vertex3d",T,"Vertex",3,M),qt("aColor3d",T,"aColor"),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),zt("color3d",T,"color",Z),y.drawArrays(y.TRIANGLE_STRIP,0,st.length/3),y.disable(y.POLYGON_OFFSET_FILL)}oe>0&&ie&&(y.useProgram(P),jt("model2d",P,"model",!1,t.array()),jt("view2d",P,"view",!1,i.array()),Wt("vertex2d",P,"Vertex",3,M),qt("aTextureCoord2d",P,"aTextureCoord"),zt("color2d",P,"color",re),Kt("picktype2d",P,"picktype",0),y.drawArrays(y.LINE_STRIP,0,st.length/3))},v.modelX=function(e,t,i){var r=ot.array(),s=at.array(),n=r[0]*e+r[1]*t+r[2]*i+r[3],a=r[4]*e+r[5]*t+r[6]*i+r[7],o=r[8]*e+r[9]*t+r[10]*i+r[11],h=r[12]*e+r[13]*t+r[14]*i+r[15],l=s[0]*n+s[1]*a+s[2]*o+s[3]*h,c=s[12]*n+s[13]*a+s[14]*o+s[15]*h;return 0!==c?l/c:l},v.modelY=function(e,t,i){var r=ot.array(),s=at.array(),n=r[0]*e+r[1]*t+r[2]*i+r[3],a=r[4]*e+r[5]*t+r[6]*i+r[7],o=r[8]*e+r[9]*t+r[10]*i+r[11],h=r[12]*e+r[13]*t+r[14]*i+r[15],l=s[4]*n+s[5]*a+s[6]*o+s[7]*h,c=s[12]*n+s[13]*a+s[14]*o+s[15]*h;return 0!==c?l/c:l},v.modelZ=function(e,t,i){var r=ot.array(),s=at.array(),n=r[0]*e+r[1]*t+r[2]*i+r[3],a=r[4]*e+r[5]*t+r[6]*i+r[7],o=r[8]*e+r[9]*t+r[10]*i+r[11],h=r[12]*e+r[13]*t+r[14]*i+r[15],l=s[8]*n+s[9]*a+s[10]*o+s[11]*h,c=s[12]*n+s[13]*a+s[14]*o+s[15]*h;return 0!==c?l/c:l},ei.prototype.ambient=Jt.prototype.a3DOnlyFunction,ti.prototype.ambient=function(e,t,i){y.useProgram(T),Kt("usingMat3d",T,"usingMat",!0);var r=v.color(e,t,i);zt("mat_ambient3d",T,"mat_ambient",v.color.toGLArray(r).slice(0,3))},ei.prototype.emissive=Jt.prototype.a3DOnlyFunction,ti.prototype.emissive=function(e,t,i){y.useProgram(T),Kt("usingMat3d",T,"usingMat",!0);var r=v.color(e,t,i);zt("mat_emissive3d",T,"mat_emissive",v.color.toGLArray(r).slice(0,3))},ei.prototype.shininess=Jt.prototype.a3DOnlyFunction,ti.prototype.shininess=function(e){y.useProgram(T),Kt("usingMat3d",T,"usingMat",!0),zt("shininess3d",T,"shininess",e)},ei.prototype.specular=Jt.prototype.a3DOnlyFunction,ti.prototype.specular=function(e,t,i){y.useProgram(T),Kt("usingMat3d",T,"usingMat",!0);var r=v.color(e,t,i);zt("mat_specular3d",T,"mat_specular",v.color.toGLArray(r).slice(0,3))},v.screenX=function(e,t,i){var r=ot.array();if(16===r.length){var s=r[0]*e+r[1]*t+r[2]*i+r[3],n=r[4]*e+r[5]*t+r[6]*i+r[7],a=r[8]*e+r[9]*t+r[10]*i+r[11],o=r[12]*e+r[13]*t+r[14]*i+r[15],h=pt.array(),l=h[0]*s+h[1]*n+h[2]*a+h[3]*o,c=h[12]*s+h[13]*n+h[14]*a+h[15]*o;return 0!==c&&(l/=c),v.width*(1+l)/2}return ot.multX(e,t)},v.screenY=function(e,t,i){var r=ot.array();if(16===r.length){var s=r[0]*e+r[1]*t+r[2]*i+r[3],n=r[4]*e+r[5]*t+r[6]*i+r[7],a=r[8]*e+r[9]*t+r[10]*i+r[11],o=r[12]*e+r[13]*t+r[14]*i+r[15],h=pt.array(),l=h[4]*s+h[5]*n+h[6]*a+h[7]*o,c=h[12]*s+h[13]*n+h[14]*a+h[15]*o;return 0!==c&&(l/=c),v.height*(1+l)/2}return ot.multY(e,t)},v.screenZ=function(e,t,i){var r=ot.array();if(16!==r.length)return 0;var s=pt.array(),n=r[0]*e+r[1]*t+r[2]*i+r[3],a=r[4]*e+r[5]*t+r[6]*i+r[7],o=r[8]*e+r[9]*t+r[10]*i+r[11],h=r[12]*e+r[13]*t+r[14]*i+r[15],l=s[8]*n+s[9]*a+s[10]*o+s[11]*h,c=s[12]*n+s[13]*a+s[14]*o+s[15]*h;return 0!==c&&(l/=c),(l+1)/2},Jt.prototype.fill=function(e,t,i,r){var s=v.color(e,t,i,r);s===J&&Q||(Q=!0,J=s,ee=v.color.toString(s))},ei.prototype.fill=function(){Jt.prototype.fill.apply(this,arguments),te=!0},ti.prototype.fill=function(){Jt.prototype.fill.apply(this,arguments),Z=v.color.toGLArray(J)},v.noFill=function(){Q=!1},Jt.prototype.stroke=function(e,t,i,r){var s=v.color(e,t,i,r);s===se&&ie||(ie=!0,se=s,ne=v.color.toString(s))},ei.prototype.stroke=function(){Jt.prototype.stroke.apply(this,arguments),ae=!0},ti.prototype.stroke=function(){Jt.prototype.stroke.apply(this,arguments),re=v.color.toGLArray(se)},v.noStroke=function(){ie=!1},Jt.prototype.strokeWeight=function(e){oe=e},ei.prototype.strokeWeight=function(e){Jt.prototype.strokeWeight.apply(this,arguments),y.lineWidth=e},ti.prototype.strokeWeight=function(e){Jt.prototype.strokeWeight.apply(this,arguments),y.useProgram(P),zt("pointSize2d",P,"pointSize",e),y.useProgram(R),zt("pointSizeUnlitShape",R,"pointSize",e),y.lineWidth(e)},v.strokeCap=function(e){b.$ensureContext().lineCap=e},v.strokeJoin=function(e){b.$ensureContext().lineJoin=e},ei.prototype.smooth=function(){le=!0;var e=p.style;e.setProperty("image-rendering","optimizeQuality","important"),e.setProperty("-ms-interpolation-mode","bicubic","important"),y.hasOwnProperty("mozImageSmoothingEnabled")&&(y.mozImageSmoothingEnabled=!0)},ti.prototype.smooth=r,ei.prototype.noSmooth=function(){le=!1;var e=p.style;e.setProperty("image-rendering","optimizeSpeed","important"),e.setProperty("image-rendering","-moz-crisp-edges","important"),e.setProperty("image-rendering","-webkit-optimize-contrast","important"),e.setProperty("image-rendering","optimize-contrast","important"),e.setProperty("-ms-interpolation-mode","nearest-neighbor","important"),y.hasOwnProperty("mozImageSmoothingEnabled")&&(y.mozImageSmoothingEnabled=!1)},ti.prototype.noSmooth=r,ei.prototype.point=function(e,t){ie&&(le||(e=i.round(e),t=i.round(t)),y.fillStyle=v.color.toString(se),te=!0,oe>1?(y.beginPath(),y.arc(e,t,oe/2,0,n.TWO_PI,!1),y.fill()):y.fillRect(e,t,1,1))},ti.prototype.point=function(e,t,i){var r=new ui;r.translate(e,t,i||0),r.transpose();var s=new ui;s.scale(1,-1,1),s.apply(ot.array()),s.transpose(),y.useProgram(P),jt("model2d",P,"model",!1,r.array()),jt("view2d",P,"view",!1,s.array()),oe>0&&ie&&(zt("color2d",P,"color",re),Kt("picktype2d",P,"picktype",0),Wt("vertex2d",P,"Vertex",3,U),qt("aTextureCoord2d",P,"aTextureCoord"),y.drawArrays(y.POINTS,0,1))},v.beginShape=function(e){we=e,Pt=[]},ei.prototype.vertex=function(e,t,i,r){var s=[];Dt&&(Dt=!1),s.isVert=!0,s[0]=e,s[1]=t,s[2]=0,s[3]=i,s[4]=r,s[5]=J,s[6]=se,Pt.push(s)},ti.prototype.vertex=function(e,t,i,r,s){var a=[];Dt&&(Dt=!1),a.isVert=!0,void 0===s&&He&&(s=r,r=i,i=0),void 0!==r&&void 0!==s&&(Ue===n.IMAGE&&(r/=Ge.width,s/=Ge.height),r=(r=r>1?1:r)<0?0:r,s=(s=s>1?1:s)<0?0:s),a[0]=e,a[1]=t,a[2]=i||0,a[3]=r||0,a[4]=s||0,a[5]=Z[0],a[6]=Z[1],a[7]=Z[2],a[8]=Z[3],a[9]=re[0],a[10]=re[1],a[11]=re[2],a[12]=re[3],a[13]=de,a[14]=me,a[15]=ge,Pt.push(a)};var Fi=function(e,t){var i=new ui;i.scale(1,-1,1),i.apply(ot.array()),i.transpose(),y.useProgram(R),jt("uViewUS",R,"uView",!1,i.array()),Wt("aVertexUS",R,"aVertex",3,U),y.bufferData(y.ARRAY_BUFFER,new Float32Array(e),y.STREAM_DRAW),Wt("aColorUS",R,"aColor",4,B),y.bufferData(y.ARRAY_BUFFER,new Float32Array(t),y.STREAM_DRAW),y.drawArrays(y.POINTS,0,e.length/3)},Vi=function(e,t,i){var r;r="LINES"===t?y.LINES:"LINE_LOOP"===t?y.LINE_LOOP:y.LINE_STRIP;var s=new ui;s.scale(1,-1,1),s.apply(ot.array()),s.transpose(),y.useProgram(R),jt("uViewUS",R,"uView",!1,s.array()),Wt("aVertexUS",R,"aVertex",3,F),y.bufferData(y.ARRAY_BUFFER,new Float32Array(e),y.STREAM_DRAW),Wt("aColorUS",R,"aColor",4,G),y.bufferData(y.ARRAY_BUFFER,new Float32Array(i),y.STREAM_DRAW),y.drawArrays(r,0,e.length/3)},Bi=function(e,t,i,r){var s;s="TRIANGLES"===t?y.TRIANGLES:"TRIANGLE_FAN"===t?y.TRIANGLE_FAN:y.TRIANGLE_STRIP;var n=new ui;n.scale(1,-1,1),n.apply(ot.array()),n.transpose(),y.useProgram(T),jt("model3d",T,"model",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),jt("view3d",T,"view",!1,n.array()),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),zt("color3d",T,"color",[-1,0,0,0]),Wt("vertex3d",T,"Vertex",3,V),y.bufferData(y.ARRAY_BUFFER,new Float32Array(e),y.STREAM_DRAW),He&&null!==De&&Oe(i),Wt("aColor3d",T,"aColor",4,B),y.bufferData(y.ARRAY_BUFFER,new Float32Array(i),y.STREAM_DRAW),qt("normal3d",T,"Normal"),He&&(Kt("usingTexture3d",T,"usingTexture",He),Wt("aTexture3d",T,"aTexture",2,H),y.bufferData(y.ARRAY_BUFFER,new Float32Array(r),y.STREAM_DRAW)),y.drawArrays(s,0,e.length/3),y.disable(y.POLYGON_OFFSET_FILL)};function Gi(){Oi(),Mi(),y.closePath()}ei.prototype.endShape=function(e){if(0!==Pt.length){var t,i,r,s=e===n.CLOSE;s&&Pt.push(Pt[0]),Dt=!0;var a=Pt.length;if(!Lt||we!==n.POLYGON&&void 0!==we)if(!Nt||we!==n.POLYGON&&void 0!==we)if(we===n.POINTS)for(i=0;i<a;i++)t=Pt[i],ie&&v.stroke(t[6]),v.point(t[0],t[1]);else if(we===n.LINES)for(i=0;i+1<a;i+=2)t=Pt[i],ie&&v.stroke(Pt[i+1][6]),v.line(t[0],t[1],Pt[i+1][0],Pt[i+1][1]);else if(we===n.TRIANGLES)for(i=0;i+2<a;i+=3)t=Pt[i],y.beginPath(),y.moveTo(t[0],t[1]),y.lineTo(Pt[i+1][0],Pt[i+1][1]),y.lineTo(Pt[i+2][0],Pt[i+2][1]),y.lineTo(t[0],t[1]),Q&&(v.fill(Pt[i+2][5]),Oi()),ie&&(v.stroke(Pt[i+2][6]),Mi()),y.closePath();else if(we===n.TRIANGLE_STRIP)for(i=0;i+1<a;i++)t=Pt[i],y.beginPath(),y.moveTo(Pt[i+1][0],Pt[i+1][1]),y.lineTo(t[0],t[1]),ie&&v.stroke(Pt[i+1][6]),Q&&v.fill(Pt[i+1][5]),i+2<a&&(y.lineTo(Pt[i+2][0],Pt[i+2][1]),ie&&v.stroke(Pt[i+2][6]),Q&&v.fill(Pt[i+2][5])),Gi();else if(we===n.TRIANGLE_FAN){if(a>2)for(y.beginPath(),y.moveTo(Pt[0][0],Pt[0][1]),y.lineTo(Pt[1][0],Pt[1][1]),y.lineTo(Pt[2][0],Pt[2][1]),Q&&(v.fill(Pt[2][5]),Oi()),ie&&(v.stroke(Pt[2][6]),Mi()),y.closePath(),i=3;i<a;i++)t=Pt[i],y.beginPath(),y.moveTo(Pt[0][0],Pt[0][1]),y.lineTo(Pt[i-1][0],Pt[i-1][1]),y.lineTo(t[0],t[1]),Q&&(v.fill(t[5]),Oi()),ie&&(v.stroke(t[6]),Mi()),y.closePath()}else if(we===n.QUADS)for(i=0;i+3<a;i+=4){for(t=Pt[i],y.beginPath(),y.moveTo(t[0],t[1]),r=1;r<4;r++)y.lineTo(Pt[i+r][0],Pt[i+r][1]);y.lineTo(t[0],t[1]),Q&&(v.fill(Pt[i+3][5]),Oi()),ie&&(v.stroke(Pt[i+3][6]),Mi()),y.closePath()}else if(we===n.QUAD_STRIP){if(a>3)for(i=0;i+1<a;i+=2)t=Pt[i],y.beginPath(),i+3<a?(y.moveTo(Pt[i+2][0],Pt[i+2][1]),y.lineTo(t[0],t[1]),y.lineTo(Pt[i+1][0],Pt[i+1][1]),y.lineTo(Pt[i+3][0],Pt[i+3][1]),Q&&v.fill(Pt[i+3][5]),ie&&v.stroke(Pt[i+3][6])):(y.moveTo(t[0],t[1]),y.lineTo(Pt[i+1][0],Pt[i+1][1])),Gi()}else{for(y.beginPath(),y.moveTo(Pt[0][0],Pt[0][1]),i=1;i<a;i++)(t=Pt[i]).isVert&&(t.moveTo?y.moveTo(t[0],t[1]):y.lineTo(t[0],t[1]));Gi()}else{for(y.beginPath(),i=0;i<a;i++)t=Pt[i],Pt[i].isVert?Pt[i].moveTo?y.moveTo(t[0],t[1]):y.lineTo(t[0],t[1]):y.bezierCurveTo(Pt[i][0],Pt[i][1],Pt[i][2],Pt[i][3],Pt[i][4],Pt[i][5]);Gi()}else if(a>3){var o=[],h=1-Ee;for(y.beginPath(),y.moveTo(Pt[1][0],Pt[1][1]),i=1;i+2<a;i++)t=Pt[i],o[0]=[t[0],t[1]],o[1]=[t[0]+(h*Pt[i+1][0]-h*Pt[i-1][0])/6,t[1]+(h*Pt[i+1][1]-h*Pt[i-1][1])/6],o[2]=[Pt[i+1][0]+(h*Pt[i][0]-h*Pt[i+2][0])/6,Pt[i+1][1]+(h*Pt[i][1]-h*Pt[i+2][1])/6],o[3]=[Pt[i+1][0],Pt[i+1][1]],y.bezierCurveTo(o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]);Gi()}Lt=!1,Nt=!1,Rt=[],It=0,s&&Pt.pop()}},ti.prototype.endShape=function(e){if(0!==Pt.length){var t,i,r,s,a=e===n.CLOSE,o=[],h=[],l=[],c=[],u=[];Dt=!0;var p=Pt.length;for(i=0;i<p;i++)for(t=Pt[i],r=0;r<3;r++)h.push(t[r]);for(i=0;i<p;i++)for(t=Pt[i],r=5;r<9;r++)l.push(t[r]);for(i=0;i<p;i++)for(t=Pt[i],r=9;r<13;r++)c.push(t[r]);for(i=0;i<p;i++)t=Pt[i],u.push(t[3]),u.push(t[4]);if(a){for(h.push(Pt[0][0]),h.push(Pt[0][1]),h.push(Pt[0][2]),i=5;i<9;i++)l.push(Pt[0][i]);for(i=9;i<13;i++)c.push(Pt[0][i]);u.push(Pt[0][3]),u.push(Pt[0][4])}if(!Lt||we!==n.POLYGON&&void 0!==we)if(!Nt||we!==n.POLYGON&&void 0!==we){if(we===n.POINTS){for(i=0;i<p;i++)for(t=Pt[i],r=0;r<3;r++)o.push(t[r]);Fi(o,c)}else if(we===n.LINES){for(i=0;i<p;i++)for(t=Pt[i],r=0;r<3;r++)o.push(t[r]);for(i=0;i<p;i++)for(t=Pt[i],r=5;r<9;r++)l.push(t[r]);Vi(o,"LINES",c)}else if(we===n.TRIANGLES){if(p>2){for(h=[],u=[],o=[],l=[],c=[],i=0;i+2<p;i+=3){for(r=0;r<3;r++)for(s=0;s<3;s++)o.push(Pt[i+r][s]),h.push(Pt[i+r][s]);for(r=0;r<3;r++)for(s=3;s<5;s++)u.push(Pt[i+r][s]);for(r=0;r<3;r++)for(s=5;s<9;s++)l.push(Pt[i+r][s]),c.push(Pt[i+r][s+4])}ie&&Vi(o,"LINES",c),(Q||He)&&Bi(h,"TRIANGLES",l,u)}}else if(we===n.TRIANGLE_STRIP){if(p>2){for(o=[],h=[],c=[],l=[],u=[],i=0;i+2<p;i++){for(r=0;r<3;r++)for(s=0;s<3;s++)o.push(Pt[i+r][s]),h.push(Pt[i+r][s]);for(r=0;r<3;r++)for(s=3;s<5;s++)u.push(Pt[i+r][s]);for(r=0;r<3;r++)for(s=5;s<9;s++)c.push(Pt[i+r][s+4]),l.push(Pt[i+r][s])}(Q||He)&&Bi(h,"TRIANGLE_STRIP",l,u),ie&&Vi(o,"LINES",c)}}else if(we===n.TRIANGLE_FAN){if(p>2){for(i=0;i<3;i++)for(t=Pt[i],r=0;r<3;r++)o.push(t[r]);for(i=0;i<3;i++)for(t=Pt[i],r=9;r<13;r++)c.push(t[r]);for(ie&&Vi(o,"LINE_LOOP",c),o=[],c=[],i=2;i+1<p;i++){for(o.push(Pt[0][0]),o.push(Pt[0][1]),o.push(Pt[0][2]),c.push(Pt[0][9]),c.push(Pt[0][10]),c.push(Pt[0][11]),c.push(Pt[0][12]),r=0;r<2;r++)for(s=0;s<3;s++)o.push(Pt[i+r][s]);for(r=0;r<2;r++)for(s=9;s<13;s++)c.push(Pt[i+r][s])}ie&&Vi(o,"LINES",c),(Q||He)&&Bi(h,"TRIANGLE_FAN",l,u)}}else if(we===n.QUADS)for(i=0;i+3<p;i+=4){for(o=[],r=0;r<4;r++)for(t=Pt[i+r],s=0;s<3;s++)o.push(t[s]);if(ie&&Vi(o,"LINE_LOOP",c),Q){for(h=[],l=[],u=[],r=0;r<3;r++)h.push(Pt[i][r]);for(r=5;r<9;r++)l.push(Pt[i][r]);for(r=0;r<3;r++)h.push(Pt[i+1][r]);for(r=5;r<9;r++)l.push(Pt[i+1][r]);for(r=0;r<3;r++)h.push(Pt[i+3][r]);for(r=5;r<9;r++)l.push(Pt[i+3][r]);for(r=0;r<3;r++)h.push(Pt[i+2][r]);for(r=5;r<9;r++)l.push(Pt[i+2][r]);He&&(u.push(Pt[i+0][3]),u.push(Pt[i+0][4]),u.push(Pt[i+1][3]),u.push(Pt[i+1][4]),u.push(Pt[i+3][3]),u.push(Pt[i+3][4]),u.push(Pt[i+2][3]),u.push(Pt[i+2][4])),Bi(h,"TRIANGLE_STRIP",l,u)}}else if(we===n.QUAD_STRIP){if(p>3){for(i=0;i<2;i++)for(t=Pt[i],r=0;r<3;r++)o.push(t[r]);for(i=0;i<2;i++)for(t=Pt[i],r=9;r<13;r++)c.push(t[r]);for(Vi(o,"LINE_STRIP",c),p>4&&p%2>0&&(h.splice(h.length-3),Pt.pop()),o=[],c=[],i=0;i+3<p;i+=2){for(r=0;r<3;r++)o.push(Pt[i+1][r]);for(r=0;r<3;r++)o.push(Pt[i+3][r]);for(r=0;r<3;r++)o.push(Pt[i+2][r]);for(r=0;r<3;r++)o.push(Pt[i+0][r]);for(r=9;r<13;r++)c.push(Pt[i+1][r]);for(r=9;r<13;r++)c.push(Pt[i+3][r]);for(r=9;r<13;r++)c.push(Pt[i+2][r]);for(r=9;r<13;r++)c.push(Pt[i+0][r])}ie&&Vi(o,"LINES",c),(Q||He)&&Bi(h,"TRIANGLE_LIST",l,u)}}else if(1===p){for(r=0;r<3;r++)o.push(Pt[0][r]);for(r=9;r<13;r++)c.push(Pt[0][r]);Fi(o,c)}else{for(i=0;i<p;i++){for(t=Pt[i],r=0;r<3;r++)o.push(t[r]);for(r=5;r<9;r++)c.push(t[r])}ie&&a?Vi(o,"LINE_LOOP",c):ie&&!a&&Vi(o,"LINE_STRIP",c),(Q||He)&&Bi(h,"TRIANGLE_FAN",l,u)}He=!1,y.useProgram(T),Kt("usingTexture3d",T,"usingTexture",He)}else(o=h).splice(o.length-3),c.splice(c.length-4),ie&&Vi(o,null,c),Q&&Bi(h,"TRIANGLES",l);else o=h,ie&&Vi(o,null,c),Q&&Bi(h,null,l);Lt=!1,Nt=!1,Rt=[],It=0}};var Ui=function(e,t){var i=1/e,r=i*i,s=r*i;t.set(0,0,0,1,s,r,i,0,6*s,2*r,0,0,6*s,0,0,0)},Hi=function(){S||(E=new ui,S=new ui,Se=!0);var e=Ee;E.set((e-1)/2,(e+3)/2,(-3-e)/2,(1-e)/2,1-e,(-5-e)/2,e+2,(e-1)/2,(e-1)/2,0,(1-e)/2,0,0,1,0,0),Ui(_e,S),C||(_=new ui),_.set(E),_.preApply(C),S.apply(E)};ei.prototype.bezierVertex=function(){Nt=!0;var e=[];if(Dt)throw"vertex() must be used at least once before calling bezierVertex()";for(var t=0;t<arguments.length;t++)e[t]=arguments[t];Pt.push(e),Pt[Pt.length-1].isVert=!1},ti.prototype.bezierVertex=function(){if(Nt=!0,Dt)throw"vertex() must be used at least once before calling bezierVertex()";if(9===arguments.length){void 0===A&&(A=new ui);var e=Pt.length-1;Ui(Ce,A),A.apply(k);for(var t=A.array(),i=Pt[e][0],r=Pt[e][1],s=Pt[e][2],n=t[4]*i+t[5]*arguments[0]+t[6]*arguments[3]+t[7]*arguments[6],a=t[8]*i+t[9]*arguments[0]+t[10]*arguments[3]+t[11]*arguments[6],o=t[12]*i+t[13]*arguments[0]+t[14]*arguments[3]+t[15]*arguments[6],h=t[4]*r+t[5]*arguments[1]+t[6]*arguments[4]+t[7]*arguments[7],l=t[8]*r+t[9]*arguments[1]+t[10]*arguments[4]+t[11]*arguments[7],c=t[12]*r+t[13]*arguments[1]+t[14]*arguments[4]+t[15]*arguments[7],u=t[4]*s+t[5]*arguments[2]+t[6]*arguments[5]+t[7]*arguments[8],p=t[8]*s+t[9]*arguments[2]+t[10]*arguments[5]+t[11]*arguments[8],f=t[12]*s+t[13]*arguments[2]+t[14]*arguments[5]+t[15]*arguments[8],d=0;d<Ce;d++)i+=n,n+=a,a+=o,r+=h,h+=l,l+=c,s+=u,u+=p,p+=f,v.vertex(i,r,s);v.vertex(arguments[6],arguments[7],arguments[8])}},v.texture=function(e){var i=b.$ensureContext();if(e.__texture)i.bindTexture(i.TEXTURE_2D,e.__texture);else if("canvas"===e.localName)i.bindTexture(i.TEXTURE_2D,z),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.generateMipmap(i.TEXTURE_2D),Ge.width=e.width,Ge.height=e.height;else{var r,s=i.createTexture(),n=t.createElement("canvas"),a=n.getContext("2d");if(e.width&e.width-1==0)n.width=e.width;else{for(r=1;r<e.width;)r*=2;n.width=r}if(e.height&e.height-1==0)n.height=e.height;else{for(r=1;r<e.height;)r*=2;n.height=r}a.drawImage(e.sourceImg,0,0,e.width,e.height,0,0,n.width,n.height),i.bindTexture(i.TEXTURE_2D,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),i.generateMipmap(i.TEXTURE_2D),e.__texture=s,Ge.width=e.width,Ge.height=e.height}He=!0,i.useProgram(T),Kt("usingTexture3d",T,"usingTexture",He)},v.textureMode=function(e){Ue=e},ei.prototype.curveVertex=function(e,t){Lt=!0,v.vertex(e,t)},ti.prototype.curveVertex=function(e,t,i){Lt=!0,Se||Hi();var r=[];r[0]=e,r[1]=t,r[2]=i,Rt.push(r),++It>3&&function(e,t,i,r,s,n,a,o,h,l,c,u){var p=r,f=s,d=n,m=S.array(),g=m[4]*e+m[5]*r+m[6]*a+m[7]*l,y=m[8]*e+m[9]*r+m[10]*a+m[11]*l,x=m[12]*e+m[13]*r+m[14]*a+m[15]*l,b=m[4]*t+m[5]*s+m[6]*o+m[7]*c,w=m[8]*t+m[9]*s+m[10]*o+m[11]*c,E=m[12]*t+m[13]*s+m[14]*o+m[15]*c,_=m[4]*i+m[5]*n+m[6]*h+m[7]*u,A=m[8]*i+m[9]*n+m[10]*h+m[11]*u,C=m[12]*i+m[13]*n+m[14]*h+m[15]*u;v.vertex(p,f,d);for(var k=0;k<_e;k++)p+=g,g+=y,y+=x,f+=b,b+=w,w+=E,d+=_,_+=A,A+=C,v.vertex(p,f,d)}(Rt[It-4][0],Rt[It-4][1],Rt[It-4][2],Rt[It-3][0],Rt[It-3][1],Rt[It-3][2],Rt[It-2][0],Rt[It-2][1],Rt[It-2][2],Rt[It-1][0],Rt[It-1][1],Rt[It-1][2])},ei.prototype.curve=function(){8===arguments.length&&(v.beginShape(),v.curveVertex(arguments[0],arguments[1]),v.curveVertex(arguments[2],arguments[3]),v.curveVertex(arguments[4],arguments[5]),v.curveVertex(arguments[6],arguments[7]),v.endShape())},ti.prototype.curve=function(){12===arguments.length&&(v.beginShape(),v.curveVertex(arguments[0],arguments[1],arguments[2]),v.curveVertex(arguments[3],arguments[4],arguments[5]),v.curveVertex(arguments[6],arguments[7],arguments[8]),v.curveVertex(arguments[9],arguments[10],arguments[11]),v.endShape())},v.curveTightness=function(e){Ee=e},v.curveDetail=function(e){_e=e,Hi()},v.rectMode=function(e){pe=e},v.imageMode=function(e){switch(e){case n.CORNER:$t=Yt;break;case n.CORNERS:$t=Qt;break;case n.CENTER:$t=Zt;break;default:throw"Invalid imageMode"}},v.ellipseMode=function(e){fe=e},v.arc=function(e,t,i,r,s,a){if(!(i<=0||a<s)){for(s=v.convertToRadians(s),a=v.convertToRadians(a),fe===n.CORNERS?(i-=e,r-=t):fe===n.RADIUS?(e-=i,t-=r,i*=2,r*=2):fe===n.CENTER&&(e-=i/2,t-=r/2);s<0;)s+=n.TWO_PI,a+=n.TWO_PI;a-s>n.TWO_PI&&(s=0,a=n.TWO_PI);var o,h,l=i/2,c=r/2,u=e+l,p=t+c,f=0|s*v.RAD_TO_DEG-.5,d=0|.5+a*v.RAD_TO_DEG;if(Q){var m=ie;for(ie=!1,v.beginShape(),v.vertex(u,p),o=f;o<=d;o++)h=o%n.SINCOS_LENGTH,v.vertex(u+bt[h]*l,p+xt[h]*c);v.endShape(n.CLOSE),ie=m}if(ie){var g=Q;for(Q=!1,v.beginShape(),o=f;o<=d;o++)h=o%n.SINCOS_LENGTH,v.vertex(u+bt[h]*l,p+xt[h]*c);v.endShape(),Q=g}}},ei.prototype.line=function(e,t,r,s){if(ie)if(le||(e=i.round(e),r=i.round(r),t=i.round(t),s=i.round(s)),e!==r||t!==s){for(var n=void 0,a=void 0,o=!0,h=ot.array(),l=[1,0,0,0,1,0],c=0;c<6&&o;c++)o=h[c]===l[c];o&&(e===r?(t>s&&(n=t,t=s,s=n),s++,oe%2==1&&y.translate(.5,0)):t===s&&(e>r&&(n=e,e=r,r=n),r++,oe%2==1&&y.translate(0,.5)),1===oe&&(a=y.lineCap,y.lineCap="butt")),y.beginPath(),y.moveTo(e||0,t||0),y.lineTo(r||0,s||0),Mi(),o&&(e===r&&oe%2==1?y.translate(-.5,0):t===s&&oe%2==1&&y.translate(0,-.5),1===oe&&(y.lineCap=a))}else v.point(e,t)},ti.prototype.line=function(e,t,i,r,s,n){if(void 0!==s&&void 0!==n||(n=0,s=r,r=i,i=0),e!==r||t!==s||i!==n){var a=[e,t,i,r,s,n],o=new ui;o.scale(1,-1,1),o.apply(ot.array()),o.transpose(),oe>0&&ie&&(y.useProgram(P),jt("model2d",P,"model",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),jt("view2d",P,"view",!1,o.array()),zt("color2d",P,"color",re),Kt("picktype2d",P,"picktype",0),Wt("vertex2d",P,"Vertex",3,F),qt("aTextureCoord2d",P,"aTextureCoord"),y.bufferData(y.ARRAY_BUFFER,new Float32Array(a),y.STREAM_DRAW),y.drawArrays(y.LINES,0,2))}else v.point(e,t,i)},ei.prototype.bezier=function(){if(8!==arguments.length)throw"You must use 8 parameters for bezier() in 2D mode";v.beginShape(),v.vertex(arguments[0],arguments[1]),v.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]),v.endShape()},ti.prototype.bezier=function(){if(12!==arguments.length)throw"You must use 12 parameters for bezier() in 3D mode";v.beginShape(),v.vertex(arguments[0],arguments[1],arguments[2]),v.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]),v.endShape()},v.bezierDetail=function(e){Ce=e},v.bezierPoint=function(e,t,i,r,s){return(1-s)*(1-s)*(1-s)*e+3*(1-s)*(1-s)*s*t+3*(1-s)*s*s*i+s*s*s*r},v.bezierTangent=function(e,t,i,r,s){return 3*s*s*(3*t-e-3*i+r)+6*s*(e-2*t+i)+3*(-e+t)},v.curvePoint=function(e,t,i,r,s){return.5*(2*t+(-e+i)*s+(2*e-5*t+4*i-r)*s*s+(3*t-e-3*i+r)*s*s*s)},v.curveTangent=function(e,t,i,r,s){return.5*(-e+i+2*(2*e-5*t+4*i-r)*s+3*(3*t-e-3*i+r)*s*s)},v.triangle=function(e,t,i,r,s,a){v.beginShape(n.TRIANGLES),v.vertex(e,t,0),v.vertex(i,r,0),v.vertex(s,a,0),v.endShape()},v.quad=function(e,t,i,r,s,a,o,h){v.beginShape(n.QUADS),v.vertex(e,t,0),v.vertex(i,r,0),v.vertex(s,a,0),v.vertex(o,h,0),v.endShape()},ei.prototype.rect=function(e,t,r,s,a,o,h,l){if(r||s){switch(pe){case n.CORNERS:r-=e,s-=t;break;case n.RADIUS:e-=(r*=2)/2,t-=(s*=2)/2;break;case n.CENTER:e-=r/2,t-=s/2}le||(e=i.round(e),t=i.round(t),r=i.round(r),s=i.round(s)),void 0===a?(ie&&oe%2==1&&y.translate(.5,.5),y.beginPath(),y.rect(e,t,r,s),Oi(),Mi(),ie&&oe%2==1&&y.translate(-.5,-.5)):function(e,t,r,s,n,a,o,h){void 0===h&&(a=n,o=n,h=n);var l=r/2,c=s/2;(n>l||n>c)&&(n=i.min(l,c)),(a>l||a>c)&&(a=i.min(l,c)),(o>l||o>c)&&(o=i.min(l,c)),(h>l||h>c)&&(h=i.min(l,c)),Q&&!ie||y.translate(.5,.5),y.beginPath(),y.moveTo(e+n,t),y.lineTo(e+r-a,t),y.quadraticCurveTo(e+r,t,e+r,t+a),y.lineTo(e+r,t+s-o),y.quadraticCurveTo(e+r,t+s,e+r-o,t+s),y.lineTo(e+h,t+s),y.quadraticCurveTo(e,t+s,e,t+s-h),y.lineTo(e,t+n),y.quadraticCurveTo(e,t,e+n,t),Q&&!ie||y.translate(-.5,-.5),Oi(),Mi()}(e,t,r,s,a,o,h,l)}},ti.prototype.rect=function(e,t,i,r,s,a,o,h){if(void 0!==s)throw"rect() with rounded corners is not supported in 3D mode";pe===n.CORNERS?(i-=e,r-=t):pe===n.RADIUS?(e-=(i*=2)/2,t-=(r*=2)/2):pe===n.CENTER&&(e-=i/2,t-=r/2);var l=new ui;l.translate(e,t,0),l.scale(i,r,1),l.transpose();var c=new ui;if(c.scale(1,-1,1),c.apply(ot.array()),c.transpose(),oe>0&&ie&&(y.useProgram(P),jt("model2d",P,"model",!1,l.array()),jt("view2d",P,"view",!1,c.array()),zt("color2d",P,"color",re),Kt("picktype2d",P,"picktype",0),Wt("vertex2d",P,"Vertex",3,D),qt("aTextureCoord2d",P,"aTextureCoord"),y.drawArrays(y.LINE_LOOP,0,Gt.length/3)),Q){if(y.useProgram(T),jt("model3d",T,"model",!1,l.array()),jt("view3d",T,"view",!1,c.array()),y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,1),zt("color3d",T,"color",Z),ft>0){var u=new ui;u.set(c);var p=new ui;p.set(l),u.mult(p);var f=new ui;f.set(u),f.invert(),f.transpose(),jt("normalTransform3d",T,"normalTransform",!1,f.array()),Wt("normal3d",T,"Normal",3,O)}else qt("normal3d",T,"Normal");Wt("vertex3d",T,"Vertex",3,D),y.drawArrays(y.TRIANGLE_FAN,0,Gt.length/3),y.disable(y.POLYGON_OFFSET_FILL)}},ei.prototype.ellipse=function(e,t,i,r){if(e=e||0,t=t||0,!(i<=0&&r<=0))if(fe===n.RADIUS?(i*=2,r*=2):fe===n.CORNERS?(e+=(i-=e)/2,t+=(r-=t)/2):fe===n.CORNER&&(e+=i/2,t+=r/2),i===r)y.beginPath(),y.arc(e,t,i/2,0,n.TWO_PI,!1),Oi(),Mi();else{var s=i/2,a=r/2,o=.5522847498307933,h=o*s,l=o*a;v.beginShape(),v.vertex(e+s,t),v.bezierVertex(e+s,t-l,e+h,t-a,e,t-a),v.bezierVertex(e-h,t-a,e-s,t-l,e-s,t),v.bezierVertex(e-s,t+l,e-h,t+a,e,t+a),v.bezierVertex(e+h,t+a,e+s,t+l,e+s,t),v.endShape()}},ti.prototype.ellipse=function(e,t,i,r){if(e=e||0,t=t||0,!(i<=0&&r<=0)){fe===n.RADIUS?(i*=2,r*=2):fe===n.CORNERS?(e+=(i-=e)/2,t+=(r-=t)/2):fe===n.CORNER&&(e+=i/2,t+=r/2);var s=i/2,a=r/2,o=.5522847498307933,h=o*s,l=o*a;if(v.beginShape(),v.vertex(e+s,t),v.bezierVertex(e+s,t-l,0,e+h,t-a,0,e,t-a,0),v.bezierVertex(e-h,t-a,0,e-s,t-l,0,e-s,t,0),v.bezierVertex(e-s,t+l,0,e-h,t+a,0,e,t+a,0),v.bezierVertex(e+h,t+a,0,e+s,t+l,0,e+s,t,0),v.endShape(),Q){var c,u,p=0,f=0;for(c=0;c<Pt.length;c++)p+=Pt[c][0],f+=Pt[c][1];p/=Pt.length,f/=Pt.length;var d=[],m=[],g=[];for(d[0]=p,d[1]=f,d[2]=0,d[3]=0,d[4]=0,d[5]=Z[0],d[6]=Z[1],d[7]=Z[2],d[8]=Z[3],d[9]=re[0],d[10]=re[1],d[11]=re[2],d[12]=re[3],d[13]=de,d[14]=me,d[15]=ge,Pt.unshift(d),c=0;c<Pt.length;c++){for(u=0;u<3;u++)m.push(Pt[c][u]);for(u=5;u<9;u++)g.push(Pt[c][u])}Bi(m,"TRIANGLE_FAN",g)}}},v.normal=function(e,t,i){if(3!==arguments.length||"number"!=typeof e||"number"!=typeof t||"number"!=typeof i)throw"normal() requires three numeric arguments.";de=e,me=t,ge=i,0!==we&&(ve===n.NORMAL_MODE_AUTO?ve=n.NORMAL_MODE_SHAPE:ve===n.NORMAL_MODE_SHAPE&&(ve=n.NORMAL_MODE_VERTEX))},v.save=function(t,i){return void 0!==i?e.open(i.toDataURL(),"_blank"):e.open(v.externals.canvas.toDataURL(),"_blank")};var zi=0;v.saveFrame=function(e){void 0===e&&(e="screen-####.png");var t=e.replace(/#+/,(function(e){for(var t=""+zi++;t.length<e.length;)t="0"+t;return t}));v.save(t)},t.createElement("canvas").getContext("2d");var Ki=[void 0,void 0,void 0];function ji(e,i,r){var s=Ki.shift();void 0===s&&((s={}).canvas=t.createElement("canvas"),s.context=s.canvas.getContext("2d")),Ki.push(s);var n=s.canvas,a=s.context,o=i||e.width,h=r||e.height;return n.width=o,n.height=h,e?"data"in e?a.putImageData(e,0,0):(a.clearRect(0,0,o,h),a.drawImage(e,0,0,o,h)):a.clearRect(0,0,o,h),s}var Wi=function(e,i,r){if(this.__isDirty=!1,e instanceof HTMLImageElement)this.fromHTMLImageData(e);else if(i||r){this.width=e||1,this.height=i||1;var s=this.sourceImg=t.createElement("canvas");s.width=this.width,s.height=this.height,this.format=r===n.ARGB||r===n.ALPHA?r:n.RGB}else this.width=0,this.height=0,this.format=n.ARGB};function qi(e,t,i,r){var s=new Wi(i,r,n.ARGB);return s.fromImageData(v.toImageData(e,t,i,r)),s}function Xi(e,t,r,s,a){if(a.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";for(var o=new Wi(r,s,n.ARGB),h=o.imageData.data,l=a.width,c=a.height,u=a.imageData.data,p=i.max(0,-t),f=i.max(0,-e),d=i.min(s,c-t),m=i.min(r,l-e),g=p;g<d;++g)for(var v=4*((t+g)*l+(e+f)),y=4*(g*r+f),x=f;x<m;++x)h[y++]=u[v++],h[y++]=u[v++],h[y++]=u[v++],h[y++]=u[v++];return o.__isDirty=!0,o}function Yi(){Je&&(y=X,Je=!1,v.updatePixels())}function $i(){function e(e,t){e[t]=function(){Yi(),y[t].apply(y,arguments)}}function t(e,t){v.defineProperty(e,t,{get:function(){return Yi(),y[t]},set:function(e){Yi(),y[t]=e}})}for(var i in y)"function"==typeof y[i]?e(this,i):t(this,i)}Wi.prototype={__isPImage:!0,updatePixels:function(){var e=this.sourceImg;e&&e instanceof HTMLCanvasElement&&this.__isDirty&&e.getContext("2d").putImageData(this.imageData,0,0),this.__isDirty=!1},fromHTMLImageData:function(e){ji(e),e.width&&e.height&&(this.isRemote=!0,this.width=e.width,this.height=e.height),this.sourceImg=e},get:function(e,t,i,r){return arguments.length?2===arguments.length?v.get(e,t,this):4===arguments.length?v.get(e,t,i,r,this):void 0:v.get(this)},set:function(e,t,i){v.set(e,t,i,this),this.__isDirty=!0},blend:function(e,t,i,r,s,n,a,o,h,l){9===arguments.length?v.blend(this,e,t,i,r,s,n,a,o,h,this):10===arguments.length&&v.blend(e,t,i,r,s,n,a,o,h,l,this),delete this.sourceImg},copy:function(e,t,i,r,s,a,o,h,l){8===arguments.length?v.blend(this,e,t,i,r,s,a,o,h,n.REPLACE,this):9===arguments.length&&v.blend(e,t,i,r,s,a,o,h,l,n.REPLACE,this),delete this.sourceImg},filter:function(e,t){2===arguments.length?v.filter(e,t,this):1===arguments.length&&v.filter(e,null,this),delete this.sourceImg},save:function(e){v.save(e,this)},resize:function(e,t){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";if(0!==this.width||0!==this.height){0===e&&0!==t?e=i.floor(this.width/this.height*t):0===t&&0!==e&&(t=i.floor(this.height/this.width*e));var r=ji(this.imageData).canvas,s=ji(r,e,t).context.getImageData(0,0,e,t);this.fromImageData(s)}},mask:function(e){var t,i,r=this.toImageData();if(e instanceof Wi||e.__isPImage){if(e.width!==this.width||e.height!==this.height)throw"mask must have the same dimensions as PImage.";for(e=e.toImageData(),t=2,i=this.width*this.height*4;t<i;t+=4)r.data[t+1]=e.data[t]}else if(e instanceof Array){if(this.width*this.height!==e.length)throw"mask array must be the same length as PImage pixels array.";for(t=0,i=e.length;t<i;++t)r.data[4*t+3]=e[t]}this.fromImageData(r)},loadPixels:r,toImageData:function(){return this.isRemote?this.sourceImg:this.__isDirty?ji(this.imageData).context.getImageData(0,0,this.width,this.height):this.imageData},toDataURL:function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";return ji(this.imageData).canvas.toDataURL()},fromImageData:function(e){var i=e.width,r=e.height,s=t.createElement("canvas"),a=s.getContext("2d");this.width=s.width=i,this.height=s.height=r,a.putImageData(e,0,0),this.format=n.ARGB,this.imageData=e,this.sourceImg=s}},v.PImage=Wi,v.createImage=function(e,t,i){return new Wi(e,t,i)},v.loadImage=function(e,i,r){var s;if(i&&(e=e+"."+i),x.imageCache.images[e])return(s=new Wi(x.imageCache.images[e])).loaded=!0,s;s=new Wi;var n=t.createElement("img");return s.sourceImg=n,n.onload=function(e,t,i){var r=e,s=t,n=i;return function(){s.fromHTMLImageData(r),s.loaded=!0,n&&n()}}(n,s,r),n.src=e,s},v.requestImage=v.loadImage,v.get=function(e,t,i,r,s){return void 0!==s?Xi(e,t,i,r,s):void 0!==r?qi(e,t,i,r):void 0!==i?function(e,t,i){if(i.isRemote)throw"Image is loaded remotely. Cannot get x,y.";var r=t*i.width*4+4*e,s=i.imageData.data;return s[r+3]<<24&n.ALPHA_MASK|s[r]<<16&n.RED_MASK|s[r+1]<<8&n.GREEN_MASK|s[r+2]&n.BLUE_MASK}(e,t,i):void 0!==t?function(e,t){var i;if(e>=v.width||e<0||t<0||t>=v.height)return 0;if(Je){var r=4*((0|e)+v.width*(0|t));return(i=v.imageData.data)[r+3]<<24&n.ALPHA_MASK|i[r]<<16&n.RED_MASK|i[r+1]<<8&n.GREEN_MASK|i[r+2]&n.BLUE_MASK}return(i=v.toImageData(0|e,0|t,1,1).data)[3]<<24&n.ALPHA_MASK|i[0]<<16&n.RED_MASK|i[1]<<8&n.GREEN_MASK|i[2]&n.BLUE_MASK}(e,t):void 0!==e?Xi(0,0,e.width,e.height,e):qi(0,0,v.width,v.height)},v.createGraphics=function(e,t,i){var r=new m;return r.size(e,t,i),r},v.set=function(e,t,i,r){3===arguments.length?"number"==typeof i?function(e,t,i){e<v.width&&e>=0&&t>=0&&t<v.height&&(Je||(v.loadPixels(),null===Ze&&(X=y,Ze=new $i),Je=!0,y=Ze,Y=0),v.pixels.setPixel((0|e)+v.width*(0|t),i),++Y>et&&Yi())}(e,t,i):(i instanceof Wi||i.__isPImage)&&v.image(i,e,t):4===arguments.length&&function(e,t,i,r){if(r.isRemote)throw"Image is loaded remotely. Cannot set x,y.";var s=v.color.toArray(i),n=t*r.width*4+4*e,a=r.imageData.data;a[n]=s[0],a[n+1]=s[1],a[n+2]=s[2],a[n+3]=s[3]}(e,t,i,r)},v.imageData={},v.pixels={getLength:function(){return v.imageData.data.length?v.imageData.data.length/4:0},getPixel:function(e){var t=4*e,i=v.imageData.data;return i[t+3]<<24&4278190080|i[t+0]<<16&16711680|i[t+1]<<8&65280|255&i[t+2]},setPixel:function(e,t){var i=4*e,r=v.imageData.data;r[i+0]=(16711680&t)>>>16,r[i+1]=(65280&t)>>>8,r[i+2]=255&t,r[i+3]=(4278190080&t)>>>24},toArray:function(){for(var e=[],t=v.imageData.width*v.imageData.height,i=v.imageData.data,r=0,s=0;r<t;r++,s+=4)e.push(i[s+3]<<24&4278190080|i[s+0]<<16&16711680|i[s+1]<<8&65280|255&i[s+2]);return e},set:function(e){for(var t=0,i=e.length;t<i;t++)this.setPixel(t,e[t])}},v.loadPixels=function(){v.imageData=b.$ensureContext().getImageData(0,0,v.width,v.height)},v.updatePixels=function(){v.imageData&&b.$ensureContext().putImageData(v.imageData,0,0)},v.hint=function(e){var t=b.$ensureContext();e===n.DISABLE_DEPTH_TEST?(t.disable(t.DEPTH_TEST),t.depthMask(!1),t.clear(t.DEPTH_BUFFER_BIT)):e===n.ENABLE_DEPTH_TEST&&(t.enable(t.DEPTH_TEST),t.depthMask(!0))};var Qi=function(e,t,i,r){var s;if(e instanceof Wi||e.__isPImage){if(!(s=e).loaded)throw"Error using image in background(): PImage not loaded.";if(s.width!==v.width||s.height!==v.height)throw"Background image must be the same dimensions as the canvas."}else s=v.color(e,t,i,r);Ae=s};ei.prototype.background=function(e,t,i,r){void 0!==e&&Qi(e,t,i,r),Ae instanceof Wi||Ae.__isPImage?(mi(),y.setTransform(1,0,0,1,0,0),v.image(Ae,0,0),gi()):(mi(),y.setTransform(1,0,0,1,0,0),v.alpha(Ae)!==ke&&y.clearRect(0,0,v.width,v.height),y.fillStyle=v.color.toString(Ae),y.fillRect(0,0,v.width,v.height),te=!0,gi())},ti.prototype.background=function(e,t,i,r){arguments.length>0&&Qi(e,t,i,r);var s=v.color.toGLArray(Ae);y.clearColor(s[0],s[1],s[2],s[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)},ei.prototype.image=function(e,t,r,s,n){if(t=i.round(t),r=i.round(r),e.width>0){s||e.width,n||e.height;var a=$t(t||0,r||0,s||e.width,n||e.height,arguments.length<4);if(e.sourceImg&&null===De){var o=e.sourceImg;e.__isDirty&&e.updatePixels(),y.drawImage(o,0,0,o.width,o.height,a.x,a.y,a.w,a.h)}else y.drawImage(e.externals.canvas,0,0,e.width,e.height,a.x,a.y,a.w,a.h)}},ti.prototype.image=function(e,t,r,s,n){e.width>0&&(t=i.round(t),r=i.round(r),s=s||e.width,n=n||e.height,v.beginShape(v.QUADS),v.texture(e),v.vertex(t,r,0,0,0),v.vertex(t,r+n,0,0,n),v.vertex(t+s,r+n,0,s,n),v.vertex(t+s,r,0,s,0),v.endShape())},v.tint=function(e,t,i,r){var s=v.color(e,t,i,r),n=v.red(s)/Te,a=v.green(s)/Pe,o=v.blue(s)/Re,h=v.alpha(s)/ke;De=function(e){for(var t=e.data,i=4*e.width*e.height,r=0;r<i;)t[r++]*=n,t[r++]*=a,t[r++]*=o,t[r++]*=h},Oe=function(e){for(var t=0;t<e.length;)e[t++]=n,e[t++]=a,e[t++]=o,e[t++]=h}},v.noTint=function(){De=null,Oe=null},v.copy=function(e,t,i,r,s,a,o,h,l){void 0===l&&(l=h,h=o,o=a,a=s,s=r,r=i,i=t,t=e,e=v),v.blend(e,t,i,r,s,a,o,h,l,n.REPLACE)},v.blend=function(e,t,i,r,s,n,a,o,h,l,c){if(e.isRemote)throw"Image is loaded remotely. Cannot blend image.";void 0===l&&(l=h,h=o,o=a,a=n,n=s,s=r,r=i,i=t,t=e,e=v);var u=t+r,p=i+s,f=n+o,d=a+h,m=c||v;void 0!==c&&void 0!==l||v.loadPixels(),e.loadPixels(),e===v&&v.intersect(t,i,u,p,n,a,f,d)?v.blit_resize(v.get(t,i,u-t,p-i),0,0,u-t-1,p-i-1,m.imageData.data,m.width,m.height,n,a,f,d,l):v.blit_resize(e,t,i,u,p,m.imageData.data,m.width,m.height,n,a,f,d,l),void 0===c&&v.updatePixels()};var Zi=function(e,t){var i,r,s,n,a,o,h,l,c,u,p,f,d,m,g,v,y,x=0,b=t.pixels.getLength(),w=new Int32Array(b);if(e)for(;x<b;)for(i=x,r=x+t.width;x<r;)s=n=t.pixels.getPixel(x),(h=x-1)<i&&(h=x),(o=x+1)>=r&&(o=x),(l=x-t.width)<0&&(l=0),(c=x+t.width)>=b&&(c=x),f=t.pixels.getPixel(l),p=t.pixels.getPixel(h),d=t.pixels.getPixel(c),(g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<(a=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))&&(n=p,a=g),(m=77*((u=t.pixels.getPixel(o))>>16&255)+151*(u>>8&255)+28*(255&u))<a&&(n=u,a=m),(v=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<a&&(n=f,a=v),(y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))<a&&(n=d,a=y),w[x++]=n;else for(;x<b;)for(i=x,r=x+t.width;x<r;)s=n=t.pixels.getPixel(x),(h=x-1)<i&&(h=x),(o=x+1)>=r&&(o=x),(l=x-t.width)<0&&(l=0),(c=x+t.width)>=b&&(c=x),f=t.pixels.getPixel(l),p=t.pixels.getPixel(h),d=t.pixels.getPixel(c),(g=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))>(a=77*(s>>16&255)+151*(s>>8&255)+28*(255&s))&&(n=p,a=g),(m=77*((u=t.pixels.getPixel(o))>>16&255)+151*(u>>8&255)+28*(255&u))>a&&(n=u,a=m),(v=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))>a&&(n=f,a=v),(y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d))>a&&(n=d,a=y),w[x++]=n;t.pixels.set(w)};v.filter=function(e,t,i){var r,s,a,o;if(3===arguments.length?(i.loadPixels(),r=i):(v.loadPixels(),r=v),void 0===t&&(t=null),r.isRemote)throw"Image is loaded remotely. Cannot filter image.";var h=r.pixels.getLength();switch(e){case n.BLUR:!function(e,t){var i,r,s,n,a,o,h,l,c,u,p,f,d,m,g,y=t.pixels.getLength(),x=new Float32Array(y),b=new Float32Array(y),w=new Float32Array(y),E=new Float32Array(y),_=0;!function(e){var t,i=v.floor(3.5*e);if(i=i<1?1:i<248?i:248,v.shared.blurRadius!==i){v.shared.blurRadius=i,v.shared.blurKernelSize=1+(v.shared.blurRadius<<1),v.shared.blurKernel=new Float32Array(v.shared.blurKernelSize);var r=v.shared.blurKernel,s=v.shared.blurKernelSize;for(v.shared.blurRadius,t=0;t<s;t++)r[t]=0;var n=(i-1)*(i-1);for(t=1;t<i;t++)r[i+t]=r[void 0]=n;r[i]=i*i}}(e);var S=t.height,A=t.width,C=v.shared.blurKernelSize,k=v.shared.blurRadius,T=v.shared.blurKernel,P=t.imageData.data;for(d=0;d<S;d++){for(f=0;f<A;f++){if(n=s=r=a=i=0,(h=f-k)<0)p=-h,h=0;else{if(h>=A)break;p=0}for(m=p;m<C&&!(h>=A);m++)g=4*(h+_),a+=(o=T[m])*P[g+3],r+=o*P[g],s+=o*P[g+1],n+=o*P[g+2],i+=o,h++;E[l=_+f]=a/i,x[l]=r/i,b[l]=s/i,w[l]=n/i}_+=A}for(_=0,u=(c=-k)*A,d=0;d<S;d++){for(f=0;f<A;f++){if(n=s=r=a=i=0,c<0)p=l=-c,h=f;else{if(c>=S)break;p=0,l=c,h=f+u}for(m=p;m<C&&!(l>=S);m++)a+=(o=T[m])*E[h],r+=o*x[h],s+=o*b[h],n+=o*w[h],i+=o,l++,h+=A;P[g=4*(f+_)]=r/i,P[g+1]=s/i,P[g+2]=n/i,P[g+3]=a/i}_+=A,u+=A,c++}}(t||1,r);break;case n.GRAY:if(r.format===n.ALPHA){for(o=0;o<h;o++)s=255-r.pixels.getPixel(o),r.pixels.setPixel(o,4278190080|s<<16|s<<8|s);r.format=n.RGB}else for(o=0;o<h;o++)a=77*((s=r.pixels.getPixel(o))>>16&255)+151*(s>>8&255)+28*(255&s)>>8,r.pixels.setPixel(o,s&n.ALPHA_MASK|a<<16|a<<8|a);break;case n.INVERT:for(o=0;o<h;o++)r.pixels.setPixel(o,16777215^r.pixels.getPixel(o));break;case n.POSTERIZE:if(null===t)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";var l=v.floor(t);if(l<2||l>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";var c=l-1;for(o=0;o<h;o++){var u=r.pixels.getPixel(o)>>16&255,p=r.pixels.getPixel(o)>>8&255,f=255&r.pixels.getPixel(o);u=255*(u*l>>8)/c,p=255*(p*l>>8)/c,f=255*(f*l>>8)/c,r.pixels.setPixel(o,4278190080&r.pixels.getPixel(o)|u<<16|p<<8|f)}break;case n.OPAQUE:for(o=0;o<h;o++)r.pixels.setPixel(o,4278190080|r.pixels.getPixel(o));r.format=n.RGB;break;case n.THRESHOLD:if(null===t&&(t=.5),t<0||t>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";var d=v.floor(255*t);for(o=0;o<h;o++){var m=v.max((r.pixels.getPixel(o)&n.RED_MASK)>>16,v.max((r.pixels.getPixel(o)&n.GREEN_MASK)>>8,r.pixels.getPixel(o)&n.BLUE_MASK));r.pixels.setPixel(o,r.pixels.getPixel(o)&n.ALPHA_MASK|(m<d?0:16777215))}break;case n.ERODE:Zi(!0,r);break;case n.DILATE:Zi(!1,r)}r.updatePixels()},v.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null},v.intersect=function(e,t,i,r,s,n,a,o){var h=i-e+1,l=r-t+1,c=a-s+1,u=o-n+1;if(s<e)(c+=s-e)>h&&(c=h);else{var p=h+e-s;c>p&&(c=p)}if(n<t)(u+=n-t)>l&&(u=l);else{var f=l+t-n;u>f&&(u=f)}return!(c<=0||u<=0)};var Ji,er,tr={};function ir(e){return e instanceof String?e:"number"==typeof e?e===(0|e)?e.toString():v.nf(e,0,3):null==e?"":e.toString()}function rr(e,t,i,r){var s,a;e.indexOf("\n")<0?(s=[e],a=1):a=(s=e.split(/\r?\n/g)).length;var o=0;Ke===n.TOP?o=Xe+Ye:Ke===n.CENTER?o=Xe/2-(a-1)*$e/2:Ke===n.BOTTOM&&(o=-(Ye+(a-1)*$e));for(var h=0;h<a;++h){var l=s[h];b.text$line(l,t,i+o,r,ze),o+=$e}}function sr(e,t,r,s,a,o){if(0!==e.length&&0!==s&&0!==a&&!(qe>a)){for(var h=-1,l=0,c=0,u=[],p=0,f=e.length;p<f;p++){var d=e[p],m=" "===d,g=Qe.measureTextWidth(d);if("\n"!==d&&c+g<=s)m&&(h=p),c+=g;else{if(h+1===l){if(!(p>0))return;h=p}"\n"===d?(u.push({text:e.substring(l,p),width:c}),l=p+1):(u.push({text:e.substring(l,h+1),width:c}),l=h+1),c=0,p=l-1}}l<f&&u.push({text:e.substring(l),width:c});var v=1,y=Xe;ze===n.CENTER?v=s/2:ze===n.RIGHT&&(v=s);var x,w,E,_=u.length,S=i.min(_,i.floor(a/$e));for(Ke===n.TOP?y=Xe+Ye:Ke===n.CENTER?y=a/2-$e*(S/2-1):Ke===n.BOTTOM&&(y=Ye+$e),x=0;x<_&&!(y+(E=x*$e)>a-Ye);x++)w=u[x],b.text$line(w.text,t+v,r+y+E,o,ze)}}function nr(e){for(var t in b="3D"===e?new ti:"2D"===e?new ei:new ii,ii.prototype)ii.prototype.hasOwnProperty(t)&&t.indexOf("$")<0&&(v[t]=b[t]);b.$init()}function ar(e){return function(){return nr("2D"),b[e].apply(this,arguments)}}function or(e,t){v.mouseX=t.offsetX,v.mouseY=t.offsetY}tr[n.BLEND]=v.modes.blend,tr[n.ADD]=v.modes.add,tr[n.SUBTRACT]=v.modes.subtract,tr[n.LIGHTEST]=v.modes.lightest,tr[n.DARKEST]=v.modes.darkest,tr[n.REPLACE]=v.modes.replace,tr[n.DIFFERENCE]=v.modes.difference,tr[n.EXCLUSION]=v.modes.exclusion,tr[n.MULTIPLY]=v.modes.multiply,tr[n.SCREEN]=v.modes.screen,tr[n.OVERLAY]=v.modes.overlay,tr[n.HARD_LIGHT]=v.modes.hard_light,tr[n.SOFT_LIGHT]=v.modes.soft_light,tr[n.DODGE]=v.modes.dodge,tr[n.BURN]=v.modes.burn,v.blit_resize=function(e,t,r,s,a,o,h,l,c,u,p,f,d){var m,g;t<0&&(t=0),r<0&&(r=0),s>=e.width&&(s=e.width-1),a>=e.height&&(a=e.height-1);var y=s-t,x=a-r,b=p-c,w=f-u;if(!(b<=0||w<=0||y<=0||x<=0||c>=h||u>=l||t>=e.width||r>=e.height)){var E=i.floor(y/b*n.PRECISIONF),_=i.floor(x/w*n.PRECISIONF),S=v.shared;S.srcXOffset=i.floor(c<0?-c*E:t*n.PRECISIONF),S.srcYOffset=i.floor(u<0?-u*_:r*n.PRECISIONF),c<0&&(b+=c,c=0),u<0&&(w+=u,u=0),b=i.min(b,h-c),w=i.min(w,l-u);var A,C=u*h+c;S.srcBuffer=e.imageData.data,S.iw=e.width,S.iw1=e.width-1,S.ih1=e.height-1,v.filter_bilinear,v.filter_new_scanline;var k,T,P,R,I,L,N=tr[d],D=n.ALPHA_MASK,O=n.RED_MASK,M=n.GREEN_MASK,F=n.BLUE_MASK,V=n.PREC_MAXVAL,B=n.PRECISIONB,G=n.PREC_RED_SHIFT,U=n.PREC_ALPHA_SHIFT,H=S.srcBuffer,z=i.min;for(g=0;g<w;g++){for(S.sX=S.srcXOffset,S.fracV=S.srcYOffset&V,S.ifV=V-S.fracV,S.v1=(S.srcYOffset>>B)*S.iw,S.v2=z(1+(S.srcYOffset>>B),S.ih1)*S.iw,m=0;m<b;m++)A=o[3+(T=4*(C+m))]<<24&D|o[T]<<16&O|o[T+1]<<8&M|o[T+2]&F,S.fracU=S.sX&V,S.ifU=V-S.fracU,S.ul=S.ifU*S.ifV>>B,S.ll=S.ifU*S.fracV>>B,S.ur=S.fracU*S.ifV>>B,S.lr=S.fracU*S.fracV>>B,S.u1=S.sX>>B,S.u2=z(S.u1+1,S.iw1),P=4*(S.v1+S.u1),R=4*(S.v1+S.u2),I=4*(S.v2+S.u1),L=4*(S.v2+S.u2),S.cUL=H[P+3]<<24&D|H[P]<<16&O|H[P+1]<<8&M|H[P+2]&F,S.cUR=H[R+3]<<24&D|H[R]<<16&O|H[R+1]<<8&M|H[R+2]&F,S.cLL=H[I+3]<<24&D|H[I]<<16&O|H[I+1]<<8&M|H[I+2]&F,S.cLR=H[L+3]<<24&D|H[L]<<16&O|H[L+1]<<8&M|H[L+2]&F,S.r=S.ul*((S.cUL&O)>>16)+S.ll*((S.cLL&O)>>16)+S.ur*((S.cUR&O)>>16)+S.lr*((S.cLR&O)>>16)<<G&O,S.g=S.ul*(S.cUL&M)+S.ll*(S.cLL&M)+S.ur*(S.cUR&M)+S.lr*(S.cLR&M)>>>B&M,S.b=S.ul*(S.cUL&F)+S.ll*(S.cLL&F)+S.ur*(S.cUR&F)+S.lr*(S.cLR&F)>>>B,S.a=S.ul*((S.cUL&D)>>>24)+S.ll*((S.cLL&D)>>>24)+S.ur*((S.cUR&D)>>>24)+S.lr*((S.cLR&D)>>>24)<<U&D,k=N(A,S.a|S.r|S.g|S.b),o[T]=(k&O)>>>16,o[T+1]=(k&M)>>>8,o[T+2]=k&F,o[T+3]=(k&D)>>>24,S.sX+=E;C+=h,S.srcYOffset+=_}}},v.loadFont=function(e,t){if(void 0===e)throw"font name required in loadFont.";if(-1===e.indexOf(".svg"))return void 0===t&&(t=Qe.size),d.get(e,t);var i=v.loadGlyphs(e);return{name:e,css:"12px sans-serif",glyph:!0,units_per_em:i.units_per_em,horiz_adv_x:1/i.units_per_em*i.horiz_adv_x,ascent:i.ascent,descent:i.descent,width:function(t){for(var i=0,r=t.length,s=0;s<r;s++)try{i+=parseFloat(v.glyphLook(v.glyphTable[e],t[s]).horiz_adv_x)}catch(e){m.debug(e)}return i/v.glyphTable[e].units_per_em}}},v.createFont=function(e,t){return v.loadFont(e,t)},v.textFont=function(e,t){void 0!==t&&(e.glyph||(e=d.get(e.name,t)),qe=t),We=(Qe=e).name,Xe=Qe.ascent,Ye=Qe.descent,$e=Qe.leading,b.$ensureContext().font=Qe.css},v.textSize=function(e){e!==qe&&(e=i.round(10*e)/10,Qe=d.get(We,e),qe=e,Xe=Qe.ascent,Ye=Qe.descent,$e=Qe.leading,b.$ensureContext().font=Qe.css)},v.textAscent=function(){return Xe},v.textDescent=function(){return Ye},v.textLeading=function(e){$e=e},v.textAlign=function(e,t){ze=e,Ke=t||n.BASELINE},ei.prototype.textWidth=function(e){var t,r=ir(e).split(/\r?\n/g),s=0,n=r.length;for(y.font=Qe.css,t=0;t<n;++t)s=i.max(s,Qe.measureTextWidth(r[t]));return 0|s},ti.prototype.textWidth=function(e){var r,s=ir(e).split(/\r?\n/g),n=0,a=s.length;void 0===w&&(w=t.createElement("canvas"));var o=w.getContext("2d");for(o.font=Qe.css,r=0;r<a;++r)n=i.max(n,o.measureText(s[r]).width);return 0|n},v.glyphLook=function(e,t){try{switch(t){case"1":return e.one;case"2":return e.two;case"3":return e.three;case"4":return e.four;case"5":return e.five;case"6":return e.six;case"7":return e.seven;case"8":return e.eight;case"9":return e.nine;case"0":return e.zero;case" ":return e.space;case"$":return e.dollar;case"!":return e.exclam;case'"':return e.quotedbl;case"#":return e.numbersign;case"%":return e.percent;case"&":return e.ampersand;case"'":return e.quotesingle;case"(":return e.parenleft;case")":return e.parenright;case"*":return e.asterisk;case"+":return e.plus;case",":return e.comma;case"-":return e.hyphen;case".":return e.period;case"/":return e.slash;case"_":return e.underscore;case":":return e.colon;case";":return e.semicolon;case"<":return e.less;case"=":return e.equal;case">":return e.greater;case"?":return e.question;case"@":return e.at;case"[":return e.bracketleft;case"\\":return e.backslash;case"]":return e.bracketright;case"^":return e.asciicircum;case"`":return e.grave;case"{":return e.braceleft;case"|":return e.bar;case"}":return e.braceright;case"~":return e.asciitilde;default:return e[t]}}catch(e){m.debug(e)}},ei.prototype.text$line=function(e,t,i,r,s){var a=0,o=0;if(Qe.glyph){var h=v.glyphTable[We];mi(),y.translate(t,i+qe),s!==n.RIGHT&&s!==n.CENTER||(a=h.width(e),o=s===n.RIGHT?-a:-a/2);var l=1/h.units_per_em*qe;y.scale(l,l);for(var c=0,u=e.length;c<u;c++)try{v.glyphLook(h,e[c]).draw()}catch(e){m.debug(e)}gi()}else e&&"fillText"in y&&(te&&(y.fillStyle=v.color.toString(J),te=!1),s!==n.RIGHT&&s!==n.CENTER||(a=Qe.measureTextWidth(e),o=s===n.RIGHT?-a:-a/2),y.fillText(e,t+o,i))},ti.prototype.text$line=function(e,i,r,s,a){void 0===w&&(w=t.createElement("canvas"));var o=y;(y=w.getContext("2d")).font=Qe.css;var h=Qe.measureTextWidth(e);w.width=h,w.height=qe,(y=w.getContext("2d")).font=Qe.css,y.textBaseline="top",ei.prototype.text$line(e,0,0,0,n.LEFT);var l=w.width/w.height;(y=o).bindTexture(y.TEXTURE_2D,K),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,w),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE);var c=0;a===n.RIGHT?c=-h:a===n.CENTER&&(c=-h/2);var u=new ui,p=.5*qe;u.translate(i+c-p/2,r-p,s),u.scale(-l*p,-p,p),u.translate(-1,-1,-1),u.transpose();var f=new ui;f.scale(1,-1,1),f.apply(ot.array()),f.transpose(),y.useProgram(P),Wt("vertex2d",P,"Vertex",3,j),Wt("aTextureCoord2d",P,"aTextureCoord",2,W),Kt("uSampler2d",P,"uSampler",[0]),Kt("picktype2d",P,"picktype",1),jt("model2d",P,"model",!1,u.array()),jt("view2d",P,"view",!1,f.array()),zt("color2d",P,"color",Z),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,q),y.drawElements(y.TRIANGLES,6,y.UNSIGNED_SHORT,0)},v.text=function(){y.font!==Qe.css&&(y.font=Qe.css),je!==n.SHAPE&&(3===arguments.length?rr(ir(arguments[0]),arguments[1],arguments[2],0):4===arguments.length?rr(ir(arguments[0]),arguments[1],arguments[2],arguments[3]):5===arguments.length?sr(ir(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0):6===arguments.length&&sr(ir(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]))},v.textMode=function(e){je=e},v.loadGlyphs=function(r){var s,n,a,o,h,l,c,u,p,f,d,g,y=function(e,t){var i,r=0,s=[],n=new RegExp(e,"g");for(i=s[r]=n.exec(t);i;)i=s[++r]=n.exec(t);return s},x=function(e){var t=y("[A-Za-z][0-9\\- ]+|Z",e);g="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();",s=0,n=0,a=0,o=0,h=0,l=0,e=0,u=0,p="",f=t.length-1;for(var r=0;r<f;r++){var c=t[r][0],m=y("[0-9\\-]+",c);switch(c[0]){case"M":s=parseFloat(m[0][0]),n=parseFloat(m[1][0]),g+="curContext.moveTo("+s+","+-n+");";break;case"L":s=parseFloat(m[0][0]),n=parseFloat(m[1][0]),g+="curContext.lineTo("+s+","+-n+");";break;case"H":s=parseFloat(m[0][0]),g+="curContext.lineTo("+s+","+-n+");";break;case"V":n=parseFloat(m[0][0]),g+="curContext.lineTo("+s+","+-n+");";break;case"T":h=parseFloat(m[0][0]),l=parseFloat(m[1][0]),"Q"===p||"T"===p?(e=i.sqrt(i.pow(s-a,2)+i.pow(o-n,2)),u=("degrees"===v.angleMode?180:i.PI)+v.atan2(a-s,o-n),a=s+v.sin(u)*e,o=n+v.cos(u)*e):(a=s,o=n),g+="curContext.quadraticCurveTo("+a+","+-o+","+h+","+-l+");",s=h,n=l;break;case"Q":a=parseFloat(m[0][0]),o=parseFloat(m[1][0]),h=parseFloat(m[2][0]),l=parseFloat(m[3][0]),g+="curContext.quadraticCurveTo("+a+","+-o+","+h+","+-l+");",s=h,n=l;break;case"Z":g+="curContext.closePath();"}p=c[0]}return g+="afterPathDraw();",g+="curContext.translate("+d+",0);",g+="}}",new Function("beforePathDraw","afterPathDraw",g)((function(){return mi(),b.$ensureContext()}),(function(){Oi(),Mi(),gi()}))},w=function(e){var t=e.getElementsByTagName("font");v.glyphTable[r].horiz_adv_x=t[0].getAttribute("horiz-adv-x");var i=e.getElementsByTagName("font-face")[0];v.glyphTable[r].units_per_em=parseFloat(i.getAttribute("units-per-em")),v.glyphTable[r].ascent=parseFloat(i.getAttribute("ascent")),v.glyphTable[r].descent=parseFloat(i.getAttribute("descent"));for(var s=e.getElementsByTagName("glyph"),n=s.length,a=0;a<n;a++){var o=s[a].getAttribute("unicode"),h=s[a].getAttribute("glyph-name");null===(d=s[a].getAttribute("horiz-adv-x"))&&(d=v.glyphTable[r].horiz_adv_x),void 0!==(c=s[a].getAttribute("d"))&&(g=x(c),v.glyphTable[r][h]={name:h,unicode:o,horiz_adv_x:d,draw:g.draw})}};return v.glyphTable[r]={},function(){var i;try{i=t.implementation.createDocument("","",null)}catch(e){return void m.debug(e.message)}try{i.async=!1,i.load(r),w(i.getElementsByTagName("svg")[0])}catch(t){m.debug(t);try{var s=new e.XMLHttpRequest;s.open("GET",r,!1),s.send(null),w(s.responseXML.documentElement)}catch(e){m.debug(t)}}}(),v.glyphTable[r]},v.param=function(e){var t="data-processing-"+e;if(p.hasAttribute(t))return p.getAttribute(t);for(var i=0,r=p.childNodes.length;i<r;++i){var s=p.childNodes.item(i);if(1===s.nodeType&&"param"===s.tagName.toLowerCase()&&s.getAttribute("name")===e)return s.getAttribute("value")}return x.params.hasOwnProperty(e)?x.params[e]:null},ii.prototype.translate=ar("translate"),ii.prototype.scale=ar("scale"),ii.prototype.pushMatrix=ar("pushMatrix"),ii.prototype.popMatrix=ar("popMatrix"),ii.prototype.resetMatrix=ar("resetMatrix"),ii.prototype.applyMatrix=ar("applyMatrix"),ii.prototype.rotate=ar("rotate"),ii.prototype.rotateZ=ar("rotateZ"),ii.prototype.redraw=ar("redraw"),ii.prototype.toImageData=ar("toImageData"),ii.prototype.ambientLight=ar("ambientLight"),ii.prototype.directionalLight=ar("directionalLight"),ii.prototype.lightFalloff=ar("lightFalloff"),ii.prototype.lightSpecular=ar("lightSpecular"),ii.prototype.pointLight=ar("pointLight"),ii.prototype.noLights=ar("noLights"),ii.prototype.spotLight=ar("spotLight"),ii.prototype.beginCamera=ar("beginCamera"),ii.prototype.endCamera=ar("endCamera"),ii.prototype.frustum=ar("frustum"),ii.prototype.box=ar("box"),ii.prototype.sphere=ar("sphere"),ii.prototype.ambient=ar("ambient"),ii.prototype.emissive=ar("emissive"),ii.prototype.shininess=ar("shininess"),ii.prototype.specular=ar("specular"),ii.prototype.fill=ar("fill"),ii.prototype.stroke=ar("stroke"),ii.prototype.strokeWeight=ar("strokeWeight"),ii.prototype.smooth=ar("smooth"),ii.prototype.noSmooth=ar("noSmooth"),ii.prototype.point=ar("point"),ii.prototype.vertex=ar("vertex"),ii.prototype.endShape=ar("endShape"),ii.prototype.bezierVertex=ar("bezierVertex"),ii.prototype.curveVertex=ar("curveVertex"),ii.prototype.curve=ar("curve"),ii.prototype.line=ar("line"),ii.prototype.bezier=ar("bezier"),ii.prototype.rect=ar("rect"),ii.prototype.ellipse=ar("ellipse"),ii.prototype.background=ar("background"),ii.prototype.image=ar("image"),ii.prototype.textWidth=ar("textWidth"),ii.prototype.text$line=ar("text$line"),ii.prototype.$ensureContext=ar("$ensureContext"),ii.prototype.$newPMatrix=ar("$newPMatrix"),ii.prototype.size=function(e,t,i){nr(i===n.WEBGL?"3D":"2D"),v.size(e,t,i)},ii.prototype.$init=r,ei.prototype.$init=function(){v.size(v.width,v.height),y.lineCap="round",v.noSmooth(),v.disableContextMenu()},ti.prototype.$init=function(){v.use3DContext=!0},Jt.prototype.$ensureContext=function(){return y},xi(p,"touchstart",(function(e){p.setAttribute("style","-webkit-user-select: none"),p.setAttribute("onclick","void(0)"),p.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var t=0,i=yi.length;t<i;t++){var r=yi[t].type;"mouseout"!==r&&"mousemove"!==r&&"mousedown"!==r&&"mouseup"!==r&&"DOMMouseScroll"!==r&&"mousewheel"!==r&&"touchstart"!==r||bi(yi[t])}void 0!==v.touchStart||void 0!==v.touchMove||void 0!==v.touchEnd||void 0!==v.touchCancel?(xi(p,"touchstart",(function(e){void 0!==v.touchStart&&v.touchStart(e)})),xi(p,"touchmove",(function(e){void 0!==v.touchMove&&(e.preventDefault(),v.touchMove(e))})),xi(p,"touchend",(function(e){void 0!==v.touchEnd&&v.touchEnd(e)})),xi(p,"touchcancel",(function(e){void 0!==v.touchCancel&&v.touchCancel(e)}))):(xi(p,"touchstart",(function(e){or(0,e.touches[0]),v.mouseIsPressed=v.__mousePressed=!0,v.mouseDragging=!1,v.mouseButton=n.LEFT,"function"==typeof v.mousePressed&&v.mousePressed()})),xi(p,"touchmove",(function(e){e.preventDefault(),or(0,e.touches[0]),"function"!=typeof v.mouseMoved||v.__mousePressed||v.mouseMoved(),"function"==typeof v.mouseDragged&&v.__mousePressed&&(v.mouseDragged(),v.mouseDragging=!0)})),xi(p,"touchend",(function(e){v.__mousePressed=!1,"function"!=typeof v.mouseClicked||v.mouseDragging||v.mouseClicked(),"function"==typeof v.mouseReleased&&v.mouseReleased()}))),p.dispatchEvent(e)})),Ji=!0,er=function(e){e.preventDefault(),e.stopPropagation()},v.disableContextMenu=function(){Ji&&(xi(p,"contextmenu",er),Ji=!1)},v.enableContextMenu=function(){Ji||(bi({elem:p,type:"contextmenu",fn:er}),Ji=!0)};var hr=!1;xi(p,"mousemove",(function(e){hr?hr=!1:or(0,e),"function"!=typeof v.mouseMoved||v.__mousePressed||v.mouseMoved(),"function"==typeof v.mouseDragged&&v.__mousePressed&&(v.mouseDragged(),v.mouseDragging=!0)})),xi(p,"mouseout",(function(e){"function"==typeof v.mouseOut&&v.mouseOut()})),xi(p,"mouseover",(function(e){hr=!0,or(0,e),"function"==typeof v.mouseOver&&v.mouseOver()})),xi(p,"mousedown",(function(e){switch(v.mouseIsPressed=v.__mousePressed=!0,v.mouseDragging=!1,e.which){case 1:v.mouseButton=n.LEFT;break;case 2:v.mouseButton=n.CENTER;break;case 3:v.mouseButton=n.RIGHT}"function"==typeof v.mousePressed&&v.mousePressed()})),xi(p,"mouseup",(function(e){v.__mousePressed=!1,"function"!=typeof v.mouseClicked||v.mouseDragging||v.mouseClicked(),"function"==typeof v.mouseReleased&&v.mouseReleased()}));var lr,cr=function(t){var i=0;t.wheelDelta?(i=t.wheelDelta/120,e.opera&&(i=-i)):t.detail&&(i=-t.detail/3),v.mouseScroll=i,i&&"function"==typeof v.mouseScrolled&&v.mouseScrolled()};function ur(e){var t=e.which||e.keyCode;switch(t){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return t}function pr(e){return"function"==typeof e.preventDefault?e.preventDefault():"function"==typeof e.stopPropagation&&e.stopPropagation(),!1}function fr(){var e;for(e in tt)if(tt.hasOwnProperty(e))return void(v.keyIsPressed=v.__keyPressed=!0);v.keyIsPressed=v.__keyPressed=!1}function dr(){v.keyIsPressed=v.__keyPressed=!1,tt=[],it=null}function mr(e,t){tt[e]=t,it=null,v.key=t,v.keyCode=e,v.keyPressed(),v.__usingDebugger||(v.keyCode=0),v.keyTyped(),fr()}if(xi(t,"DOMMouseScroll",cr),xi(t,"mousewheel",cr),"string"==typeof p&&(p=t.getElementById(p)),p.getAttribute("tabindex")||p.setAttribute("tabindex",0),f)x=new m.Sketch,nr(),v.size=function(e,t,i){nr(i&&i===n.WEBGL?"3D":"2D"),v.size(e,t,i)};else{h instanceof m.Sketch?x=h:"function"==typeof h?x=new m.Sketch(h):h||(x=new m.Sketch((function(){}))),v.externals.sketch=x,nr(),p.onfocus=function(){v.focused=!0},p.onblur=function(){v.focused=!1,x.options.globalKeyEvents||dr()},x.options.pauseOnBlur&&(xi(e,"focus",(function(){ce&&v.loop()})),xi(e,"blur",(function(){ce&&he&&(v.noLoop(),ce=!0),dr()})));var gr=x.options.globalKeyEvents?e:p;for(var vr in xi(gr,"keydown",(function(e){var t=ur(e);if(t===n.DELETE||t===n.BACKSPACE)return mr(t,new si(t)),pr(e);if(!(rt.indexOf(t)<0)){var i=new si(n.CODED);return v.key=i,v.keyCode=t,tt[t]=i,v.keyPressed(),it=null,fr(),pr(e)}it=t})),xi(gr,"keypress",(function(e){if(null!==it){var t=it,i=function(e){var t=e.which||e.keyCode,i=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;switch(t){case 13:t=i?13:10;break;case 8:t=i?127:8}return new si(t)}(e);return mr(t,i),pr(e)}})),xi(gr,"keyup",(function(e){var t=ur(e),i=tt[t];void 0!==i&&(v.key=i,v.keyCode=t,v.keyReleased(),delete tt[t],fr())})),m.lib)m.lib.hasOwnProperty(vr)&&(m.lib[vr].hasOwnProperty("attach")?m.lib[vr].attach(v):m.lib[vr]instanceof Function&&m.lib[vr].call(this));var yr=function(i){if(x.imageCache.pending||d.preloading.pending(100))e.setTimeout((function(){yr(i)}),100);else{if(e.opera){var r,s,n=x.imageCache.operaCache;for(r in n)n.hasOwnProperty(r)&&(null!==(s=n[r])&&t.body.removeChild(s),delete n[r])}x.attach(i,o),x.onLoad(i),i.setup&&(i.setup(),i.resetMatrix(),x.onSetup()),Yi(),i.draw&&(ce?i.loop():i.redraw())}};void 0!==(lr=this).externals.canvas.id&&lr.externals.canvas.id.length||(lr.externals.canvas.id="__processing"+c.length),u[lr.externals.canvas.id]=c.length,c.push(lr),yr(v)}};m.debug=e=>console.log("Processing.js: ",e),m.prototype=o;var g=function(){var e,i,r,s,n,a,o,h,l,c,u,p,f,d,m,g,v,y,x,b,w,E={},_="undefined",S="function",A=!1,C="log";return typeof tinylog!==_&&typeof tinylog[C]===S?E[C]=tinylog[C]:typeof t===_||t.fake?typeof print===S&&(E[C]=print):(i="div",r="style",s="title",n={zIndex:1e4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black",paddingBottom:"5px"},a={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},o={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},h={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},l={minHeight:"16px"},c={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},u=(e=t).defaultView,p=e.body||e.documentElement,f=p[r],d=function(){for(var e,t,i,s=arguments.length;s--;)for(i in t=arguments[s--],e=arguments[s][r],t)t.hasOwnProperty(i)&&(e[i]=t[i])},m=function(e,t,i){return e.addEventListener?e.addEventListener(t,i,A):e.attachEvent&&e.attachEvent("on"+t,i),[e,t,i]},g=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,A):e.detachEvent&&e.detachEvent("on"+t,i)},v=function(e){for(var t=e.childNodes,i=t.length;i--;)e.removeChild(t.item(0))},y=function(e,t){return e.appendChild(t)},x=function(t){return e.createElement(t)},b=function(t){return e.createTextNode(t)},w=E[C]=function(t){var _,S=f.paddingBottom,k=x(i),T=k[r],P=y(k,x(i)),R=y(k,x(i)),I=y(k,x(i)),L=A,N=A,D=A,O=0,M=function(){f.paddingBottom=k.clientHeight+"px"},F=function(e){var t=u.innerHeight,i=P.clientHeight;e<0?e=0:e+i>t&&(e=t-i),T.height=e/t*100+"%",M()},V=[m(e,"mousemove",(function(e){L&&(F(u.innerHeight-e.clientY),R.scrollTop=D)})),m(e,"mouseup",(function(){L&&(L=D=A)})),m(P,"dblclick",(function(e){e.preventDefault(),N?(F(N),N=A):(N=k.clientHeight,T.height="0px")})),m(P,"mousedown",(function(e){e.preventDefault(),L=!0,D=R.scrollTop})),m(P,"contextmenu",(function(){L=A})),m(I,"click",(function(){_()}))];_=function(){for(var e=V.length;e--;)g.apply(E,V[e]);p.removeChild(k),f.paddingBottom=S,v(R),v(k),E[C]=w},d(k,n,R,a,P,o,I,h),I[s]="Close Log",y(I,b("â")),P[s]="Double-click to toggle log minimization",p.insertBefore(k,p.firstChild),E[C]=function(e){512===O?R.removeChild(R.firstChild):O++;var t=y(R,x(i)),r=y(t,x(i));t[s]=(new Date).toLocaleTimeString(),d(t,l,r,c),y(r,b(e)),R.scrollTop=R.scrollHeight},E.clear=function(){O=0,v(R)},E[C](t),M()}),E}();return m.logger=g,m.version="@VERSION@",m.lib={},m.registerLibrary=function(e,t){m.lib[e]=t,t.hasOwnProperty("init")&&t.init(o)},m.instances=c,m.getInstanceById=function(e){return c[u[e]]},m.Sketch=function(i){this.attachFunction=i,this.options={pauseOnBlur:!1,globalKeyEvents:!1},this.onLoad=r,this.onSetup=r,this.onPause=r,this.onLoop=r,this.onFrameStart=r,this.onFrameEnd=r,this.onExit=r,this.params={},this.imageCache={pending:0,images:{},operaCache:{},add:function(i,r){var s;if(!this.images[i]&&(this.images[i]=null,r||((r=new Image).onload=(s=this,function(){s.pending--}),this.pending++,r.src=i),this.images[i]=r,e.opera)){var n=t.createElement("div");n.appendChild(r),n.style.position="absolute",n.style.opacity=0,n.style.width="1px",n.style.height="1px",this.operaCache[i]||(t.body.appendChild(n),this.operaCache[i]=n)}}},this.sourceCode=void 0,this.attach=function(e){if("function"==typeof this.attachFunction)this.attachFunction(e);else{if(!this.sourceCode)throw"Unable to attach sketch to the processing instance";var t=new Function("return ("+this.sourceCode+");")();t(e),this.attachFunction=t}},this.toString=function(){var e,t="((function(Sketch) {\n";for(e in t+="var sketch = new Sketch(\n"+this.sourceCode+");\n",this.options)if(this.options.hasOwnProperty(e)){var i=this.options[e];t+="sketch.options."+e+" = "+("string"==typeof i?'"'+i+'"':""+i)+";\n"}for(e in this.imageCache)this.options.hasOwnProperty(e)&&(t+='sketch.imageCache.add("'+e+'");\n');return t+"return sketch;\n})(Processing.Sketch))"}},m}.call(window,window,window.document,Math);window.Processing=e;var t=[{groupName:"animals",images:["birds_rainbow-lorakeets","boxer-getting-tan","boxer-laying-down","boxer-wagging-tongue","butterfly","butterfly_monarch","cat","cheetah","collies","crocodiles","dog_sleeping-puppy","dogs_collies","fox","horse","kangaroos","komodo-dragon","penguins","rabbit","retriever","shark","sleeping-puppy","snake_green-tree-boa","spider"]},{groupName:"avatars",images:["Hopper-jumping.gif","Thumbs.db","aqualine-sapling","aqualine-seed","aqualine-seedling","aqualine-tree","aqualine-ultimate","avatar-team","cs-hopper-cool","cs-hopper-happy","cs-hopper-jumping","cs-ohnoes","cs-winston-baby","cs-winston","duskpin-sapling","duskpin-seed","duskpin-seedling","duskpin-tree","duskpin-ultimate","leaf-blue","leaf-green","leaf-grey","leaf-orange","leaf-red","leaf-yellow","leafers-sapling","leafers-seed","leafers-seedling","leafers-tree","leafers-ultimate","marcimus-orange","marcimus-purple","marcimus-red","marcimus","mr-pants-green","mr-pants-idle.gif","mr-pants-orange","mr-pants-pink","mr-pants-purple","mr-pants-with-hat","mr-pants","mr-pink-green","mr-pink-orange","mr-pink","mystery-1","mystery-2","old-spice-man-blue","old-spice-man","orange-juice-squid","piceratops-sapling","piceratops-seed","piceratops-seedling","piceratops-tree","piceratops-ultimate","primosaur-sapling","primosaur-seed","primosaur-seedling","primosaur-tree","primosaur-ultimate","purple-pi-pink","purple-pi-teal","purple-pi","questionmark","robot_female_1","robot_female_2","robot_female_3","robot_male_1","robot_male_2","robot_male_3","spunky-sam-green","spunky-sam-orange","spunky-sam-red","spunky-sam","starky-sapling","starky-seed","starky-seedling","starky-tree","starky-ultimate"]},{groupName:"creatures",images:["BabyWinston","Hopper-Cool","Hopper-Happy","Hopper-Jumping","OhNoes-Happy","OhNoes-Hmm","OhNoes","Winston"]},{groupName:"cute",images:["Blank","BrownBlock","CharacterBoy","CharacterCatGirl","CharacterHornGirl","CharacterPinkGirl","CharacterPrincessGirl","ChestClosed","ChestLid","ChestOpen","DirtBlock","DoorTallClosed","DoorTallOpen","EnemyBug","GemBlue","GemGreen","GemOrange","GrassBlock","Heart","Key","None","PlainBlock","RampEast","RampNorth","RampSouth","RampWest","Rock","RoofEast","RoofNorth","RoofNorthEast","RoofNorthWest","RoofSouth","RoofSouthEast","RoofSouthWest","RoofWest","Selector","ShadowEast","ShadowNorth","ShadowNorthEast","ShadowNorthWest","ShadowSideWest","ShadowSouth","ShadowSouthEast","ShadowSouthWest","ShadowWest","Star","StoneBlock","StoneBlockTall","TreeShort","TreeTall","TreeUgly","WallBlock","WallBlockTall","WaterBlock","WindowTall","WoodBlock"]},{groupName:"food",images:["bananas","berries","broccoli","brussels-sprouts","cake","chocolates","coffee-beans","croissant","dumplings","fish_grilled-snapper","fruits","grapes","hamburger","ice-cream","mushroom","oysters","pasta","potato-chips","potatoes","shish-kebab","strawberries","sushi","tomatoes"]},{groupName:"insideout",images:["layer0blur0","layer0blur10","layer0blur20","layer0blur40","layer0blur80","layer1blur0","layer1blur10","layer1blur20","layer1blur40","layer1blur80","layer2blur0","layer2blur10","layer2blur20","layer2blur40","layer2blur80","layer3blur0","layer3blur10","layer3blur100","layer3blur20","layer3blur40","layer3blur80","shot1_layer0blur0","shot1_layer0blur10","shot1_layer0blur20","shot1_layer0blur40","shot1_layer0blur80","shot1_layer1blur0","shot1_layer1blur10","shot1_layer1blur20","shot1_layer1blur40","shot1_layer1blur80","shot1_layer2blur0","shot1_layer2blur10","shot1_layer2blur20","shot1_layer2blur40","shot1_layer2blur80","shot1_layer3blur0","shot1_layer3blur10","shot1_layer3blur20","shot1_layer3blur40","shot1_layer3blur80","shot1_layer4blur0","shot1_layer4blur10","shot1_layer4blur20","shot1_layer4blur40","shot1_layer4blur80","shot1_layer5blur0","shot1_layer5blur10","shot1_layer5blur20","shot1_layer5blur40","shot1_layer5blur80","shot2_layer0blur0","shot2_layer0blur10","shot2_layer0blur20","shot2_layer0blur40","shot2_layer0blur80","shot2_layer1blur0","shot2_layer1blur10","shot2_layer1blur20","shot2_layer1blur40","shot2_layer1blur80","shot2_layer2blur0","shot2_layer2blur10","shot2_layer2blur20","shot2_layer2blur40","shot2_layer2blur80","shot2_layer3blur0","shot2_layer3blur10","shot2_layer3blur20","shot2_layer3blur40","shot2_layer3blur80","shot2_layer4blur0","shot2_layer4blur10","shot2_layer4blur20","shot2_layer4blur40","shot2_layer4blur80"]},{groupName:"landscapes",images:["beach-at-dusk","beach-in-hawaii","beach-sunset","beach-waves-at-sunset","beach-waves-at-sunset2","beach-waves-daytime","beach-with-palm-trees","beach","clouds-from-plane","crop-circle","fields-of-grain","fields-of-wine","lake-steam-rising","lake","lava","lotus-garden","mountain_matterhorn","mountains-and-lake","mountains-in-hawaii","mountains-sunset","sand-dunes","waterfall_niagara-falls"]},{groupName:"misc",images:["boxmodel","tim-berners-lee-webpage","tim-berners-lee"]},{groupName:"pixar",images:["Incredibles_a_fill","Incredibles_a_fill_wFog","Incredibles_a_key","Incredibles_a_key_wFog","Incredibles_bnc","Incredibles_fillExt","Incredibles_fillInt","Incredibles_fill_wFog","Incredibles_kck","Incredibles_key","Incredibles_key_wFog","Incredibles_target","army1","army2","bedspread","bing1","bing2","bopeep","buzz","cars1","floorplanes","food1","ham","lamp","luxoball","rat_1","rat_2","rat_3"]},{groupName:"scratchpads",images:["colorpicker_background","colorpicker_hex","colorpicker_hsb_b","colorpicker_hsb_h","colorpicker_hsb_s","colorpicker_indic","colorpicker_overlay","colorpicker_rgb_b","colorpicker_rgb_g","colorpicker_rgb_r","colorpicker_select","colorpicker_submit","cool-critter","error-buddy","happy-critter","jumping-critter","leaf-green","leaf-orange","leaf-red","leaf-yellow","select","simple-button-green-loader.gif","speech-arrow","topic-animation","topic-drawing","topic-programming-basics","topic-user-interaction","ui-icons_808080_256x240"]},{groupName:"seasonal",images:["disco-ball","father-winston","fireworks-2015","fireworks-in-sky","fireworks-over-harbor","fireworks-scattered","gingerbread-family","gingerbread-house","gingerbread-houses","gingerbread-man","hannukah-dreidel","hannukah-menorah","hopper-elfer","hopper-partying","hopper-reindeer","house-with-lights","penguin-with-presents","red-nosed-winston","reindeer-with-hat","reindeer","santa-with-bag","snow-crystal1","snow-crystal2","snow-crystal3","snowman","snownoes","snowy-slope-with-trees","stocking-empty","xmas-cookies","xmas-ornament-boat","xmas-ornament-on-tree","xmas-ornaments","xmas-presents","xmas-scene-holly-border","xmas-tree-with-presents","xmas-tree","xmas-wreath"]},{groupName:"space",images:["0","1","2","3","4","5","6","7","8","9","background","beetleship","collisioncircle","girl1","girl2","girl3","girl4","girl5","healthheart","minus","octopus","planet","plus","rocketship","star"]}],i=[{groupName:"avatars",images:"aqualine-sapling aqualine-seed aqualine-seedling aqualine-tree aqualine-ultimate avatar-team duskpin-sapling duskpin-seed duskpin-seedling duskpin-tree duskpin-ultimate leaf-blue leaf-green leaf-grey leaf-orange leaf-red leaf-yellow leafers-sapling leafers-seed leafers-seedling leafers-tree leafers-ultimate marcimus marcimus-orange marcimus-purple marcimus-red mr-pants mr-pants-green mr-pants-orange mr-pants-pink mr-pants-purple mr-pants-with-hat mr-pink mr-pink-green mr-pink-orange old-spice-man old-spice-man-blue orange-juice-squid piceratops-sapling piceratops-seed piceratops-seedling piceratops-tree piceratops-ultimate primosaur-sapling primosaur-seed primosaur-seedling primosaur-tree primosaur-ultimate purple-pi purple-pi-pink purple-pi-teal questionmark robot_female_1 robot_female_2 robot_female_3 robot_male_1 robot_male_2 robot_male_3 spunky-sam spunky-sam-green spunky-sam-orange spunky-sam-red starky-sapling starky-seed starky-seedling starky-tree starky-ultimate".split(" ")},{groupName:"creatures",images:"Hopper-Happy Hopper-Cool Hopper-Jumping OhNoes OhNoes-Happy OhNoes-Hmm BabyWinston Winston".split(" ")},{groupName:"cute",images:"Blank BrownBlock CharacterBoy CharacterCatGirl CharacterHornGirl CharacterPinkGirl CharacterPrincessGirl ChestClosed ChestLid ChestOpen DirtBlock DoorTallClosed DoorTallOpen EnemyBug GemBlue GemGreen GemOrange GrassBlock Heart Key PlainBlock RampEast RampNorth RampSouth RampWest Rock RoofEast RoofNorth RoofNorthEast RoofNorthWest RoofSouth RoofSouthEast RoofSouthWest RoofWest Selector ShadowEast ShadowNorth ShadowNorthEast ShadowNorthWest ShadowSideWest ShadowSouth ShadowSouthEast ShadowSouthWest ShadowWest Star StoneBlock StoneBlockTall TreeShort TreeTall TreeUgly WallBlock WallBlockTall WaterBlock WindowTall WoodBlock".split(" "),cite:"'Planet Cute' art by Daniel Cook (Lostgarden.com)",citeLink:"http://lostgarden.com/2007/05/dancs-miraculously-flexible-game.html"},{groupName:"space",images:"background beetleship collisioncircle girl1 girl2 girl3 girl4 girl5 healthheart minus octopus planet plus rocketship star 0 1 2 3 4 5 6 7 8 9".split(" "),cite:"'Space Cute' art by Daniel Cook (Lostgarden.com)",citeLink:"http://lostgarden.com/2007/03/spacecute-prototyping-challenge.html"}],r=[{className:"Clipart",groups:i},{className:"Photos",groups:[{groupName:"animals",thumbsDir:"/thumbs",images:"birds_rainbow-lorakeets butterfly butterfly_monarch cat cheetah crocodiles dog_sleeping-puppy dogs_collies fox horse kangaroos komodo-dragon penguins rabbit retriever shark snake_green-tree-boa spider".split(" ")},{groupName:"landscapes",thumbsDir:"/thumbs",images:"beach-at-dusk beach-in-hawaii beach-sunset beach-waves-at-sunset beach-waves-daytime beach-with-palm-trees beach clouds-from-plane crop-circle fields-of-grain fields-of-wine lake lava lotus-garden mountain_matterhorn mountains-and-lake mountains-in-hawaii mountains-sunset sand-dunes waterfall_niagara-falls".split(" ")},{groupName:"food",thumbsDir:"/thumbs",images:"bananas berries broccoli brussels-sprouts cake chocolates coffee-beans croissant dumplings fish_grilled-snapper fruits grapes hamburger ice-cream mushroom oysters pasta potato-chips potatoes shish-kebab strawberries sushi tomatoes".split(" ")}]},{className:"Holiday â",groups:[{groupName:"seasonal",thumbsDir:"/thumbs",images:"father-winston fireworks-2015 fireworks-in-sky fireworks-over-harbor fireworks-scattered gingerbread-family gingerbread-house gingerbread-houses gingerbread-man hannukah-dreidel hannukah-menorah hopper-elfer hopper-partying hopper-reindeer house-with-lights reindeer snow-crystal1 snow-crystal2 snow-crystal3 snownoes snowy-slope-with-trees stocking-empty xmas-cookies xmas-ornament-boat xmas-ornament-on-tree xmas-ornaments xmas-presents xmas-scene-holly-border xmas-tree-with-presents xmas-tree xmas-wreath".split(" ")}]}],s=[{className:"Sound effects",groups:[{groupName:"rpg",sounds:"battle-magic battle-spell battle-swing coin-jingle door-open giant-hyah giant-no giant-yah hit-clop hit-splat hit-thud hit-whack metal-chime metal-clink step-heavy water-bubble water-slosh".split(" "),cite:"'RPG Sound Effects' sounds by artisticdude",citeLink:"http://opengameart.org/content/rpg-sound-pack"},{groupName:"retro",sounds:"boom1 boom2 coin hit1 hit2 jump1 jump2 laser1 laser2 laser3 laser4 rumble thruster-short thruster-long whistle1 whistle2".split(" "),cite:"'Retro Game Sounds' sounds by spongejr",citeLink:"https://www.khanacademy.org/profile/spongejr/"}]}];window.AllImages=t,window.OutputImages=i,window.ExtendedOutputImages=r,window.OutputSounds=s;var n={AssignmentExpression:function(e,t,i){return{type:"AssignmentExpression",left:e,operator:t,right:i}},BinaryExpression:function(e,t,i){return{type:"BinaryExpression",left:e,operator:t,right:i}},BlockStatement:function(e){return{type:"BlockStatement",body:e}},CallExpression:function(e,t){return{type:"CallExpression",callee:e,arguments:t}},ExpressionStatement:function(e){return{type:"ExpressionStatement",expression:e}},Identifier:function(e){return{type:"Identifier",name:e}},IfStatement:function(e,t){return{type:"IfStatement",test:e,consequent:t,alternate:arguments.length<=2||void 0===arguments[2]?null:arguments[2]}},Literal:function(e){return{type:"Literal",value:e}},MemberExpression:function(e,t){return{type:"MemberExpression",object:e,property:t,computed:!(arguments.length<=2||void 0===arguments[2])&&arguments[2]}},UpdateExpression:function(e,t,i){return{type:"UpdateExpression",argument:e,operator:t,prefix:i}},VariableDeclaration:function(e,t){return{type:"VariableDeclaration",declarations:e,kind:t}},ArrayPattern:function(e){return{type:"ArrayPattern",elements:e}}},a=function(e,t,i){null===t?t=[e]:t.push(e),i.forEach((function(i){i.enter&&i.enter(e,t)}));var r=!0,s=!1,n=void 0;try{for(var o,h=Object.keys(e)[Symbol.iterator]();!(r=(o=h.next()).done);r=!0){var l=o.value;if(e.hasOwnProperty(l)&&e[l]instanceof Object)if(Array.isArray(e[l]))for(var c=0;c<e[l].length;){var u=e[l][c]||{type:"EmptySlot"};c+=a(u,t,i)}else e[l].type&&a(e[l],t,i)}}catch(e){s=!0,n=e}finally{try{!r&&h.return&&h.return()}finally{if(s)throw n}}var p=1;return i.forEach((function(i){i.leave&&function(){var r=i.leave(e,t);if(r)if(r instanceof Array){var s=t[t.length-2];if(s.body){var n=s.body.findIndex((function(t){return t===e}));Array.prototype.splice.apply(s.body,[n,1].concat(r)),p=r.length}}else Object.keys(e).forEach((function(t){delete e[t]})),Object.keys(r).forEach((function(t){e[t]=r[t]}))}()})),t.pop(),p},o={},h=n,l=function(e,t){if("Property"===t.type&&t.key===e)return!1;if("VariableDeclarator"===t.type&&(t.id===e||"ArrayPattern"===t.id.type))return!1;var i="MemberExpression"===t.type,r=i&&t.property===e&&t.computed,s=i&&t.object===e;return!i||r||s},c=["draw","mouseClicked","mouseDragged","mouseMoved","mousePressed","mouseReleased","mouseScrolled","mouseOver","mouseOut","touchStart","touchEnd","touchMove","touchCancel","keyPressed","keyReleased","keyTyped"],u=[{}];o.rewriteContextVariables=function(e,t){var i={enter:function(e,t){var i;/^Function/.test(e.type)&&(i={},e.params.forEach((function(e){i[e.name]=!0})),u.push(i)),"VariableDeclarator"===e.type&&(u[u.length-1][e.id.name]=!0)},leave:function(i,r){var s=r[r.length-2];if("Identifier"===i.type){if("MethodDefinition"===s.type)return;if("ArrayPattern"===s.type?l(i,r[r.length-3]):l(i,s)){for(var n=-1,a=u.length-1;a>-1;a--)if(u[a][i.name]){n=a;break}if(/^Function/.test(s.type)&&s.params.includes(i))return;if("CatchClause"===s.type)return;if(["undefined","Infinity","NaN","arguments"].includes(i.name))return;if(i.name in t&&-1===n||0===n)return h.MemberExpression(h.Identifier(e),h.Identifier(i.name))}}else if("VariableDeclaration"===i.type)if(1===i.declarations.length){var o=i.declarations[0];if(null===o.init&&"ForInStatement"!==s.type)return;if(1===u.length){if(["Program","BlockStatement","SwitchCase"].includes(s.type))return h.ExpressionStatement(h.AssignmentExpression(h.MemberExpression(h.Identifier(e),h.Identifier(o.id.name)),"=",o.init));if(["ForStatement"].includes(s.type))return h.AssignmentExpression(h.MemberExpression(h.Identifier(e),h.Identifier(o.id.name)),"=",o.init);if(["ForInStatement"].includes(s.type))return h.MemberExpression(h.Identifier(e),h.Identifier(o.id.name))}}else{if(1===u.length)return["Program","BlockStatement"].includes(s.type)?i.declarations.filter((function(e){return null!==e.init})).map((function(t){return h.ExpressionStatement(h.AssignmentExpression(h.MemberExpression(h.Identifier(e),h.Identifier(t.id.name)),"=",t.init))})):{type:"SequenceExpression",expressions:i.declarations.filter((function(e){return null!==e.init})).map((function(t){return h.AssignmentExpression(h.MemberExpression(h.Identifier(e),h.Identifier(t.id.name)),"=",t.init)}))};if(i.declarations.some((e=>c.includes(e.id.name))))return i.declarations.filter((e=>null!==e.init)).map((e=>h.VariableDeclaration([e],i.kind)))}}};function r(e){for(let i=t;null!==i.__proto__;i=i.__proto__)if(i.hasOwnProperty(e))return!0;return!1}return{enter:i.enter,leave(e,t){if(/^Function/.test(e.type))u.pop();else if("Identifier"===e.type){if(r(e.name))return i.leave(e,t)}else if("VariableDeclaration"===e.type&&e.declarations.some((e=>r(e.id.name))))return i.leave(e,t)}}},o.checkForBannedProps=function(e){return{leave:function(t,i){if("Identifier"===t.type&&e.includes(t.name))throw`Use of "${t.name}" as an identifier is prohibited. (${t.loc.start.line-1})`}}},o.findResources=function(e){return{leave:function(i,r){"Literal"===i.type&&"string"==typeof i.value&&(t.forEach((function(t){t.images.forEach((function(r){-1!==i.value.indexOf(r)&&(e[t.groupName+"/"+r+".png"]=!0)}))})),s.forEach((function(t){t.groups.forEach((function(t){t.sounds.forEach((function(r){-1!==i.value.indexOf(r)&&(e[t.groupName+"/"+r+".mp3"]=!0)}))}))})))}}},o.rewriteFunctionDeclarations={leave(e,t){if("FunctionDeclaration"===e.type){var i={type:"VariableDeclarator",id:{type:"Identifier",name:e.id.name},init:{type:"FunctionExpression",id:null,params:e.params,body:e.body,generator:e.generator,expression:e.expression,async:e.async}};return h.VariableDeclaration([i],"var")}}},window.ASTTransforms=o,window.ASTBuilder=o,window.walkAST=a;var p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],f=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],d="ÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Í¿ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô¯Ô±-ÕÕÕ -Ö×-×ª×¯-×²Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¡ -à¡ªà¡°-à¢à¢-à¢à¢ -à£à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¦à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à§¼à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à«¹à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°¹à°½à±-à±à±à± à±¡à²à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ-àµàµ-àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¸-à¸°à¸²à¸³à¹-à¹àºàºàºàº-àºàº-àº£àº¥àº§-àº°àº²àº³àº½à»-à»à»à»-à»à¼à½-à½à½-à½¬à¾-à¾á-áªá¿á-áá-áá¡á¥á¦á®-á°áµ-ááá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -áµá¸-á½á-á¬á¯-á¿á-áá -áªá®-á¸á-áá-á±á-áá -á¬á®-á°á-á³ááá  -á¡¸á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¥-á¥­á¥°-á¥´á¦-á¦«á¦°-á§á¨-á¨á¨ -á©áª§á¬-á¬³á­-á­á®-á® á®®á®¯á®º-á¯¥á°-á°£á±-á±á±-á±½á²-á²á²-á²ºá²½-á²¿á³©-á³¬á³®-á³³á³µá³¶á³ºá´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â¹â¼-â¿â-âââ -ââ°-â³¤â³«-â³®â³²â³³â´-â´¥â´§â´­â´°-âµ§âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·ã-ãã¡-ã©ã±-ãµã¸-ã¼ã-ãã-ãã¡-ãºã¼-ã¿ã-ã¯ã±-ãã -ã¿ã°-ã¿ã-ä¶¿ä¸-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¯ê-êê¢-êê-êêêêê-êê²-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê£½ê£¾ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê§ -ê§¤ê§¦-ê§¯ê§º-ê§¾ê¨-ê¨¨ê©-ê©ê©-ê©ê© -ê©¶ê©ºê©¾-êª¯êª±êªµêª¶êª¹-êª½ê«ê«ê«-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¬°-ê­ê­-ê­©ê­°-ê¯¢ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿",m={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},g="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",v={5:g,"5module":g+" export import",6:g+" const class extends export import super"},y=/^in(stanceof)?$/,x=new RegExp("["+d+"]"),b=new RegExp("["+d+"ââÂ·Ì-Í¯ÎÒ-ÒÖ-Ö½Ö¿×××××Ø-ØÙ-Ù©Ù°Û-ÛÛ-Û¤Û§Û¨Ûª-Û­Û°-Û¹ÜÜ°-ÝÞ¦-Þ°ß-ßß«-ß³ß½à -à à -à £à ¥-à §à ©-à ­à¡-à¡à¢-à¢à£-à£¡à££-à¤à¤º-à¤¼à¤¾-à¥à¥-à¥à¥¢à¥£à¥¦-à¥¯à¦-à¦à¦¼à¦¾-à§à§à§à§-à§à§à§¢à§£à§¦-à§¯à§¾à¨-à¨à¨¼à¨¾-à©à©à©à©-à©à©à©¦-à©±à©µàª-àªàª¼àª¾-à«à«-à«à«-à«à«¢à«£à«¦-à«¯à«º-à«¿à¬-à¬à¬¼à¬¾-à­à­à­à­-à­à­-à­à­¢à­£à­¦-à­¯à®à®¾-à¯à¯-à¯à¯-à¯à¯à¯¦-à¯¯à°-à°à°¼à°¾-à±à±-à±à±-à±à±à±à±¢à±£à±¦-à±¯à²-à²à²¼à²¾-à³à³-à³à³-à³à³à³à³¢à³£à³¦-à³¯à³³à´-à´à´»à´¼à´¾-àµàµ-àµàµ-àµàµàµ¢àµ£àµ¦-àµ¯à¶-à¶à·à·-à·à·à·-à·à·¦-à·¯à·²à·³à¸±à¸´-à¸ºà¹-à¹à¹-à¹àº±àº´-àº¼à»-à»à»-à»à¼à¼à¼ -à¼©à¼µà¼·à¼¹à¼¾à¼¿à½±-à¾à¾à¾à¾-à¾à¾-à¾¼à¿á«-á¾á-áá-áá-á á¢-á¤á§-á­á±-á´á-áá-áá-áá©-á±á-áá²-á´ááá²á³á´-ááá -á©á -á á -á á¢©á¤ -á¤«á¤°-á¤»á¥-á¥á§-á§á¨-á¨á©-á©á© -á©¼á©¿-áªáª-áªáª°-áª½áª¿-á«á¬-á¬á¬´-á­á­-á­á­«-á­³á®-á®á®¡-á®­á®°-á®¹á¯¦-á¯³á°¤-á°·á±-á±á±-á±á³-á³á³-á³¨á³­á³´á³·-á³¹á·-á·¿âââ¿âââ-ââ¡â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã¯ããã»ê -ê©ê¯ê´-ê½êêê°ê±ê ê ê ê £-ê §ê ¬ê¢ê¢ê¢´-ê£ê£-ê£ê£ -ê£±ê£¿-ê¤ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³-ê§ê§-ê§ê§¥ê§°-ê§¹ê¨©-ê¨¶ê©ê©ê©ê©-ê©ê©»-ê©½êª°êª²-êª´êª·êª¸êª¾êª¿ê«ê««-ê«¯ê«µê«¶ê¯£-ê¯ªê¯¬ê¯­ê¯°-ê¯¹ï¬ï¸-ï¸ï¸ -ï¸¯ï¸³ï¸´ï¹-ï¹ï¼-ï¼ï¼¿ï½¥]");function w(e,t){for(var i=65536,r=0;r<t.length;r+=2){if((i+=t[r])>e)return!1;if((i+=t[r+1])>=e)return!0}return!1}function E(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&x.test(String.fromCharCode(e)):!1!==t&&w(e,f)))}function _(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&b.test(String.fromCharCode(e)):!1!==t&&(w(e,f)||w(e,p)))))}var S=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function A(e,t){return new S(e,{beforeExpr:!0,binop:t})}var C={beforeExpr:!0},k={startsExpr:!0},T={};function P(e,t){return void 0===t&&(t={}),t.keyword=e,T[e]=new S(e,t)}var R={num:new S("num",k),regexp:new S("regexp",k),string:new S("string",k),name:new S("name",k),privateId:new S("privateId",k),eof:new S("eof"),bracketL:new S("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new S("]"),braceL:new S("{",{beforeExpr:!0,startsExpr:!0}),braceR:new S("}"),parenL:new S("(",{beforeExpr:!0,startsExpr:!0}),parenR:new S(")"),comma:new S(",",C),semi:new S(";",C),colon:new S(":",C),dot:new S("."),question:new S("?",C),questionDot:new S("?."),arrow:new S("=>",C),template:new S("template"),invalidTemplate:new S("invalidTemplate"),ellipsis:new S("...",C),backQuote:new S("`",k),dollarBraceL:new S("${",{beforeExpr:!0,startsExpr:!0}),eq:new S("=",{beforeExpr:!0,isAssign:!0}),assign:new S("_=",{beforeExpr:!0,isAssign:!0}),incDec:new S("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new S("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:A("||",1),logicalAND:A("&&",2),bitwiseOR:A("|",3),bitwiseXOR:A("^",4),bitwiseAND:A("&",5),equality:A("==/!=/===/!==",6),relational:A("</>/<=/>=",7),bitShift:A("<</>>/>>>",8),plusMin:new S("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:A("%",10),star:A("*",10),slash:A("/",10),starstar:new S("**",{beforeExpr:!0}),coalesce:A("??",1),_break:P("break"),_case:P("case",C),_catch:P("catch"),_continue:P("continue"),_debugger:P("debugger"),_default:P("default",C),_do:P("do",{isLoop:!0,beforeExpr:!0}),_else:P("else",C),_finally:P("finally"),_for:P("for",{isLoop:!0}),_function:P("function",k),_if:P("if"),_return:P("return",C),_switch:P("switch"),_throw:P("throw",C),_try:P("try"),_var:P("var"),_const:P("const"),_while:P("while",{isLoop:!0}),_with:P("with"),_new:P("new",{beforeExpr:!0,startsExpr:!0}),_this:P("this",k),_super:P("super",k),_class:P("class",k),_extends:P("extends",C),_export:P("export"),_import:P("import",k),_null:P("null",k),_true:P("true",k),_false:P("false",k),_in:P("in",{beforeExpr:!0,binop:7}),_instanceof:P("instanceof",{beforeExpr:!0,binop:7}),_typeof:P("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:P("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:P("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},I=/\r\n?|\n|\u2028|\u2029/,L=new RegExp(I.source,"g");function N(e){return 10===e||13===e||8232===e||8233===e}function D(e,t,i){void 0===i&&(i=e.length);for(var r=t;r<i;r++){var s=e.charCodeAt(r);if(N(s))return r<i-1&&13===s&&10===e.charCodeAt(r+1)?r+2:r+1}return-1}var O=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,F=Object.prototype,V=F.hasOwnProperty,B=F.toString,G=Object.hasOwn||function(e,t){return V.call(e,t)},U=Array.isArray||function(e){return"[object Array]"===B.call(e)},H=Object.create(null);function z(e){return H[e]||(H[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function K(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}var j=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,W=function(e,t){this.line=e,this.column=t};W.prototype.offset=function(e){return new W(this.line,this.column+e)};var q=function(e,t,i){this.start=t,this.end=i,null!==e.sourceFile&&(this.source=e.sourceFile)};function X(e,t){for(var i=1,r=0;;){var s=D(e,r,t);if(s<0)return new W(i,t-r);++i,r=s}}var Y={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$=!1;function Q(e,t){return 2|(e?4:0)|(t?8:0)}var Z=function(e,t,i){this.options=e=function(e){var t={};for(var i in Y)t[i]=e&&G(e,i)?e[i]:Y[i];if("latest"===t.ecmaVersion?t.ecmaVersion=1e8:null==t.ecmaVersion?(!$&&"object"==typeof console&&console.warn&&($=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),e&&null!=e.allowHashBang||(t.allowHashBang=t.ecmaVersion>=14),U(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return U(t.onComment)&&(t.onComment=function(e,t){return function(i,r,s,n,a,o){var h={type:i?"Block":"Line",value:r,start:s,end:n};e.locations&&(h.loc=new q(this,a,o)),e.ranges&&(h.range=[s,n]),t.push(h)}}(t,t.onComment)),t}(e),this.sourceFile=e.sourceFile,this.keywords=z(v[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var r="";!0!==e.allowReserved&&(r=m[e.ecmaVersion>=6?6:5===e.ecmaVersion?5:3],"module"===e.sourceType&&(r+=" await")),this.reservedWords=z(r);var s=(r?r+" ":"")+m.strict;this.reservedWordsStrict=z(s),this.reservedWordsStrictBind=z(s+" "+m.strictBind),this.input=String(t),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(I).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=R.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},J={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Z.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},J.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},J.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},J.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},J.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||256&t.flags)return!1;if(2&t.flags)return(4&t.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},J.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,i=e.inClassFieldInit;return(64&t)>0||i||this.options.allowSuperOutsideMethod},J.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},J.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},J.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,i=e.inClassFieldInit;return(258&t)>0||i},J.inClassStaticBlock.get=function(){return(256&this.currentVarScope().flags)>0},Z.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=this,r=0;r<e.length;r++)i=e[r](i);return i},Z.parse=function(e,t){return new this(t,e).parse()},Z.parseExpressionAt=function(e,t,i){var r=new this(i,e,t);return r.nextToken(),r.parseExpression()},Z.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(Z.prototype,J);var ee=Z.prototype,te=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;ee.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){M.lastIndex=e,e+=M.exec(this.input)[0].length;var t=te.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2])){M.lastIndex=e+t[0].length;var i=M.exec(this.input),r=i.index+i[0].length,s=this.input.charAt(r);return";"===s||"}"===s||I.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||"!"===s&&"="===this.input.charAt(r+1))}e+=t[0].length,M.lastIndex=e,e+=M.exec(this.input)[0].length,";"===this.input[e]&&e++}},ee.eat=function(e){return this.type===e&&(this.next(),!0)},ee.isContextual=function(e){return this.type===R.name&&this.value===e&&!this.containsEsc},ee.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},ee.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},ee.canInsertSemicolon=function(){return this.type===R.eof||this.type===R.braceR||I.test(this.input.slice(this.lastTokEnd,this.start))},ee.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},ee.semicolon=function(){this.eat(R.semi)||this.insertSemicolon()||this.unexpected()},ee.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},ee.expect=function(e){this.eat(e)||this.unexpected()},ee.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};var ie=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ee.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var i=t?e.parenthesizedAssign:e.parenthesizedBind;i>-1&&this.raiseRecoverable(i,t?"Assigning to rvalue":"Parenthesized pattern")}},ee.checkExpressionErrors=function(e,t){if(!e)return!1;var i=e.shorthandAssign,r=e.doubleProto;if(!t)return i>=0||r>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},ee.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},ee.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var re=Z.prototype;re.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==R.eof;){var i=this.parseStatement(null,!0,t);e.body.push(i)}if(this.inModule)for(var r=0,s=Object.keys(this.undefinedExports);r<s.length;r+=1){var n=s[r];this.raiseRecoverable(this.undefinedExports[n].start,"Export '"+n+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var se={kind:"loop"},ne={kind:"switch"};re.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var t=M.exec(this.input),i=this.pos+t[0].length,r=this.input.charCodeAt(i);if(91===r||92===r)return!0;if(e)return!1;if(123===r||r>55295&&r<56320)return!0;if(E(r,!0)){for(var s=i+1;_(r=this.input.charCodeAt(s),!0);)++s;if(92===r||r>55295&&r<56320)return!0;var n=this.input.slice(i,s);if(!y.test(n))return!0}return!1},re.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var e,t=M.exec(this.input),i=this.pos+t[0].length;return!(I.test(this.input.slice(this.pos,i))||"function"!==this.input.slice(i,i+8)||i+8!==this.input.length&&(_(e=this.input.charCodeAt(i+8))||e>55295&&e<56320))},re.parseStatement=function(e,t,i){var r,s=this.type,n=this.startNode();switch(this.isLet(e)&&(s=R._var,r="let"),s){case R._break:case R._continue:return this.parseBreakContinueStatement(n,s.keyword);case R._debugger:return this.parseDebuggerStatement(n);case R._do:return this.parseDoStatement(n);case R._for:return this.parseForStatement(n);case R._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(n,!1,!e);case R._class:return e&&this.unexpected(),this.parseClass(n,!0);case R._if:return this.parseIfStatement(n);case R._return:return this.parseReturnStatement(n);case R._switch:return this.parseSwitchStatement(n);case R._throw:return this.parseThrowStatement(n);case R._try:return this.parseTryStatement(n);case R._const:case R._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(n,r);case R._while:return this.parseWhileStatement(n);case R._with:return this.parseWithStatement(n);case R.braceL:return this.parseBlock(!0,n);case R.semi:return this.parseEmptyStatement(n);case R._export:case R._import:if(this.options.ecmaVersion>10&&s===R._import){M.lastIndex=this.pos;var a=M.exec(this.input),o=this.pos+a[0].length,h=this.input.charCodeAt(o);if(40===h||46===h)return this.parseExpressionStatement(n,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===R._import?this.parseImport(n):this.parseExport(n,i);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!e);var l=this.value,c=this.parseExpression();return s===R.name&&"Identifier"===c.type&&this.eat(R.colon)?this.parseLabeledStatement(n,l,c,e):this.parseExpressionStatement(n,c)}},re.parseBreakContinueStatement=function(e,t){var i="break"===t;this.next(),this.eat(R.semi)||this.insertSemicolon()?e.label=null:this.type!==R.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=this.labels[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,i?"BreakStatement":"ContinueStatement")},re.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},re.parseDoStatement=function(e){return this.next(),this.labels.push(se),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(R._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(R.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},re.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(se),this.enterScope(0),this.expect(R.parenL),this.type===R.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var i=this.isLet();if(this.type===R._var||this.type===R._const||i){var r=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(r,!0,s),this.finishNode(r,"VariableDeclaration"),(this.type===R._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===R._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var n=this.isContextual("let"),a=!1,o=this.containsEsc,h=new ie,l=this.start,c=t>-1?this.parseExprSubscripts(h,"await"):this.parseExpression(!0,h);return this.type===R._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===R._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(c.start!==l||o||"Identifier"!==c.type||"async"!==c.name?this.options.ecmaVersion>=9&&(e.await=!1):this.unexpected()),n&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,h),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(h,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))},re.parseFunctionStatement=function(e,t,i){return this.next(),this.parseFunction(e,oe|(i?0:he),!1,t)},re.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(R._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},re.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(R.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},re.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(R.braceL),this.labels.push(ne),this.enterScope(0);for(var i=!1;this.type!==R.braceR;)if(this.type===R._case||this.type===R._default){var r=this.type===R._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,t.test=null),this.expect(R.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},re.parseThrowStatement=function(e){return this.next(),I.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ae=[];re.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t="Identifier"===e.type;return this.enterScope(t?32:0),this.checkLValPattern(e,t?4:2),this.expect(R.parenR),e},re.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===R._catch){var t=this.startNode();this.next(),this.eat(R.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(R._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},re.parseVarStatement=function(e,t,i){return this.next(),this.parseVar(e,!1,t,i),this.semicolon(),this.finishNode(e,"VariableDeclaration")},re.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(se),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},re.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},re.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},re.parseLabeledStatement=function(e,t,i,r){for(var s=0,n=this.labels;s<n.length;s+=1)n[s].name===t&&this.raise(i.start,"Label '"+t+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===R._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var h=this.labels[o];if(h.statementStart!==e.start)break;h.statementStart=this.start,h.kind=a}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=i,this.finishNode(e,"LabeledStatement")},re.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},re.parseBlock=function(e,t,i){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(R.braceL),e&&this.enterScope(0);this.type!==R.braceR;){var r=this.parseStatement(null);t.body.push(r)}return i&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")},re.parseFor=function(e,t){return e.init=t,this.expect(R.semi),e.test=this.type===R.semi?null:this.parseExpression(),this.expect(R.semi),e.update=this.type===R.parenR?null:this.parseExpression(),this.expect(R.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},re.parseForIn=function(e,t){var i=this.type===R._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)&&this.raise(t.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(R.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,i?"ForInStatement":"ForOfStatement")},re.parseVar=function(e,t,i,r){for(e.declarations=[],e.kind=i;;){var s=this.startNode();if(this.parseVarId(s,i),this.eat(R.eq)?s.init=this.parseMaybeAssign(t):r||"const"!==i||this.type===R._in||this.options.ecmaVersion>=6&&this.isContextual("of")?r||"Identifier"===s.id.type||t&&(this.type===R._in||this.isContextual("of"))?s.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(R.comma))break}return e},re.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,"var"===t?1:2,!1)};var oe=1,he=2;function le(e,t){var i=t.key.name,r=e[i],s="true";return"MethodDefinition"!==t.type||"get"!==t.kind&&"set"!==t.kind||(s=(t.static?"s":"i")+t.kind),"iget"===r&&"iset"===s||"iset"===r&&"iget"===s||"sget"===r&&"sset"===s||"sset"===r&&"sget"===s?(e[i]="true",!1):!!r||(e[i]=s,!1)}function ce(e,t){var i=e.computed,r=e.key;return!i&&("Identifier"===r.type&&r.name===t||"Literal"===r.type&&r.value===t)}re.parseFunction=function(e,t,i,r,s){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===R.star&&t&he&&this.unexpected(),e.generator=this.eat(R.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&oe&&(e.id=4&t&&this.type!==R.name?null:this.parseIdent(),!e.id||t&he||this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var n=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Q(e.async,e.generator)),t&oe||(e.id=this.type===R.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,i,!1,s),this.yieldPos=n,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&oe?"FunctionDeclaration":"FunctionExpression")},re.parseFunctionParams=function(e){this.expect(R.parenL),e.params=this.parseBindingList(R.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},re.parseClass=function(e,t){this.next();var i=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),s=this.startNode(),n=!1;for(s.body=[],this.expect(R.braceL);this.type!==R.braceR;){var a=this.parseClassElement(null!==e.superClass);a&&(s.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(n&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),n=!0):a.key&&"PrivateIdentifier"===a.key.type&&le(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),e.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},re.parseClassElement=function(e){if(this.eat(R.semi))return null;var t=this.options.ecmaVersion,i=this.startNode(),r="",s=!1,n=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(R.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===R.star?o=!0:r="static"}if(i.static=o,!r&&t>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==R.star||this.canInsertSemicolon()?r="async":n=!0),!r&&(t>=9||!n)&&this.eat(R.star)&&(s=!0),!r&&!n&&!s){var h=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=h:r=h)}if(r?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=r,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),t<13||this.type===R.parenL||"method"!==a||s||n){var l=!i.static&&ce(i,"constructor"),c=l&&e;l&&"method"!==a&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=l?"constructor":a,this.parseClassMethod(i,s,n,c)}else this.parseClassField(i);return i},re.isClassElementNameStart=function(){return this.type===R.name||this.type===R.privateId||this.type===R.num||this.type===R.string||this.type===R.bracketL||this.type.keyword},re.parseClassElementName=function(e){this.type===R.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},re.parseClassMethod=function(e,t,i,r){var s=e.key;"constructor"===e.kind?(t&&this.raise(s.start,"Constructor can't be a generator"),i&&this.raise(s.start,"Constructor can't be an async method")):e.static&&ce(e,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var n=e.value=this.parseMethod(t,i,r);return"get"===e.kind&&0!==n.params.length&&this.raiseRecoverable(n.start,"getter should have no params"),"set"===e.kind&&1!==n.params.length&&this.raiseRecoverable(n.start,"setter should have exactly one param"),"set"===e.kind&&"RestElement"===n.params[0].type&&this.raiseRecoverable(n.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},re.parseClassField=function(e){if(ce(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&ce(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(R.eq)){var t=this.currentThisScope(),i=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=i}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")},re.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(320);this.type!==R.braceR;){var i=this.parseStatement(null);e.body.push(i)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")},re.parseClassId=function(e,t){this.type===R.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},re.parseClassSuper=function(e){e.superClass=this.eat(R._extends)?this.parseExprSubscripts(null,!1):null},re.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},re.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,i=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,s=0===r?null:this.privateNameStack[r-1],n=0;n<i.length;++n){var a=i[n];G(t,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},re.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==R.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},re.parseExport=function(e,t){if(this.next(),this.eat(R.star))return this.parseExportAllDeclaration(e,t);if(this.eat(R._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==R.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var i=0,r=e.specifiers;i<r.length;i+=1){var s=r[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local),"Literal"===s.local.type&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},re.parseExportDeclaration=function(e){return this.parseStatement(null)},re.parseExportDefaultDeclaration=function(){var e;if(this.type===R._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,4|oe,!1,e)}if(this.type===R._class){var i=this.startNode();return this.parseClass(i,"nullableID")}var r=this.parseMaybeAssign();return this.semicolon(),r},re.checkExport=function(e,t,i){e&&("string"!=typeof t&&(t="Identifier"===t.type?t.name:t.value),G(e,t)&&this.raiseRecoverable(i,"Duplicate export '"+t+"'"),e[t]=!0)},re.checkPatternExport=function(e,t){var i=t.type;if("Identifier"===i)this.checkExport(e,t,t.start);else if("ObjectPattern"===i)for(var r=0,s=t.properties;r<s.length;r+=1){var n=s[r];this.checkPatternExport(e,n)}else if("ArrayPattern"===i)for(var a=0,o=t.elements;a<o.length;a+=1){var h=o[a];h&&this.checkPatternExport(e,h)}else"Property"===i?this.checkPatternExport(e,t.value):"AssignmentPattern"===i?this.checkPatternExport(e,t.left):"RestElement"===i&&this.checkPatternExport(e,t.argument)},re.checkVariableExport=function(e,t){if(e)for(var i=0,r=t;i<r.length;i+=1){var s=r[i];this.checkPatternExport(e,s.id)}},re.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},re.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")},re.parseExportSpecifiers=function(e){var t=[],i=!0;for(this.expect(R.braceL);!this.eat(R.braceR);){if(i)i=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;t.push(this.parseExportSpecifier(e))}return t},re.parseImport=function(e){return this.next(),this.type===R.string?(e.specifiers=ae,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===R.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},re.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportSpecifier")},re.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportDefaultSpecifier")},re.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,2),this.finishNode(e,"ImportNamespaceSpecifier")},re.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===R.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(R.comma)))return e;if(this.type===R.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(R.braceL);!this.eat(R.braceR);){if(t)t=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;e.push(this.parseImportSpecifier())}return e},re.parseWithClause=function(){var e=[];if(!this.eat(R._with))return e;this.expect(R.braceL);for(var t={},i=!0;!this.eat(R.braceR);){if(i)i=!1;else if(this.expect(R.comma),this.afterTrailingComma(R.braceR))break;var r=this.parseImportAttribute(),s="Identifier"===r.key.type?r.key.name:r.key.value;G(t,s)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+s+"'"),t[s]=!0,e.push(r)}return e},re.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===R.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved),this.expect(R.colon),this.type!==R.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},re.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===R.string){var e=this.parseLiteral(this.value);return j.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},re.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},re.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var ue=Z.prototype;ue.toAssignable=function(e,t,i){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var r=0,s=e.properties;r<s.length;r+=1){var n=s[r];this.toAssignable(n,t),"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,i);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return e},ue.toAssignableList=function(e,t){for(var i=e.length,r=0;r<i;r++){var s=e[r];s&&this.toAssignable(s,t)}if(i){var n=e[i-1];6===this.options.ecmaVersion&&t&&n&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}return e},ue.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},ue.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==R.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},ue.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case R.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(R.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case R.braceL:return this.parseObj(!0)}return this.parseIdent()},ue.parseBindingList=function(e,t,i,r){for(var s=[],n=!0;!this.eat(e);)if(n?n=!1:this.expect(R.comma),t&&this.type===R.comma)s.push(null);else{if(i&&this.afterTrailingComma(e))break;if(this.type===R.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}s.push(this.parseAssignableListItem(r))}return s},ue.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},ue.parseBindingListItem=function(e){return e},ue.parseMaybeDefault=function(e,t,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(R.eq))return i;var r=this.startNodeAt(e,t);return r.left=i,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},ue.checkLValSimple=function(e,t,i){void 0===t&&(t=0);var r=0!==t;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),i&&(G(i,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),i[e.name]=!0),5!==t&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,i);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}},ue.checkLValPattern=function(e,t,i){switch(void 0===t&&(t=0),e.type){case"ObjectPattern":for(var r=0,s=e.properties;r<s.length;r+=1){var n=s[r];this.checkLValInnerPattern(n,t,i)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var h=o[a];h&&this.checkLValInnerPattern(h,t,i)}break;default:this.checkLValSimple(e,t,i)}},ue.checkLValInnerPattern=function(e,t,i){switch(void 0===t&&(t=0),e.type){case"Property":this.checkLValInnerPattern(e.value,t,i);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,i);break;case"RestElement":this.checkLValPattern(e.argument,t,i);break;default:this.checkLValPattern(e,t,i)}};var pe=function(e,t,i,r,s){this.token=e,this.isExpr=!!t,this.preserveSpace=!!i,this.override=r,this.generator=!!s},fe={b_stat:new pe("{",!1),b_expr:new pe("{",!0),b_tmpl:new pe("${",!1),p_stat:new pe("(",!1),p_expr:new pe("(",!0),q_tmpl:new pe("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new pe("function",!1),f_expr:new pe("function",!0),f_expr_gen:new pe("function",!0,!1,null,!0),f_gen:new pe("function",!1,!1,null,!0)},de=Z.prototype;de.initialContext=function(){return[fe.b_stat]},de.curContext=function(){return this.context[this.context.length-1]},de.braceIsBlock=function(e){var t=this.curContext();return t===fe.f_expr||t===fe.f_stat||(e!==R.colon||t!==fe.b_stat&&t!==fe.b_expr?e===R._return||e===R.name&&this.exprAllowed?I.test(this.input.slice(this.lastTokEnd,this.start)):e===R._else||e===R.semi||e===R.eof||e===R.parenR||e===R.arrow||(e===R.braceL?t===fe.b_stat:e!==R._var&&e!==R._const&&e!==R.name&&!this.exprAllowed):!t.isExpr)},de.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},de.updateContext=function(e){var t,i=this.type;i.keyword&&e===R.dot?this.exprAllowed=!1:(t=i.updateContext)?t.call(this,e):this.exprAllowed=i.beforeExpr},de.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},R.parenR.updateContext=R.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===fe.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},R.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?fe.b_stat:fe.b_expr),this.exprAllowed=!0},R.dollarBraceL.updateContext=function(){this.context.push(fe.b_tmpl),this.exprAllowed=!0},R.parenL.updateContext=function(e){var t=e===R._if||e===R._for||e===R._with||e===R._while;this.context.push(t?fe.p_stat:fe.p_expr),this.exprAllowed=!0},R.incDec.updateContext=function(){},R._function.updateContext=R._class.updateContext=function(e){!e.beforeExpr||e===R._else||e===R.semi&&this.curContext()!==fe.p_stat||e===R._return&&I.test(this.input.slice(this.lastTokEnd,this.start))||(e===R.colon||e===R.braceL)&&this.curContext()===fe.b_stat?this.context.push(fe.f_stat):this.context.push(fe.f_expr),this.exprAllowed=!1},R.colon.updateContext=function(){"function"===this.curContext().token&&this.context.pop(),this.exprAllowed=!0},R.backQuote.updateContext=function(){this.curContext()===fe.q_tmpl?this.context.pop():this.context.push(fe.q_tmpl),this.exprAllowed=!1},R.star.updateContext=function(e){if(e===R._function){var t=this.context.length-1;this.context[t]===fe.f_expr?this.context[t]=fe.f_expr_gen:this.context[t]=fe.f_gen}this.exprAllowed=!0},R.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==R.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var me=Z.prototype;function ge(e){return"Identifier"===e.type||"ParenthesizedExpression"===e.type&&ge(e.expression)}function ve(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&ve(e.expression)||"ParenthesizedExpression"===e.type&&ve(e.expression)}me.checkPropClash=function(e,t,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,s=e.key;switch(s.type){case"Identifier":r=s.name;break;case"Literal":r=String(s.value);break;default:return}var n=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===n&&(t.proto&&(i?i.doubleProto<0&&(i.doubleProto=s.start):this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),t.proto=!0);else{var a=t[r="$"+r];a?("init"===n?this.strict&&a.init||a.get||a.set:a.init||a[n])&&this.raiseRecoverable(s.start,"Redefinition of property"):a=t[r]={init:!1,get:!1,set:!1},a[n]=!0}}},me.parseExpression=function(e,t){var i=this.start,r=this.startLoc,s=this.parseMaybeAssign(e,t);if(this.type===R.comma){var n=this.startNodeAt(i,r);for(n.expressions=[s];this.eat(R.comma);)n.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(n,"SequenceExpression")}return s},me.parseMaybeAssign=function(e,t,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,s=-1,n=-1,a=-1;t?(s=t.parenthesizedAssign,n=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new ie,r=!0);var o=this.start,h=this.startLoc;this.type!==R.parenL&&this.type!==R.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);var l=this.parseMaybeConditional(e,t);if(i&&(l=i.call(this,l,o,h)),this.type.isAssign){var c=this.startNodeAt(o,h);return c.operator=this.value,this.type===R.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===R.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),s>-1&&(t.parenthesizedAssign=s),n>-1&&(t.trailingComma=n),l},me.parseMaybeConditional=function(e,t){var i=this.start,r=this.startLoc,s=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return s;if(this.eat(R.question)){var n=this.startNodeAt(i,r);return n.test=s,n.consequent=this.parseMaybeAssign(),this.expect(R.colon),n.alternate=this.parseMaybeAssign(e),this.finishNode(n,"ConditionalExpression")}return s},me.parseExprOps=function(e,t){var i=this.start,r=this.startLoc,s=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||s.start===i&&"ArrowFunctionExpression"===s.type?s:this.parseExprOp(s,i,r,-1,e)},me.parseExprOp=function(e,t,i,r,s){var n=this.type.binop;if(null!=n&&(!s||this.type!==R._in)&&n>r){var a=this.type===R.logicalOR||this.type===R.logicalAND,o=this.type===R.coalesce;o&&(n=R.logicalAND.binop);var h=this.value;this.next();var l=this.start,c=this.startLoc,u=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),l,c,n,s),p=this.buildBinary(t,i,e,u,h,a||o);return(a&&this.type===R.coalesce||o&&(this.type===R.logicalOR||this.type===R.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,t,i,r,s)}return e},me.buildBinary=function(e,t,i,r,s,n){"PrivateIdentifier"===r.type&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=i,a.operator=s,a.right=r,this.finishNode(a,n?"LogicalExpression":"BinaryExpression")},me.parseMaybeUnary=function(e,t,i,r){var s,n=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)s=this.parseAwait(r),t=!0;else if(this.type.prefix){var o=this.startNode(),h=this.type===R.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,h,r),this.checkExpressionErrors(e,!0),h?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&ge(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&ve(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,s=this.finishNode(o,h?"UpdateExpression":"UnaryExpression")}else if(t||this.type!==R.privateId){if(s=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return s;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(n,a);l.operator=this.value,l.prefix=!1,l.argument=s,this.checkLValSimple(s),this.next(),s=this.finishNode(l,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),s=this.parsePrivateIdent(),this.type!==R._in&&this.unexpected();return i||!this.eat(R.starstar)?s:t?void this.unexpected(this.lastTokStart):this.buildBinary(n,a,s,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},me.parseExprSubscripts=function(e,t){var i=this.start,r=this.startLoc,s=this.parseExprAtom(e,t);if("ArrowFunctionExpression"===s.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return s;var n=this.parseSubscripts(s,i,r,!1,t);return e&&"MemberExpression"===n.type&&(e.parenthesizedAssign>=n.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=n.start&&(e.parenthesizedBind=-1),e.trailingComma>=n.start&&(e.trailingComma=-1)),n},me.parseSubscripts=function(e,t,i,r,s){for(var n=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start==5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,i,r,n,a,s);if(o.optional&&(a=!0),o===e||"ArrowFunctionExpression"===o.type){if(a){var h=this.startNodeAt(t,i);h.expression=o,o=this.finishNode(h,"ChainExpression")}return o}e=o}},me.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(R.arrow)},me.parseSubscriptAsyncArrow=function(e,t,i,r){return this.parseArrowExpression(this.startNodeAt(e,t),i,!0,r)},me.parseSubscript=function(e,t,i,r,s,n,a){var o=this.options.ecmaVersion>=11,h=o&&this.eat(R.questionDot);r&&h&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(R.bracketL);if(l||h&&this.type!==R.parenL&&this.type!==R.backQuote||this.eat(R.dot)){var c=this.startNodeAt(t,i);c.object=e,l?(c.property=this.parseExpression(),this.expect(R.bracketR)):this.type===R.privateId&&"Super"!==e.type?c.property=this.parsePrivateIdent():c.property=this.parseIdent("never"!==this.options.allowReserved),c.computed=!!l,o&&(c.optional=h),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(R.parenL)){var u=new ie,p=this.yieldPos,f=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(R.parenR,this.options.ecmaVersion>=8,!1,u);if(s&&!h&&this.shouldParseAsyncArrow())return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=f,this.awaitIdentPos=d,this.parseSubscriptAsyncArrow(t,i,m,a);this.checkExpressionErrors(u,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var g=this.startNodeAt(t,i);g.callee=e,g.arguments=m,o&&(g.optional=h),e=this.finishNode(g,"CallExpression")}else if(this.type===R.backQuote){(h||n)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,i);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e},me.parseExprAtom=function(e,t,i){this.type===R.slash&&this.readRegexp();var r,s=this.potentialArrowAt===this.start;switch(this.type){case R._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type!==R.parenL||this.allowDirectSuper||this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==R.dot&&this.type!==R.bracketL&&this.type!==R.parenL&&this.unexpected(),this.finishNode(r,"Super");case R._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case R.name:var n=this.start,a=this.startLoc,o=this.containsEsc,h=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===h.name&&!this.canInsertSemicolon()&&this.eat(R._function))return this.overrideContext(fe.f_expr),this.parseFunction(this.startNodeAt(n,a),0,!1,!0,t);if(s&&!this.canInsertSemicolon()){if(this.eat(R.arrow))return this.parseArrowExpression(this.startNodeAt(n,a),[h],!1,t);if(this.options.ecmaVersion>=8&&"async"===h.name&&this.type===R.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return h=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(R.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,a),[h],!0,t)}return h;case R.regexp:var l=this.value;return(r=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},r;case R.num:case R.string:return this.parseLiteral(this.value);case R._null:case R._true:case R._false:return(r=this.startNode()).value=this.type===R._null?null:this.type===R._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case R.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(s,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),u;case R.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(R.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case R.braceL:return this.overrideContext(fe.b_expr),this.parseObj(!1,e);case R._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case R._class:return this.parseClass(this.startNode(),!1);case R._new:return this.parseNew();case R.backQuote:return this.parseTemplate();case R._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}},me.parseExprAtomDefault=function(){this.unexpected()},me.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===R.parenL&&!e)return this.parseDynamicImport(t);if(this.type===R.dot){var i=this.startNodeAt(t.start,t.loc&&t.loc.start);return i.name="import",t.meta=this.finishNode(i,"Identifier"),this.parseImportMeta(t)}this.unexpected()},me.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(R.parenR)?e.options=null:(this.expect(R.comma),this.afterTrailingComma(R.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(R.parenR)||(this.expect(R.comma),this.afterTrailingComma(R.parenR)||this.unexpected())));else if(!this.eat(R.parenR)){var t=this.start;this.eat(R.comma)&&this.eat(R.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},me.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),"meta"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},me.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")},me.parseParenExpression=function(){this.expect(R.parenL);var e=this.parseExpression();return this.expect(R.parenR),e},me.shouldParseArrow=function(e){return!this.canInsertSemicolon()},me.parseParenAndDistinguishExpression=function(e,t){var i,r=this.start,s=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,h=this.startLoc,l=[],c=!0,u=!1,p=new ie,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==R.parenR;){if(c?c=!1:this.expect(R.comma),n&&this.afterTrailingComma(R.parenR,!0)){u=!0;break}if(this.type===R.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(R.parenR),e&&this.shouldParseArrow(l)&&this.eat(R.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(r,s,l,t);l.length&&!u||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((i=this.startNodeAt(o,h)).expressions=l,this.finishNodeAt(i,"SequenceExpression",m,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(r,s);return v.expression=i,this.finishNode(v,"ParenthesizedExpression")}return i},me.parseParenItem=function(e){return e},me.parseParenArrowList=function(e,t,i,r){return this.parseArrowExpression(this.startNodeAt(e,t),i,!1,r)};var ye=[];me.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===R.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var i=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,s=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,s,!0,!1),this.eat(R.parenL)?e.arguments=this.parseExprList(R.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ye,this.finishNode(e,"NewExpression")},me.parseTemplateElement=function(e){var t=e.isTagged,i=this.startNode();return this.type===R.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value.replace(/\r\n?/g,"\n"),cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===R.backQuote,this.finishNode(i,"TemplateElement")},me.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var i=this.startNode();this.next(),i.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(i.quasis=[r];!r.tail;)this.type===R.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(R.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(R.braceR),i.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(i,"TemplateLiteral")},me.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===R.name||this.type===R.num||this.type===R.string||this.type===R.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===R.star)&&!I.test(this.input.slice(this.lastTokEnd,this.start))},me.parseObj=function(e,t){var i=this.startNode(),r=!0,s={};for(i.properties=[],this.next();!this.eat(R.braceR);){if(r)r=!1;else if(this.expect(R.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(R.braceR))break;var n=this.parseProperty(e,t);e||this.checkPropClash(n,s,t),i.properties.push(n)}return this.finishNode(i,e?"ObjectPattern":"ObjectExpression")},me.parseProperty=function(e,t){var i,r,s,n,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(R.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===R.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,t),this.type===R.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(s=this.start,n=this.startLoc),e||(i=this.eat(R.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(R.star),this.parsePropertyName(a)):r=!1,this.parsePropertyValue(a,e,i,r,s,n,t,o),this.finishNode(a,"Property")},me.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t="get"===e.kind?0:1;if(e.value.params.length!==t){var i=e.value.start;"get"===e.kind?this.raiseRecoverable(i,"getter should have no params"):this.raiseRecoverable(i,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},me.parsePropertyValue=function(e,t,i,r,s,n,a,o){(i||r)&&this.type===R.colon&&this.unexpected(),this.eat(R.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===R.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(i,r)):t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===R.comma||this.type===R.braceR||this.type===R.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((i||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=s),e.kind="init",t?e.value=this.parseMaybeDefault(s,n,this.copyNode(e.key)):this.type===R.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(s,n,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((i||r)&&this.unexpected(),this.parseGetterSetter(e))},me.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(R.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(R.bracketR),e.key;e.computed=!1}return e.key=this.type===R.num||this.type===R.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},me.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},me.parseMethod=function(e,t,i){var r=this.startNode(),s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Q(t,r.generator)|(i?128:0)),this.expect(R.parenL),r.params=this.parseBindingList(R.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},me.parseArrowExpression=function(e,t,i,r){var s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|Q(i,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},me.parseFunctionBody=function(e,t,i,r){var s=t&&this.type!==R.braceL,n=this.strict,a=!1;if(s)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);n&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var h=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!n&&!a&&!t&&!i&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,5),e.body=this.parseBlock(!1,void 0,a&&!n),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=h}this.exitScope()},me.isSimpleParamList=function(e){for(var t=0,i=e;t<i.length;t+=1)if("Identifier"!==i[t].type)return!1;return!0},me.checkParams=function(e,t){for(var i=Object.create(null),r=0,s=e.params;r<s.length;r+=1){var n=s[r];this.checkLValInnerPattern(n,1,t?null:i)}},me.parseExprList=function(e,t,i,r){for(var s=[],n=!0;!this.eat(e);){if(n)n=!1;else if(this.expect(R.comma),t&&this.afterTrailingComma(e))break;var a=void 0;i&&this.type===R.comma?a=null:this.type===R.ellipsis?(a=this.parseSpread(r),r&&this.type===R.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),s.push(a)}return s},me.checkUnreserved=function(e){var t=e.start,i=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===r&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==r&&"await"!==r||this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},me.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),"await"!==t.name||this.awaitIdentPos||(this.awaitIdentPos=t.start)),t},me.parseIdentNode=function(){var e=this.startNode();return this.type===R.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop(),this.type=R.name):this.unexpected(),e},me.parsePrivateIdent=function(){var e=this.startNode();return this.type===R.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},me.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===R.semi||this.canInsertSemicolon()||this.type!==R.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(R.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},me.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var xe=Z.prototype;xe.raise=function(e,t){var i=X(this.input,e);t+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=i,r.raisedAt=this.pos,r},xe.raiseRecoverable=xe.raise,xe.curPosition=function(){if(this.options.locations)return new W(this.curLine,this.pos-this.lineStart)};var be=Z.prototype,we=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};be.enterScope=function(e){this.scopeStack.push(new we(e))},be.exitScope=function(){this.scopeStack.pop()},be.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},be.declareName=function(e,t,i){var r=!1;if(2===t){var s=this.currentScope();r=s.lexical.indexOf(e)>-1||s.functions.indexOf(e)>-1||s.var.indexOf(e)>-1,s.lexical.push(e),this.inModule&&1&s.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var n=this.currentScope();r=this.treatFunctionsAsVar?n.lexical.indexOf(e)>-1:n.lexical.indexOf(e)>-1||n.var.indexOf(e)>-1,n.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],259&o.flags)break}r&&this.raiseRecoverable(i,"Identifier '"+e+"' has already been declared")},be.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},be.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},be.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(259&t.flags)return t}},be.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(259&t.flags&&!(16&t.flags))return t}};var Ee=function(e,t,i){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new q(e,i)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},_e=Z.prototype;function Se(e,t,i,r){return e.type=t,e.end=i,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=i),e}_e.startNode=function(){return new Ee(this,this.start,this.startLoc)},_e.startNodeAt=function(e,t){return new Ee(this,e,t)},_e.finishNode=function(e,t){return Se.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},_e.finishNodeAt=function(e,t,i,r){return Se.call(this,e,t,i,r)},_e.copyNode=function(e){var t=new Ee(this,e.start,this.startLoc);for(var i in e)t[i]=e[i];return t};var Ae,Ce,ke="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Te=ke+" Extended_Pictographic",Pe=Te+" EBase EComp EMod EPres ExtPict",Re={9:ke,10:Te,11:Te,12:Pe,13:Pe,14:Pe},Ie={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},Le="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Ne="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",De=Ne+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Oe=De+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Me=Oe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Fe=Me+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ve={9:Ne,10:De,11:Oe,12:Me,13:Fe,14:Fe+" Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz"},Be={};for(var Ge=0,Ue=[9,10,11,12,13,14];Ge<Ue.length;Ge+=1)Ce=void 0,(Ce=Be[Ae=Ue[Ge]]={binary:z(Re[Ae]+" "+Le),binaryOfStrings:z(Ie[Ae]),nonBinary:{General_Category:z(Le),Script:z(Ve[Ae])}}).nonBinary.Script_Extensions=Ce.nonBinary.Script,Ce.nonBinary.gc=Ce.nonBinary.General_Category,Ce.nonBinary.sc=Ce.nonBinary.Script,Ce.nonBinary.scx=Ce.nonBinary.Script_Extensions;var He=Z.prototype,ze=function(e,t){this.parent=e,this.base=t||this};ze.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var i=e;i;i=i.parent)if(t.base===i.base&&t!==i)return!0;return!1},ze.prototype.sibling=function(){return new ze(this.parent,this.base)};var Ke=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Be[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};function je(e){return 105===e||109===e||115===e}function We(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function qe(e){return e>=65&&e<=90||e>=97&&e<=122}function Xe(e){return qe(e)||95===e}function Ye(e){return Xe(e)||$e(e)}function $e(e){return e>=48&&e<=57}function Qe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ze(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Je(e){return e>=48&&e<=55}Ke.prototype.reset=function(e,t,i){var r=-1!==i.indexOf("v"),s=-1!==i.indexOf("u");this.start=0|e,this.source=t+"",this.flags=i,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)},Ke.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},Ke.prototype.at=function(e,t){void 0===t&&(t=!1);var i=this.source,r=i.length;if(e>=r)return-1;var s=i.charCodeAt(e);if(!t&&!this.switchU||s<=55295||s>=57344||e+1>=r)return s;var n=i.charCodeAt(e+1);return n>=56320&&n<=57343?(s<<10)+n-56613888:s},Ke.prototype.nextIndex=function(e,t){void 0===t&&(t=!1);var i=this.source,r=i.length;if(e>=r)return r;var s,n=i.charCodeAt(e);return!t&&!this.switchU||n<=55295||n>=57344||e+1>=r||(s=i.charCodeAt(e+1))<56320||s>57343?e+1:e+2},Ke.prototype.current=function(e){return void 0===e&&(e=!1),this.at(this.pos,e)},Ke.prototype.lookahead=function(e){return void 0===e&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},Ke.prototype.advance=function(e){void 0===e&&(e=!1),this.pos=this.nextIndex(this.pos,e)},Ke.prototype.eat=function(e,t){return void 0===t&&(t=!1),this.current(t)===e&&(this.advance(t),!0)},Ke.prototype.eatChars=function(e,t){void 0===t&&(t=!1);for(var i=this.pos,r=0,s=e;r<s.length;r+=1){var n=s[r],a=this.at(i,t);if(-1===a||a!==n)return!1;i=this.nextIndex(i,t)}return this.pos=i,!0},He.validateRegExpFlags=function(e){for(var t=e.validFlags,i=e.flags,r=!1,s=!1,n=0;n<i.length;n++){var a=i.charAt(n);-1===t.indexOf(a)&&this.raise(e.start,"Invalid regular expression flag"),i.indexOf(a,n+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),"u"===a&&(r=!0),"v"===a&&(s=!0)}this.options.ecmaVersion>=15&&r&&s&&this.raise(e.start,"Invalid regular expression flag")},He.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&function(e){for(var t in e)return!0;return!1}(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},He.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,i=e.backReferenceNames;t<i.length;t+=1){var r=i[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}},He.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new ze(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},He.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},He.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},He.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!i,!0}return e.pos=t,!1},He.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},He.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},He.regexp_eatBracedQuantifier=function(e,t){var i=e.pos;if(e.eat(123)){var r=0,s=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(s=e.lastIntValue),e.eat(125)))return-1!==s&&s<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=i}return!1},He.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},He.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},He.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var i=this.regexp_eatModifiers(e),r=e.eat(45);if(i||r){for(var s=0;s<i.length;s++){var n=i.charAt(s);i.indexOf(n,s+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(e);i||a||58!==e.current()||e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var h=a.charAt(o);(a.indexOf(h,o+1)>-1||i.indexOf(h)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1},He.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},He.regexp_eatModifiers=function(e){for(var t="",i=0;-1!==(i=e.current())&&je(i);)t+=K(i),e.advance();return t},He.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},He.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},He.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!We(t)&&(e.lastIntValue=t,e.advance(),!0)},He.regexp_eatPatternCharacters=function(e){for(var t=e.pos,i=0;-1!==(i=e.current())&&!We(i);)e.advance();return e.pos!==t},He.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t||(e.advance(),0))},He.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,i=e.groupNames[e.lastStringValue];if(i)if(t)for(var r=0,s=i;r<s.length;r+=1)s[r].separatedFrom(e.branchID)||e.raise("Duplicate capture group name");else e.raise("Duplicate capture group name");t?(i||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},He.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},He.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=K(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=K(e.lastIntValue);return!0}return!1},He.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,r=e.current(i);return e.advance(i),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(r=e.lastIntValue),function(e){return E(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},He.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,i=this.options.ecmaVersion>=11,r=e.current(i);return e.advance(i),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e,i)&&(r=e.lastIntValue),function(e){return _(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},He.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},He.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var i=e.lastIntValue;if(e.switchU)return i>e.maxBackReference&&(e.maxBackReference=i),!0;if(i<=e.numCapturingParens)return!0;e.pos=t}return!1},He.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},He.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},He.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},He.regexp_eatZero=function(e){return 48===e.current()&&!$e(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},He.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},He.regexp_eatControlLetter=function(e){var t=e.current();return!!qe(t)&&(e.lastIntValue=t%32,e.advance(),!0)},He.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){void 0===t&&(t=!1);var i,r=e.pos,s=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(s&&n>=55296&&n<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(n-55296)+(o-56320)+65536,!0}e.pos=a,e.lastIntValue=n}return!0}if(s&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(i=e.lastIntValue)>=0&&i<=1114111)return!0;s&&e.raise("Invalid unicode escape"),e.pos=r}return!1},He.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t||(e.lastIntValue=t,e.advance(),0))},He.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},He.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),1;var i=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((i=80===t)||112===t)){var r;if(e.lastIntValue=-1,e.advance(),e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return i&&2===r&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return 0},He.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var i=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,i,r),1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var s=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,s)}return 0},He.regexp_validateUnicodePropertyNameAndValue=function(e,t,i){G(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(i)||e.raise("Invalid property value")},He.regexp_validateUnicodePropertyNameOrValue=function(e,t){return e.unicodeProperties.binary.test(t)?1:e.switchV&&e.unicodeProperties.binaryOfStrings.test(t)?2:void e.raise("Invalid property name")},He.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Xe(t=e.current());)e.lastStringValue+=K(t),e.advance();return""!==e.lastStringValue},He.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Ye(t=e.current());)e.lastStringValue+=K(t),e.advance();return""!==e.lastStringValue},He.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},He.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),i=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&2===i&&e.raise("Negated character class may contain strings"),!0}return!1},He.regexp_classContents=function(e){return 93===e.current()?1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),1)},He.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var i=e.lastIntValue;!e.switchU||-1!==t&&-1!==i||e.raise("Invalid character class"),-1!==t&&-1!==i&&t>i&&e.raise("Range out of order in character class")}}},He.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var i=e.current();(99===i||Je(i))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},He.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},He.regexp_classSetExpression=function(e){var t,i=1;if(this.regexp_eatClassSetRange(e));else if(t=this.regexp_eatClassSetOperand(e)){2===t&&(i=2);for(var r=e.pos;e.eatChars([38,38]);)38!==e.current()&&(t=this.regexp_eatClassSetOperand(e))?2!==t&&(i=1):e.raise("Invalid character in character class");if(r!==e.pos)return i;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return i}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(!(t=this.regexp_eatClassSetOperand(e)))return i;2===t&&(i=2)}},He.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var i=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return-1!==i&&-1!==r&&i>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1},He.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},He.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var i=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return i&&2===r&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var s=this.regexp_eatCharacterClassEscape(e);if(s)return s;e.pos=t}return null},He.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var i=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return i}else e.raise("Invalid escape");e.pos=t}return null},He.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)2===this.regexp_classString(e)&&(t=2);return t},He.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return 1===t?1:2},He.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return!(!this.regexp_eatCharacterEscape(e)&&!this.regexp_eatClassSetReservedPunctuator(e)&&(e.eat(98)?(e.lastIntValue=8,0):(e.pos=t,1)));var i=e.current();return!(i<0||i===e.lookahead()&&function(e){return 33===e||e>=35&&e<=38||e>=42&&e<=44||46===e||e>=58&&e<=64||94===e||96===e||126===e}(i)||function(e){return 40===e||41===e||45===e||47===e||e>=91&&e<=93||e>=123&&e<=125}(i)||(e.advance(),e.lastIntValue=i,0))},He.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return!!function(e){return 33===e||35===e||37===e||38===e||44===e||45===e||e>=58&&e<=62||64===e||96===e||126===e}(t)&&(e.lastIntValue=t,e.advance(),!0)},He.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!$e(t)&&95!==t||(e.lastIntValue=t%32,e.advance(),0))},He.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},He.regexp_eatDecimalDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;$e(i=e.current());)e.lastIntValue=10*e.lastIntValue+(i-48),e.advance();return e.pos!==t},He.regexp_eatHexDigits=function(e){var t=e.pos,i=0;for(e.lastIntValue=0;Qe(i=e.current());)e.lastIntValue=16*e.lastIntValue+Ze(i),e.advance();return e.pos!==t},He.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var i=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*i+e.lastIntValue:e.lastIntValue=8*t+i}else e.lastIntValue=t;return!0}return!1},He.regexp_eatOctalDigit=function(e){var t=e.current();return Je(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},He.regexp_eatFixedHexDigits=function(e,t){var i=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var s=e.current();if(!Qe(s))return e.pos=i,!1;e.lastIntValue=16*e.lastIntValue+Ze(s),e.advance()}return!0};var et=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new q(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},tt=Z.prototype;function it(e){return"function"!=typeof BigInt?null:BigInt(e.replace(/_/g,""))}tt.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new et(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},tt.getToken=function(){return this.next(),new et(this)},"undefined"!=typeof Symbol&&(tt[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===R.eof,value:t}}}}),tt.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(R.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},tt.readToken=function(e){return E(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},tt.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888},tt.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var r=void 0,s=t;(r=D(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,i),t,this.pos,e,this.curPosition())},tt.skipLineComment=function(e){for(var t=this.pos,i=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!N(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,i,this.curPosition())},tt.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&O.test(String.fromCharCode(e))))break e;++this.pos}}},tt.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=e,this.value=t,this.updateContext(i)},tt.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(R.ellipsis)):(++this.pos,this.finishToken(R.dot))},tt.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(R.assign,2):this.finishOp(R.slash,1)},tt.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),i=1,r=42===e?R.star:R.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++i,r=R.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(R.assign,i+1):this.finishOp(r,i)},tt.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(R.assign,3):this.finishOp(124===e?R.logicalOR:R.logicalAND,2):61===t?this.finishOp(R.assign,2):this.finishOp(124===e?R.bitwiseOR:R.bitwiseAND,1)},tt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(R.assign,2):this.finishOp(R.bitwiseXOR,1)},tt.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!I.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(R.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(R.assign,2):this.finishOp(R.plusMin,1)},tt.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),i=1;return t===e?(i=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(R.assign,i+1):this.finishOp(R.bitShift,i)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(i=2),this.finishOp(R.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},tt.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(R.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(R.arrow)):this.finishOp(61===e?R.eq:R.prefix,1)},tt.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(46===t){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(R.questionDot,2)}if(63===t)return e>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(R.assign,3):this.finishOp(R.coalesce,2)}return this.finishOp(R.question,1)},tt.readToken_numberSign=function(){var e=35;if(this.options.ecmaVersion>=13&&(++this.pos,E(e=this.fullCharCodeAtPos(),!0)||92===e))return this.finishToken(R.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+K(e)+"'")},tt.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(R.parenL);case 41:return++this.pos,this.finishToken(R.parenR);case 59:return++this.pos,this.finishToken(R.semi);case 44:return++this.pos,this.finishToken(R.comma);case 91:return++this.pos,this.finishToken(R.bracketL);case 93:return++this.pos,this.finishToken(R.bracketR);case 123:return++this.pos,this.finishToken(R.braceL);case 125:return++this.pos,this.finishToken(R.braceR);case 58:return++this.pos,this.finishToken(R.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(R.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(R.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+K(e)+"'")},tt.finishOp=function(e,t){var i=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,i)},tt.readRegexp=function(){for(var e,t,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(I.test(r)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var n=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(n);var o=this.regexpState||(this.regexpState=new Ke(this));o.reset(i,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var h=null;try{h=new RegExp(s,a)}catch(e){}return this.finishToken(R.regexp,{pattern:s,flags:a,value:h})},tt.readInt=function(e,t,i){for(var r=this.options.ecmaVersion>=12&&void 0===t,s=i&&48===this.input.charCodeAt(this.pos),n=this.pos,a=0,o=0,h=0,l=null==t?1/0:t;h<l;++h,++this.pos){var c=this.input.charCodeAt(this.pos),u=void 0;if(r&&95===c)s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===h&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=c;else{if((u=c>=97?c-97+10:c>=65?c-65+10:c>=48&&c<=57?c-48:1/0)>=e)break;o=c,a=a*e+u}}return r&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===n||null!=t&&this.pos-n!==t?null:a},tt.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var i=this.readInt(e);return null==i&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=it(this.input.slice(t,this.pos)),++this.pos):E(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(R.num,i)},tt.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10,void 0,!0)||this.raise(t,"Invalid number");var i=this.pos-t>=2&&48===this.input.charCodeAt(t);i&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!i&&!e&&this.options.ecmaVersion>=11&&110===r){var s=it(this.input.slice(t,this.pos));return++this.pos,E(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(R.num,s)}i&&/[89]/.test(this.input.slice(t,this.pos))&&(i=!1),46!==r||i||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||i||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),E(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var n,a=(n=this.input.slice(t,this.pos),i?parseInt(n,8):parseFloat(n.replace(/_/g,"")));return this.finishToken(R.num,a)},tt.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},tt.readString=function(e){for(var t="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(i,this.pos),t+=this.readEscapedChar(!1),i=this.pos):8232===r||8233===r?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(N(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(i,this.pos++),this.finishToken(R.string,t)};var rt={};function st(e,t){return Z.parse(e,t)}function nt(e){this.canvas=e.canvas,this.cache={},this.imageHolder=null,this.imageHolder||(this.imageHolder=document.createElement("div"),this.imageHolder.style.height=0,this.imageHolder.style.width=0,this.imageHolder.style.overflow="hidden",this.imageHolder.style.position="absolute",document.body.appendChild(this.imageHolder))}tt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==rt)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},tt.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw rt;this.raise(e,t)},tt.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==R.template&&this.type!==R.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(R.template,e)):36===i?(this.pos+=2,this.finishToken(R.dollarBraceL)):(++this.pos,this.finishToken(R.backQuote));if(92===i)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(N(i)){switch(e+=this.input.slice(t,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},tt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(R.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":"\n"===this.input[this.pos+1]&&++this.pos;case"\n":case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1}this.raise(this.start,"Unterminated template")},tt.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return K(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(r,8);return s>255&&(r=r.slice(0,-1),s=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return N(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}},tt.readHexChar=function(e){var t=this.pos,i=this.readInt(16,e);return null===i&&this.invalidStringToken(t,"Bad character escape sequence"),i},tt.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,i=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(_(s,r))this.pos+=s<=65535?1:2;else{if(92!==s)break;this.containsEsc=!0,e+=this.input.slice(i,this.pos);var n=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?E:_)(a,r)||this.invalidStringToken(n,"Invalid Unicode escape"),e+=K(a),i=this.pos}t=!1}return e+this.input.slice(i,this.pos)},tt.readWord=function(){var e=this.readWord1(),t=R.name;return this.keywords.test(e)&&(t=T[e]),this.finishToken(t,e)},Z.acorn={Parser:Z,version:"8.14.0",defaultOptions:Y,Position:W,SourceLocation:q,getLineInfo:X,Node:Ee,TokenType:S,tokTypes:R,keywordTypes:T,TokContext:pe,tokContexts:fe,isIdentifierChar:_,isIdentifierStart:E,Token:et,isNewLine:N,lineBreak:I,lineBreakG:L,nonASCIIwhitespace:O},nt.prototype.cacheResources=function(e){var t=this,i=Object.keys(e).map((function(e){return t.loadResource(e)}));return Promise.all(i)},nt.prototype.loadResource=function(e){return e.endsWith(".png")?this.loadImage(e):e.endsWith(".mp3")?this.loadSound(e):void 0},nt.prototype.loadImage=function(e){var t=this;return new Promise((function(i){var r=document.createElement("img");r.onload=function(){t.cache[e]=r,i()},r.onerror=function(){i()},r.src=/^(http:|https:)\/\//.test(e)?e:"https://www.kasandbox.org/programming-images/"+e,t.imageHolder.appendChild(r)}))},nt.prototype.loadSound=function(e){var t=this;return new Promise((function(i){var r=document.createElement("audio"),s=e.split("/"),n=OutputSounds[0].groups.find((e=>e[groupName]===s[0]));n&&n.sounds.includes(s[1].replace(".mp3",""))?(r.preload="auto",r.oncanplaythrough=function(){t.cache[e]={audio:r,__id:function(){return"getSound('"+e.replace(".mp3","")+"')"}},i()},r.onerror=function(){i()},r.src=/^(http:|https:)\/\//.test(e)?e:"https://cdn.kastatic.org/third_party/javascript-khansrc/live-editor/sounds/"+e):i()}))},nt.prototype.getResource=function(e,t){switch(t){case"image":return this.getImage(e);case"sound":return this.getSound(e);default:throw"we can't load '"+t+"' resources yet"}},nt.prototype.getImage=function(e){var t=this.cache[e+".png"];if(!t)throw"Image "+e+" was not found.";var i=new this.canvas.PImage(t);return i.__id=function(){return"getImage('"+e+"')"},i},nt.prototype.getSound=function(e){var t=this.cache[e+".mp3"];if(!t)throw"Sound "+e+" was not found.";return t},nt.findResources=function(e){var t=st(e,{ecmaVersion:"latest",locations:!0}),i={};return a(t,null,[o.findResources(i)]),i};const{stringify:at}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const ot={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},ht=17,lt={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:ht,ClassExpression:ht,FunctionExpression:ht,ObjectExpression:ht,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function ct(e,t){const{generator:i}=e;if(e.write("("),null!=t&&t.length>0){i[t[0].type](t[0],e);const{length:r}=t;for(let s=1;s<r;s++){const r=t[s];e.write(", "),i[r.type](r,e)}}e.write(")")}function ut(e,t,i,r){const s=e.expressionsPrecedence[t.type];if(s===ht)return!0;const n=e.expressionsPrecedence[i.type];return s!==n?!r&&15===s&&14===n&&"**"===i.operator||s<n:(13===s||14===s)&&("**"===t.operator&&"**"===i.operator?!r:13===s&&13===n&&("??"===t.operator||"??"===i.operator)||(r?ot[t.operator]<=ot[i.operator]:ot[t.operator]<ot[i.operator]))}function pt(e,t,i,r){const{generator:s}=e;ut(e,t,i,r)?(e.write("("),s[t.type](t,e),e.write(")")):s[t.type](t,e)}function ft(e,t,i,r){const s=t.split("\n"),n=s.length-1;if(e.write(s[0].trim()),n>0){e.write(r);for(let t=1;t<n;t++)e.write(i+s[t].trim()+r);e.write(i+s[n].trim())}}function dt(e,t,i,r){const{length:s}=t;for(let n=0;n<s;n++){const s=t[n];e.write(i),"L"===s.type[0]?e.write("// "+s.value.trim()+"\n",s):(e.write("/*"),ft(e,s.value,i,r),e.write("*/"+r))}}function mt(e,t){const{generator:i}=e,{declarations:r}=t;e.write(t.kind+" ");const{length:s}=r;if(s>0){i.VariableDeclarator(r[0],e);for(let t=1;t<s;t++)e.write(", "),i.VariableDeclarator(r[t],e)}}let gt,vt,yt,xt,bt,wt;const Et={Program(e,t){const i=t.indent.repeat(t.indentLevel),{lineEnd:r,writeComments:s}=t;s&&null!=e.comments&&dt(t,e.comments,i,r);const n=e.body,{length:a}=n;for(let e=0;e<a;e++){const a=n[e];s&&null!=a.comments&&dt(t,a.comments,i,r),t.write(i),this[a.type](a,t),t.write(r)}s&&null!=e.trailingComments&&dt(t,e.trailingComments,i,r)},BlockStatement:wt=function(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:s}=t,n=i+t.indent;t.write("{");const a=e.body;if(null!=a&&a.length>0){t.write(r),s&&null!=e.comments&&dt(t,e.comments,n,r);const{length:o}=a;for(let e=0;e<o;e++){const i=a[e];s&&null!=i.comments&&dt(t,i.comments,n,r),t.write(n),this[i.type](i,t),t.write(r)}t.write(i)}else s&&null!=e.comments&&(t.write(r),dt(t,e.comments,n,r),t.write(i));s&&null!=e.trailingComments&&dt(t,e.trailingComments,n,r),t.write("}"),t.indentLevel--},ClassBody:wt,StaticBlock(e,t){t.write("static "),this.BlockStatement(e,t)},EmptyStatement(e,t){t.write(";")},ExpressionStatement(e,t){const i=t.expressionsPrecedence[e.expression.type];i===ht||3===i&&"O"===e.expression.left.type[0]?(t.write("("),this[e.expression.type](e.expression,t),t.write(")")):this[e.expression.type](e.expression,t),t.write(";")},IfStatement(e,t){t.write("if ("),this[e.test.type](e.test,t),t.write(") "),this[e.consequent.type](e.consequent,t),null!=e.alternate&&(t.write(" else "),this[e.alternate.type](e.alternate,t))},LabeledStatement(e,t){this[e.label.type](e.label,t),t.write(": "),this[e.body.type](e.body,t)},BreakStatement(e,t){t.write("break"),null!=e.label&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},ContinueStatement(e,t){t.write("continue"),null!=e.label&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},WithStatement(e,t){t.write("with ("),this[e.object.type](e.object,t),t.write(") "),this[e.body.type](e.body,t)},SwitchStatement(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:s}=t;t.indentLevel++;const n=i+t.indent,a=n+t.indent;t.write("switch ("),this[e.discriminant.type](e.discriminant,t),t.write(") {"+r);const{cases:o}=e,{length:h}=o;for(let e=0;e<h;e++){const i=o[e];s&&null!=i.comments&&dt(t,i.comments,n,r),i.test?(t.write(n+"case "),this[i.test.type](i.test,t),t.write(":"+r)):t.write(n+"default:"+r);const{consequent:h}=i,{length:l}=h;for(let e=0;e<l;e++){const i=h[e];s&&null!=i.comments&&dt(t,i.comments,a,r),t.write(a),this[i.type](i,t),t.write(r)}}t.indentLevel-=2,t.write(i+"}")},ReturnStatement(e,t){t.write("return"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t)),t.write(";")},ThrowStatement(e,t){t.write("throw "),this[e.argument.type](e.argument,t),t.write(";")},TryStatement(e,t){if(t.write("try "),this[e.block.type](e.block,t),e.handler){const{handler:i}=e;null==i.param?t.write(" catch "):(t.write(" catch ("),this[i.param.type](i.param,t),t.write(") ")),this[i.body.type](i.body,t)}e.finalizer&&(t.write(" finally "),this[e.finalizer.type](e.finalizer,t))},WhileStatement(e,t){t.write("while ("),this[e.test.type](e.test,t),t.write(") "),this[e.body.type](e.body,t)},DoWhileStatement(e,t){t.write("do "),this[e.body.type](e.body,t),t.write(" while ("),this[e.test.type](e.test,t),t.write(");")},ForStatement(e,t){if(t.write("for ("),null!=e.init){const{init:i}=e;"V"===i.type[0]?mt(t,i):this[i.type](i,t)}t.write("; "),e.test&&this[e.test.type](e.test,t),t.write("; "),e.update&&this[e.update.type](e.update,t),t.write(") "),this[e.body.type](e.body,t)},ForInStatement:gt=function(e,t){t.write(`for ${e.await?"await ":""}(`);const{left:i}=e;"V"===i.type[0]?mt(t,i):this[i.type](i,t),t.write("I"===e.type[3]?" in ":" of "),this[e.right.type](e.right,t),t.write(") "),this[e.body.type](e.body,t)},ForOfStatement:gt,DebuggerStatement(e,t){t.write("debugger;",e)},FunctionDeclaration:vt=function(e,t){t.write((e.async?"async ":"")+(e.generator?"function* ":"function ")+(e.id?e.id.name:""),e),ct(t,e.params),t.write(" "),this[e.body.type](e.body,t)},FunctionExpression:vt,VariableDeclaration(e,t){mt(t,e),t.write(";")},VariableDeclarator(e,t){this[e.id.type](e.id,t),null!=e.init&&(t.write(" = "),this[e.init.type](e.init,t))},ClassDeclaration(e,t){if(t.write("class "+(e.id?`${e.id.name} `:""),e),e.superClass){t.write("extends ");const{superClass:i}=e,{type:r}=i,s=t.expressionsPrecedence[r];"C"===r[0]&&"l"===r[1]&&"E"===r[5]||!(s===ht||s<t.expressionsPrecedence.ClassExpression)?this[i.type](i,t):(t.write("("),this[e.superClass.type](i,t),t.write(")")),t.write(" ")}this.ClassBody(e.body,t)},ImportDeclaration(e,t){t.write("import ");const{specifiers:i,attributes:r}=e,{length:s}=i;let n=0;if(s>0){for(;n<s;){n>0&&t.write(", ");const e=i[n],r=e.type[6];if("D"===r)t.write(e.local.name,e),n++;else{if("N"!==r)break;t.write("* as "+e.local.name,e),n++}}if(n<s){for(t.write("{");;){const e=i[n],{name:r}=e.imported;if(t.write(r,e),r!==e.local.name&&t.write(" as "+e.local.name),!(++n<s))break;t.write(", ")}t.write("}")}t.write(" from ")}if(this.Literal(e.source,t),r&&r.length>0){t.write(" with { ");for(let e=0;e<r.length;e++)this.ImportAttribute(r[e],t),e<r.length-1&&t.write(", ");t.write(" }")}t.write(";")},ImportAttribute(e,t){this.Identifier(e.key,t),t.write(": "),this.Literal(e.value,t)},ImportExpression(e,t){t.write("import("),this[e.source.type](e.source,t),t.write(")")},ExportDefaultDeclaration(e,t){t.write("export default "),this[e.declaration.type](e.declaration,t),null!=t.expressionsPrecedence[e.declaration.type]&&"F"!==e.declaration.type[0]&&t.write(";")},ExportNamedDeclaration(e,t){if(t.write("export "),e.declaration)this[e.declaration.type](e.declaration,t);else{t.write("{");const{specifiers:i}=e,{length:r}=i;if(r>0)for(let e=0;;){const s=i[e],{name:n}=s.local;if(t.write(n,s),n!==s.exported.name&&t.write(" as "+s.exported.name),!(++e<r))break;t.write(", ")}if(t.write("}"),e.source&&(t.write(" from "),this.Literal(e.source,t)),e.attributes&&e.attributes.length>0){t.write(" with { ");for(let i=0;i<e.attributes.length;i++)this.ImportAttribute(e.attributes[i],t),i<e.attributes.length-1&&t.write(", ");t.write(" }")}t.write(";")}},ExportAllDeclaration(e,t){if(null!=e.exported?t.write("export * as "+e.exported.name+" from "):t.write("export * from "),this.Literal(e.source,t),e.attributes&&e.attributes.length>0){t.write(" with { ");for(let i=0;i<e.attributes.length;i++)this.ImportAttribute(e.attributes[i],t),i<e.attributes.length-1&&t.write(", ");t.write(" }")}t.write(";")},MethodDefinition(e,t){e.static&&t.write("static ");const i=e.kind[0];"g"!==i&&"s"!==i||t.write(e.kind+" "),e.value.async&&t.write("async "),e.value.generator&&t.write("*"),e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),ct(t,e.value.params),t.write(" "),this[e.value.body.type](e.value.body,t)},ClassExpression(e,t){this.ClassDeclaration(e,t)},ArrowFunctionExpression(e,t){t.write(e.async?"async ":"",e);const{params:i}=e;null!=i&&(1===i.length&&"I"===i[0].type[0]?t.write(i[0].name,i[0]):ct(t,e.params)),t.write(" => "),"O"===e.body.type[0]?(t.write("("),this.ObjectExpression(e.body,t),t.write(")")):this[e.body.type](e.body,t)},ThisExpression(e,t){t.write("this",e)},Super(e,t){t.write("super",e)},RestElement:yt=function(e,t){t.write("..."),this[e.argument.type](e.argument,t)},SpreadElement:yt,YieldExpression(e,t){t.write(e.delegate?"yield*":"yield"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t))},AwaitExpression(e,t){t.write("await ",e),pt(t,e.argument,e)},TemplateLiteral(e,t){const{quasis:i,expressions:r}=e;t.write("`");const{length:s}=r;for(let e=0;e<s;e++){const s=r[e],n=i[e];t.write(n.value.raw,n),t.write("${"),this[s.type](s,t),t.write("}")}const n=i[i.length-1];t.write(n.value.raw,n),t.write("`")},TemplateElement(e,t){t.write(e.value.raw,e)},TaggedTemplateExpression(e,t){pt(t,e.tag,e),this[e.quasi.type](e.quasi,t)},ArrayExpression:bt=function(e,t){if(t.write("["),e.elements.length>0){const{elements:i}=e,{length:r}=i;for(let e=0;;){const s=i[e];if(null!=s&&this[s.type](s,t),!(++e<r)){null==s&&t.write(", ");break}t.write(", ")}}t.write("]")},ArrayPattern:bt,ObjectExpression(e,t){const i=t.indent.repeat(t.indentLevel++),{lineEnd:r,writeComments:s}=t,n=i+t.indent;if(t.write("{"),e.properties.length>0){t.write(r),s&&null!=e.comments&&dt(t,e.comments,n,r);const a=","+r,{properties:o}=e,{length:h}=o;for(let e=0;;){const i=o[e];if(s&&null!=i.comments&&dt(t,i.comments,n,r),t.write(n),this[i.type](i,t),!(++e<h))break;t.write(a)}t.write(r),s&&null!=e.trailingComments&&dt(t,e.trailingComments,n,r),t.write(i+"}")}else s?null!=e.comments?(t.write(r),dt(t,e.comments,n,r),null!=e.trailingComments&&dt(t,e.trailingComments,n,r),t.write(i+"}")):null!=e.trailingComments?(t.write(r),dt(t,e.trailingComments,n,r),t.write(i+"}")):t.write("}"):t.write("}");t.indentLevel--},Property(e,t){e.method||"i"!==e.kind[0]?this.MethodDefinition(e,t):(e.shorthand||(e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),t.write(": ")),this[e.value.type](e.value,t))},PropertyDefinition(e,t){e.static&&t.write("static "),e.computed&&t.write("["),this[e.key.type](e.key,t),e.computed&&t.write("]"),null!=e.value?(t.write(" = "),this[e.value.type](e.value,t),t.write(";")):"F"!==e.key.type[0]&&t.write(";")},ObjectPattern(e,t){if(t.write("{"),e.properties.length>0){const{properties:i}=e,{length:r}=i;for(let e=0;this[i[e].type](i[e],t),++e<r;)t.write(", ")}t.write("}")},SequenceExpression(e,t){ct(t,e.expressions)},UnaryExpression(e,t){if(e.prefix){const{operator:i,argument:r,argument:{type:s}}=e;t.write(i);const n=ut(t,r,e);n||!(i.length>1)&&("U"!==s[0]||"n"!==s[1]&&"p"!==s[1]||!r.prefix||r.operator[0]!==i||"+"!==i&&"-"!==i)||t.write(" "),n?(t.write(i.length>1?" (":"("),this[s](r,t),t.write(")")):this[s](r,t)}else this[e.argument.type](e.argument,t),t.write(e.operator)},UpdateExpression(e,t){e.prefix?(t.write(e.operator),this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},AssignmentExpression(e,t){this[e.left.type](e.left,t),t.write(" "+e.operator+" "),this[e.right.type](e.right,t)},AssignmentPattern(e,t){this[e.left.type](e.left,t),t.write(" = "),this[e.right.type](e.right,t)},BinaryExpression:xt=function(e,t){const i="in"===e.operator;i&&t.write("("),pt(t,e.left,e,!1),t.write(" "+e.operator+" "),pt(t,e.right,e,!0),i&&t.write(")")},LogicalExpression:xt,ConditionalExpression(e,t){const{test:i}=e,r=t.expressionsPrecedence[i.type];r===ht||r<=t.expressionsPrecedence.ConditionalExpression?(t.write("("),this[i.type](i,t),t.write(")")):this[i.type](i,t),t.write(" ? "),this[e.consequent.type](e.consequent,t),t.write(" : "),this[e.alternate.type](e.alternate,t)},NewExpression(e,t){t.write("new ");const i=t.expressionsPrecedence[e.callee.type];i===ht||i<t.expressionsPrecedence.CallExpression||function(e){let t=e;for(;null!=t;){const{type:e}=t;if("C"===e[0]&&"a"===e[1])return!0;if("M"!==e[0]||"e"!==e[1]||"m"!==e[2])return!1;t=t.object}}(e.callee)?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),ct(t,e.arguments)},CallExpression(e,t){const i=t.expressionsPrecedence[e.callee.type];i===ht||i<t.expressionsPrecedence.CallExpression?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),e.optional&&t.write("?."),ct(t,e.arguments)},ChainExpression(e,t){this[e.expression.type](e.expression,t)},MemberExpression(e,t){const i=t.expressionsPrecedence[e.object.type];i===ht||i<t.expressionsPrecedence.MemberExpression?(t.write("("),this[e.object.type](e.object,t),t.write(")")):this[e.object.type](e.object,t),e.computed?(e.optional&&t.write("?."),t.write("["),this[e.property.type](e.property,t),t.write("]")):(e.optional?t.write("?."):t.write("."),this[e.property.type](e.property,t))},MetaProperty(e,t){t.write(e.meta.name+"."+e.property.name,e)},Identifier(e,t){t.write(e.name,e)},PrivateIdentifier(e,t){t.write(`#${e.name}`,e)},Literal(e,t){null!=e.raw?t.write(e.raw,e):null!=e.regex?this.RegExpLiteral(e,t):null!=e.bigint?t.write(e.bigint+"n",e):t.write(at(e.value),e)},RegExpLiteral(e,t){const{regex:i}=e;t.write(`/${i.pattern}/${i.flags}`,e)}},_t={};class St{constructor(e){const t=null==e?_t:e;this.output="",null!=t.output?(this.output=t.output,this.write=this.writeToStream):this.output="",this.generator=null!=t.generator?t.generator:Et,this.expressionsPrecedence=null!=t.expressionsPrecedence?t.expressionsPrecedence:lt,this.indent=null!=t.indent?t.indent:"  ",this.lineEnd=null!=t.lineEnd?t.lineEnd:"\n",this.indentLevel=null!=t.startingIndentLevel?t.startingIndentLevel:0,this.writeComments=!!t.comments&&t.comments,null!=t.sourceMap&&(this.write=null==t.output?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=t.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split("\n").length-1,this.mapping={original:null,generated:this,name:void 0,source:t.sourceMap.file||t.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,t){this.output+=e,this.map(e,t)}writeToStreamAndMap(e,t){this.output.write(e),this.map(e,t)}map(e,t){if(null!=t){const{type:i}=t;if("L"===i[0]&&"n"===i[2])return this.column=0,void this.line++;if(null!=t.loc){const{mapping:e}=this;e.original=t.loc.start,e.name=t.name,this.sourceMap.addMapping(e)}if("T"===i[0]&&"E"===i[8]||"L"===i[0]&&"i"===i[1]&&"string"==typeof t.value){const{length:t}=e;let{column:i,line:r}=this;for(let s=0;s<t;s++)"\n"===e[s]?(i=0,r++):i++;return this.column=i,void(this.line=r)}}const{length:i}=e,{lineEnd:r}=this;i>0&&(this.lineEndSize>0&&(1===r.length?e[i-1]===r:e.endsWith(r))?(this.line+=this.lineEndSize,this.column=0):this.column+=i)}toString(){return this.output}}var At={codeFromFunction:function(e){var t=e.toString();return(t=t.substr(t.indexOf("{")+1)).substr(0,t.length-1)},cleanupCode:function(e){var t=e.split("\n").filter((function(e){return""!==e})),i=t[0].length-t[0].trim().length;return t.map((function(e){return e.substring(i)})).join("\n").trim()}},Ct=function(e,t){if(null!=e)if(Array.isArray(e))e.forEach(t);else for(var i in e)t(e[i],i,e)};class kt{constructor(e,t,i){this.callback=e||function(){},this.timeout=1e3,this.branchStartTime=0,this.loopCounts={},this.reportLocation=i,this.loopBreak={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"KAInfiniteLoopProtect"},arguments:[]}},t&&(this.startupTimeout=t.startupTimeout??2e3,this.programTimeout=t.programTimeout??500,this.loopCheck=t.loopCheck??1e3),this.KAInfiniteLoopProtect=this._KAInfiniteLoopProtect.bind(this),this.KAInfiniteLoopSetTimeout=this._KAInfiniteLoopSetTimeout.bind(this),document.addEventListener("visibilitychange",(()=>{document.hidden?this.visible=!1:(this.visible=!0,this.branchStartTime=0)})),this.visible=!document.hidden}_KAInfiniteLoopProtect(e){e&&(this.loopCounts[e]||(this.loopCounts[e]=0),this.loopCounts[e]+=1);var t=Date.now();if(this.branchStartTime){if(this.visible&&t-this.branchStartTime>this.timeout){if(!this.reportLocation){var i=new Error("KA_INFINITE_LOOP");throw this.callback(i),i}var r=0,s=null;Object.keys(this.loopCounts).forEach((e=>{this.loopCounts[e]>r&&(r=this.loopCounts[e],s=e)}));var n={infiniteLoopNodeType:(s=JSON.parse(s)).type,row:s.loc.start.line-1};throw this.callback(n),n}}else this.branchStartTime=t,setTimeout((()=>this.branchStartTime=0),0)}_KAInfiniteLoopSetTimeout(e){this.timeout=e,this.branchStartTime=0}riskyStatements=["DoWhileStatement","WhileStatement","ForStatement","FunctionExpression","FunctionDeclaration","ArrowFunctionExpression"];leave(e){var t=n;if(-1!==this.riskyStatements.indexOf(e.type)&&void 0!==e.body.body?.unshift)if(this.reportLocation){var i={type:e.type,loc:e.loc};e.body.body.unshift(t.IfStatement(t.BinaryExpression(t.Identifier("KAInfiniteLoopCount"),">",t.Literal(this.loopCheck)),t.BlockStatement([t.ExpressionStatement(t.CallExpression(t.Identifier("KAInfiniteLoopProtect"),[t.Literal(JSON.stringify(i))])),t.ExpressionStatement(t.AssignmentExpression(t.Identifier("KAInfiniteLoopCount"),"=",t.Literal(0)))]))),e.body.body.unshift(t.ExpressionStatement(t.UpdateExpression(t.Identifier("KAInfiniteLoopCount"),"++",!1)))}else e.body.body.unshift(this.loopBreak);"Program"===e.type&&(this.startupTimeout&&e.body.unshift(t.ExpressionStatement(t.CallExpression(t.Identifier("KAInfiniteLoopSetTimeout"),[t.Literal(this.startupTimeout)]))),this.programTimeout&&e.body.push(t.ExpressionStatement(t.CallExpression(t.Identifier("KAInfiniteLoopSetTimeout"),[t.Literal(this.programTimeout)]))))}}class Tt{constructor(e){Object.assign(this,{sandboxed:!0,envName:"__env__"},e),this.DUMMY=this.processing.draw,this.seed=null,this.globals={};var t=this;this.sandboxed&&(this.processing.Object=window.Object,this.processing.RegExp=window.RegExp,this.processing.Math=window.Math,this.processing.Array=window.Array,this.processing.String=window.String,this.processing.isNaN=window.isNaN,this.processing.Number=window.Number,this.processing.Date=window.Date),Object.assign(this.processing,{getImage:function(e){return t.resourceCache.getImage(e)},getSound:function(e){return t.resourceCache.getSound(e)},playSound:function(e){if(!(e&&e.audio&&e.audio.play))throw"No sound file provided.";e.audio.currentTime=0,e.audio.play()},debug:function(){console.log.apply(console,arguments)}},this.additionalMethods),this.reseedRandom(),this.drawLoopMethods=["draw","mouseClicked","mouseDragged","mouseMoved","mousePressed","mouseReleased","mouseScrolled","mouseOver","mouseOut","touchStart","touchEnd","touchMove","touchCancel","keyPressed","keyReleased","keyTyped"],this.liveReset={background:[255,255,255],colorMode:[1],ellipseMode:[3],fill:[255,255,255],frameRate:[60],imageMode:[0],rectMode:[0],stroke:[0,0,0],strokeCap:["round"],strokeWeight:[1],textAlign:[37,0],textAscent:[9],textDescent:[12],textFont:["Arial",12],textLeading:[14],textSize:[12]},this.idempotentCalls=["createFont"],this.loopProtector=new kt(this.infiniteLoopCallback,this.loopProtectTimeouts,!0)}initializeProps(){}restoreRandomSeed(){this.processing.randomSeed(this.seed)}reseedRandom(){this.seed=Math.floor(4294967296*Math.random())}clear(){var e=this;Object.keys(this.liveReset).forEach((function(t){e.processing[t].apply(e.processing,e.liveReset[t])}))}restart(){this.lastGrab=null,this.lastGrabObj=null,this.reseedRandom(),this.processing.frameCount=0,this.processing._clearLogs()}propListString(e){return""}lint(){return Promise.resolve()}extractGlobals(e){return{}}objectExtract(e,t,i){for(var r in this.processing[e]||(Array.isArray(t)?this.processing[e]=[]:this.processing[e]="function"==typeof t?function(){}:{}),i&&(t=t[i]),t)if(t.hasOwnProperty(r)&&r.indexOf("__")<0)if("function"==typeof t[r])this.grabObj[e+(i?"."+i:"")+"['"+r+"']"]=Tt.stringify(t[r]);else{var s=this.processing[e];i&&(s=s[i]),s[r]=t[r]}}hasOrHadDrawLoop(){for(var e=0,t=this.drawLoopMethods.length;e<t;e++){var i=this.drawLoopMethods[e];if(this.globals[i]||this.lastGrab&&this.lastGrab[i])return!0}return!1}drawLoopMethodDefined(){for(var e=0,t=this.drawLoopMethods.length;e<t;e++){var i=this.drawLoopMethods[e];if(this.processing[i]!==this.DUMMY&&void 0!==this.processing[i])return!0}return!1}runCode(e,t){var i=nt.findResources(e);this.resourceCache.cacheResources(i).then((()=>this.injectCode(e))).catch((e=>{t&&t(e)}))}injectCode(e){var t=this,i={},r=[],s=[],n=!1,a={},o={},h=this.props,l="";this.grabObj={},Tt.instances=[];var c=this.hasOrHadDrawLoop();if(c){if(Ct(this.globals,function(e,t){var s=this.processing[t];i[t]="function"!=typeof s||this.safeCalls[t]?s:function(){return void 0!==r&&r.push([t,arguments]),0}}.bind(this)),y=this.exec(e,i))throw y;Ct(i,(function(e,t){"function"==typeof e&&(e.__name=t)}));for(var u=0,p=Tt.instances.length;u<p;u++)o[Tt.instances[u].constructor.__name]=!0;this.oldInstances&&Tt.stringifyArray(this.oldInstances)!==Tt.stringifyArray(Tt.instances)&&(n=!0),/createGraphics[\s\n]*\(/.test(e)&&(n=!0),this.oldInstances=Tt.instances,Tt.instances=[];var f=function(e){d=Array.prototype.slice.call(r[e][1]),m=d.map((function(i,s){if(Array.isArray(i)||i!==Object(i))return Tt.stringify(i);var n="__obj__"+r[e][0]+"__"+s;return t.processing[n]=i,n})),s.push(r[e][0]+"("+m.join(", ")+");")};for(u=0;u<r.length;u++){var d,m;f(u)}for(var g in Ct(i,function(e,t){if(!/^KAInfiniteLoop/.test(t)&&!/^PJSCodeInjector/.test(t))try{if(i[t]=Tt.stringify(i[t]),this.lastGrab&&!1!==h[t]&&(!(t in this.lastGrab)||i[t]!==this.lastGrab[t]))if("function"==typeof e)o[t]&&(n=!0),a[t]=!0,l+="var "+t+" = "+i[t]+";\n",l+=t+".__name = '"+t+"';\n";else if(Array.isArray(e)||e!==Object(e)||Array.isArray(this.processing[t])||this.processing[t]!==Object(this.processing[t]))this.processing[t]=e;else for(var r in e)e.hasOwnProperty(r)&&(this.processing[t][r]=e[r]);"function"==typeof e&&!1!==h[t]&&(this.objectExtract(t,e),this.objectExtract(t,e,"prototype"))}catch(i){this.objectExtract(t,e)}}.bind(this)),Ct(this.grabObj,function(e,t){var i=/^[^.[]*/.exec(t)[0];this.lastGrabObj&&this.lastGrabObj[t]===e&&!a[i]||(l+=t+" = "+e+";\n")}.bind(this)),this.lastGrabObj)g in this.grabObj||(l+="delete "+g+";\n");for(var v in this.lastGrab)/^KAInfiniteLoop/.test(v)||v in i||v in this.props&&!this.drawLoopMethods.includes(v)||(l+="delete "+v+";\n","draw"===v&&(this.clear(),this.processing.draw=this.DUMMY))}if(this.processing.resetMatrix(),this.restoreRandomSeed(),this.lastGrab&&Object.keys(this.liveReset).forEach((function(e){!t.globals[e]&&t.lastGrab[e]&&t.processing[e].apply(t.processing,t.liveReset[e])})),c&&this.drawLoopMethodDefined()&&this.lastGrab&&!n){if((l||s.length>0)&&(this.globals.draw&&(l+="\ndraw();"),y=this.exec(l,this.processing,s)))throw y}else{var y;if(this.clear(),this.processing._clearLogs(),this.globals.draw&&(e+="\ndraw();"),y=this.exec(e,this.processing))throw y;Ct(this.globals,(function(e,t){"function"==typeof e&&(e.__name=t)}))}this.processing.draw||(this.processing.draw=this.DUMMY),c&&(this.lastGrab=i,this.lastGrabObj=this.grabObj)}transformCode(e,t,i){var r=this.envName,s=this.enableLoopProtect,n=this.loopProtector;t.KAInfiniteLoopProtect=this.loopProtector.KAInfiniteLoopProtect,t.KAInfiniteLoopSetTimeout=this.loopProtector.KAInfiniteLoopSetTimeout,t.KAInfiniteLoopCount=0,t.PJSCodeInjector=Tt;var h=new RegExp(r+"\\.","g"),l=st(e.replace(h,""),{ecmaVersion:"latest",locations:!0}),c=[];return i?c.push(o.checkForBannedProps(["__env__"])):c.push(o.checkForBannedProps(["__env__","KAInfiniteLoopCount","KAInfiniteLoopProtect","KAInfiniteLoopSetTimeout"])),c.push(o.rewriteFunctionDeclarations),s&&!i&&c.push(n),a(l,null,c),a(l,null,[o.rewriteContextVariables(r,t,[])]),function(e){const t=new St(void 0);return t.generator[e.type](e,t),t.output}(l)}exportCode(e,t,i){var r=this.transformCode(e,this.processing,null,{rewriteNewExpression:!1}),s="",n=nt.findResources(r);return s+="var resources = "+JSON.stringify(n)+";\n",(s+=At.cleanupCode(At.codeFromFunction((function(){var e=[],t=document.createElement("div");t.style.height=0,t.style.width=0,t.style.overflow="hidden",t.style.position="absolute",document.body.appendChild(t);var i=Object.keys(n).map((function(i){return-1!==i.indexOf(".png")?function(i){return new Promise((function(r){var s=document.createElement("img");s.onload=function(){e[i]=s,r()},s.onerror=function(){r()},s.src=/^(http:|https:)\/\//.test(i)?i:"https://www.kasandbox.org/programming-images/"+i,t.appendChild(s),e[i]=s}))}(i):-1!==i.indexOf(".mp3")?function(t){return new Promise((function(i){var r,s,n=document.createElement("audio"),a=t.split("/"),o=(r=OutputSounds[0].groups,s={groupName:a[0]},r.find((e=>{for(var t in s)if(s[t]!==e[t])return!1;return!0})));o&&-1!==o.sounds.indexOf(a[1].replace(".mp3",""))?(n.preload="auto",n.oncanplaythrough=function(){e[t]=n,i()},n.onerror=function(){i()},n.src=/^(http:|https:)\/\//.test(t)?t:"https://cdn.kastatic.org/third_party/javascript-khansrc/live-editor/sounds/"+t):i()}))}(i):void 0}));Promise.all(i).then((function(){var t=document.createElement("canvas");t.width=400,t.height=400;var i=new Processing(t);i.width=400,i.height=400,i.getSound=function(t){return e[t+".mp3"]},i.playSound=function(e){if(!e||!e.play)throw new Error("No sound file provided.");e.currentTime=0,e.play()},i.getImage=function(t){return new i.PImage(e[t+".png"])},i.draw&&i.loop()}))})))+"\n").replace(/\/\/ __USERCODE__/g,r).replace(/\/\/ __IMAGEDIR__/g,'var imageDir = "'+t+'"').replace(/\/\/ __SOUNDDIR__/g,'var soundDir = "'+i+'"')}exec(e,t,i){if(e){var r="{ get externals() { throw { message: "+JSON.stringify("This program uses capabilities we've turned off for security reasons. Khan Academy prohibits showing external images, playing external sounds, or displaying pop-ups.")+" } } }";try{var s=this.transformCode(e,t,i),n="var "+this.envName+" = context;\n(function(){\n"+s+"\n}).apply("+r+");";new Function("context",n)(t)}catch(e){return e}}}static stringify(e){return"function"==typeof e?e.toString():e&&e.__id?e.__id():e&&"[object Array]"===Object.prototype.toString.call(e)?this.stringifyArray(e):void 0===e?"undefined":JSON.stringify(e,(function(e,t){if(!t||!(void 0!==t.id&&"output-canvas"===t.id||"undefined"!=typeof CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D))return t}))}static stringifyArray(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.stringify(e[i]));return t.join(", ")}static stringifyArray(e){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.stringify(e[i]));return t.join(", ")}static applyInstance(e){}static newCallback(){}static instances=[]}window.PJSCodeInjector=Tt,window.LoopProtector=kt,window.PJSUtils=At,window.KhanPJS=class{code="";constructor(t={}){t.canvas?this.canvas=t.canvas:(this.canvas=document.createElement("canvas"),this.canvas.width=400,this.canvas.height=400),this.DUMMY=function(){},this.processing=new e(this.canvas,(e=>e.draw=this.DUMMY)),this.resourceCache=new nt({canvas:this.processing}),this.infiniteLoopCallback=t.infiniteLoopCallback??function(e){},this.injector=new Tt({processing:this.processing,resourceCache:this.resourceCache,infiniteLoopCallback:this.infiniteLoopCallback.bind(this),enableLoopProtect:t.enableLoopProtect??!0,additionalMethods:{Program:this.ProgramMethods},loopProtectTimeouts:{startupTimeout:t.startupTimeout,programTimeout:t.programTimeout,loopCheck:t.loopCheck}}),this.prepProcessing(),this.originalState=Object.assign({},this.processing),this.originalEntries=Object.entries(this.originalState),this.resetGlobals()}prepProcessing(){this.processing.size(this.canvas.width,this.canvas.height),this.processing.background(255,255,255),this.processing.frameRate(30),this.processing.angleMode="degrees"}resetGlobals(){for(var e=0;e<this.originalEntries.length;e++)this.processing[this.originalEntries[e][0]]=this.originalEntries[e][1];var t=Object.keys(this.processing);for(e=0;e<t.length;e++)this.originalState.hasOwnProperty(t[e])||delete this.processing[t[e]]}runCode(e=document.querySelector("script[type=pjs]")?.textContent,t=console.error){return this.code=e,this.restart(t)}restart(e=console.error){this.resetGlobals(),this.injector.restart();try{this.injector.runCode(this.code,e)}catch(t){e(t)}}size(e=400,t=400){!this.processing||e===this.processing.width&&t===this.processing.height||(this.canvas.width=e,this.canvas.height=t,this.processing.size(e,t),this.originalState.width=e,this.originalState.height=t,this.originalEntries.find((e=>"width"===e[0]))[1]=e,this.originalEntries.find((e=>"height"===e[0]))[1]=e,this.restart())}ProgramMethod={settings:function(){return{}},restart:function(){this.restart()},assertEqual:function(){}};set enableLoopProtect(e){this.injector.enableLoopProtect=e}set startupTimeout(e){this.injector.startupTimeout=e}set programTimeout(e){this.injector.programTimeout=e}set loopCheck(e){this.injector.loopCheck=e}get enableLoopProtect(){return this.injector.enableLoopProtect}get startupTimeout(){return this.injector.startupTimeout}get programTimeout(){return this.injector.programTimeout}get loopCheck(){return this.injector.loopCheck}}})();